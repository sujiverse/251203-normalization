<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6장: 환자 & 치료 데이터 입력 - 물리치료사를 위한 데이터베이스 3권</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    @@include('components/top-nav.html', {"root": "../..", "activeBook": "3"})

    @@include('components/mobile-menu.html')

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">×</button>
            <div class="sidebar-header">
                <h1>📙 물리치료사를 위한</h1>
                <p>실전 구축 & 대시보드 (3권)</p>
            </div>
            <ul class="nav-list" id="navList"></ul>
        </nav>

        <main class="main">
            <h1 class="title">환자 & 치료 데이터 입력</h1>

            <h2>힐링손에 환자가 옵니다</h2>

            <p>기준 데이터가 준비되었으니, 이제 실제 업무 데이터를 입력할 차례입니다. 환자 정보, 진단 기록, 치료 세션, 청구/수납, SOAP 노트까지. 힐링손 물리치료센터가 실제로 3개월간 운영된 것처럼 데이터를 만들어봅시다.</p>

            <h3>이번 장에서 입력할 데이터</h3>

            <table>
                <tr><th>테이블</th><th>내용</th><th>개수</th></tr>
                <tr><td>patients</td><td>환자 정보</td><td>30명</td></tr>
                <tr><td>patient_diagnoses</td><td>환자별 진단</td><td>약 40건</td></tr>
                <tr><td>treatment_sessions</td><td>치료 기록</td><td>약 200건</td></tr>
                <tr><td>billings</td><td>청구/수납</td><td>약 200건</td></tr>
                <tr><td>soap_notes</td><td>SOAP 기록</td><td>약 50건 (샘플)</td></tr>
            </table>

            <p>데이터가 많아서 길어 보이지만, 복사-붙여넣기만 하면 됩니다. 천천히 따라와주세요!</p>

            <hr>

            <h2>1. 환자 데이터 (patients)</h2>

            <p>힐링손 물리치료센터에 등록된 환자 30명입니다. 다양한 연령대, 다양한 직업, 다양한 증상을 가진 환자들로 구성했습니다.</p>

            <pre><code>-- 환자 데이터 입력 (30명)
INSERT INTO patients (patient_id, name, gender, birth_date, phone, email, address, insurance_code, emergency_contact, emergency_phone, memo) VALUES
-- 첫 번째 그룹: 초기 환자들 (1월 등록)
('P001', '강민준', 'M', '1985-03-15', '010-2001-0001', 'mjkang85@email.com', '서울시 강남구 역삼동 123-45', 'INS001', '강수진', '010-2001-0002', '사무직, 허리 통증 주 호소'),
('P002', '김서연', 'F', '1990-07-22', '010-2002-0001', 'sykim90@email.com', '서울시 강남구 삼성동 456-78', 'INS002', '김영호', '010-2002-0002', '디자이너, 목/어깨 통증'),
('P003', '이준혁', 'M', '1978-11-08', '010-2003-0001', 'jhlee78@email.com', '서울시 서초구 서초동 789-12', 'INS001', '이미경', '010-2003-0002', '자영업, 만성 요통'),
('P004', '박지은', 'F', '1995-01-30', '010-2004-0001', 'jepark95@email.com', '서울시 강남구 논현동 234-56', 'INS003', '박상철', '010-2004-0002', '필라테스 강사, 무릎 불편'),
('P005', '최현우', 'M', '1988-05-12', '010-2005-0001', 'hwchoi88@email.com', '서울시 강남구 청담동 567-89', 'INS001', '최은정', '010-2005-0002', '마케팅 팀장, 거북목 증후군'),

-- 두 번째 그룹: 2월 등록 환자들
('P006', '정수빈', 'F', '1982-09-25', '010-2006-0001', 'sbjeong82@email.com', '서울시 송파구 잠실동 111-22', 'INS002', '정대현', '010-2006-0002', '주부, 오십견 의심'),
('P007', '한승민', 'M', '1992-12-03', '010-2007-0001', 'smhan92@email.com', '서울시 강동구 천호동 333-44', 'INS001', '한미라', '010-2007-0002', '축구 동호회, 무릎 인대 손상'),
('P008', '윤지현', 'F', '1987-04-18', '010-2008-0001', 'jhyoon87@email.com', '서울시 강남구 대치동 555-66', 'INS003', '윤상호', '010-2008-0002', '회계사, 손목 통증'),
('P009', '임재원', 'M', '1975-08-07', '010-2009-0001', 'jwlim75@email.com', '서울시 서초구 반포동 777-88', 'INS001', '임수연', '010-2009-0002', '택시기사, 허리디스크 수술 이력'),
('P010', '송예진', 'F', '1998-02-14', '010-2010-0001', 'yjsong98@email.com', '서울시 강남구 신사동 999-11', 'INS001', '송민수', '010-2010-0002', '대학생, 측만증'),

-- 세 번째 그룹: 스포츠 손상 환자들
('P011', '오성훈', 'M', '1993-06-28', '010-2011-0001', 'shoh93@email.com', '서울시 마포구 상암동 123-11', 'INS002', '오현정', '010-2011-0002', '축구선수 출신, 발목 재활'),
('P012', '신유진', 'F', '1989-10-16', '010-2012-0001', 'yjshin89@email.com', '서울시 용산구 이태원동 456-22', 'INS001', '신동욱', '010-2012-0002', '테니스 동호회, 테니스엘보'),
('P013', '권도현', 'M', '1996-03-05', '010-2013-0001', 'dhkwon96@email.com', '서울시 성동구 성수동 789-33', 'INS003', '권미선', '010-2013-0002', '헬스 트레이너, 어깨 통증'),
('P014', '배수진', 'F', '1984-07-21', '010-2014-0001', 'sjbae84@email.com', '서울시 광진구 자양동 012-44', 'INS001', '배준호', '010-2014-0002', '요가 강사, 고관절 통증'),
('P015', '조영민', 'M', '1991-11-30', '010-2015-0001', 'ymcho91@email.com', '서울시 강남구 역삼동 345-55', 'INS002', '조은비', '010-2015-0002', '골프 동호회, 허리 통증'),

-- 네 번째 그룹: 직장인 환자들
('P016', '장서윤', 'F', '1986-01-09', '010-2016-0001', 'syjang86@email.com', '서울시 영등포구 여의도동 678-66', 'INS001', '장현수', '010-2016-0002', 'IT 개발자, VDT 증후군'),
('P017', '안정호', 'M', '1979-05-24', '010-2017-0001', 'jhahn79@email.com', '서울시 중구 명동 901-77', 'INS003', '안미영', '010-2017-0002', '은행원, 목디스크'),
('P018', '황지민', 'F', '1994-08-13', '010-2018-0001', 'jmhwang94@email.com', '서울시 강북구 수유동 234-88', 'INS001', '황대성', '010-2018-0002', '간호사, 요통'),
('P019', '노현석', 'M', '1981-12-27', '010-2019-0001', 'hsnoh81@email.com', '서울시 동작구 사당동 567-99', 'INS002', '노지연', '010-2019-0002', '교사, 어깨 결림'),
('P020', '하윤서', 'F', '1997-04-02', '010-2020-0001', 'ysha97@email.com', '서울시 관악구 신림동 890-10', 'INS001', '하준혁', '010-2020-0002', '대학원생, 거북목'),

-- 다섯 번째 그룹: 중장년 환자들
('P021', '유재훈', 'M', '1968-09-11', '010-2021-0001', 'jhyoo68@email.com', '서울시 강남구 개포동 111-21', 'INS001', '유미라', '010-2021-0002', '자영업, 퇴행성 관절염'),
('P022', '남정희', 'F', '1965-02-19', '010-2022-0001', 'jhnam65@email.com', '서울시 송파구 문정동 222-32', 'INS002', '남상우', '010-2022-0002', '주부, 무릎 관절염'),
('P023', '심우진', 'M', '1972-06-08', '010-2023-0001', 'wjsim72@email.com', '서울시 강동구 길동 333-43', 'INS001', '심은혜', '010-2023-0002', '건설업, 만성 요통'),
('P024', '전미숙', 'F', '1970-10-25', '010-2024-0001', 'msjeon70@email.com', '서울시 서초구 양재동 444-54', 'INS003', '전승호', '010-2024-0002', '공무원, 오십견'),
('P025', '고영수', 'M', '1963-03-17', '010-2025-0001', 'ysko63@email.com', '서울시 강남구 수서동 555-65', 'INS001', '고미정', '010-2025-0002', '퇴직자, 척추관협착증'),

-- 여섯 번째 그룹: 최근 등록 환자들
('P026', '문채원', 'F', '1999-07-04', '010-2026-0001', 'cwmoon99@email.com', '서울시 마포구 연남동 666-76', 'INS001', '문대현', '010-2026-0002', '바리스타, 손목건초염'),
('P027', '양승준', 'M', '1983-11-22', '010-2027-0001', 'sjyang83@email.com', '서울시 용산구 한남동 777-87', 'INS002', '양지은', '010-2027-0002', '변호사, 목/허리 통증'),
('P028', '구하나', 'F', '1976-04-30', '010-2028-0001', 'hnkoo76@email.com', '서울시 성북구 정릉동 888-98', 'INS001', '구본철', '010-2028-0002', '학원강사, 두통 동반 경추통'),
('P029', '라민혁', 'M', '1990-08-16', '010-2029-0001', 'mhra90@email.com', '서울시 노원구 상계동 999-09', 'INS004', '라수진', '010-2029-0002', '배달기사, 교통사고 후유증'),
('P030', '마지원', 'F', '1988-12-01', '010-2030-0001', 'jwma88@email.com', '서울시 강남구 논현동 000-20', 'INS001', '마상현', '010-2030-0002', '승무원, 요추염좌');</code></pre>

            <p>환자 데이터를 보시면 실제 클리닉에서 볼 수 있는 다양한 유형이 있습니다:</p>

            <ul>
                <li><strong>직업별:</strong> 사무직, 전문직, 자영업, 주부, 학생, 운동선수</li>
                <li><strong>연령별:</strong> 20대 대학생부터 60대 퇴직자까지</li>
                <li><strong>증상별:</strong> 허리 통증, 목 통증, 어깨 문제, 무릎 문제, 손목 문제</li>
                <li><strong>보험별:</strong> 건강보험, 실손보험, 자동차보험</li>
            </ul>

            <h3>✅ 체크포인트</h3>

            <pre><code>-- 환자 수 확인
SELECT COUNT(*) as 총환자수 FROM patients;

-- 성별 분포 확인
SELECT gender, COUNT(*) as 인원
FROM patients
GROUP BY gender;</code></pre>

            <p>총 30명, 남녀 각각 15명씩이면 성공!</p>

            <hr>

            <h2>2. 환자-진단 연결 데이터 (patient_diagnoses)</h2>

            <p>각 환자가 어떤 진단을 받았는지 연결합니다. 한 환자가 여러 진단을 받을 수 있어요. 예를 들어 요통(M54.5)과 요추 디스크(M51.1)를 동시에 가진 환자도 있습니다.</p>

            <pre><code>-- 환자-진단 연결 데이터 입력
INSERT INTO patient_diagnoses (patient_id, diagnosis_code, diagnosis_date, is_primary, notes) VALUES
-- P001 강민준: 요통 + 요추디스크
('P001', 'M54.5', '2024-01-03', 'Y', '주 진단: 만성 요통'),
('P001', 'M51.1', '2024-01-03', 'N', '부 진단: L4-5 디스크 팽윤'),

-- P002 김서연: 경추통
('P002', 'M54.2', '2024-01-05', 'Y', '거북목으로 인한 경추통'),

-- P003 이준혁: 요추디스크 + 척추관협착
('P003', 'M51.1', '2024-01-08', 'Y', 'L5-S1 디스크'),
('P003', 'M48.0', '2024-01-08', 'N', '경도 협착'),

-- P004 박지은: 무릎 불안정
('P004', 'M23.5', '2024-01-10', 'Y', '전방십자인대 손상 이력'),

-- P005 최현우: 경추통 + 어깨충돌
('P005', 'M54.2', '2024-01-12', 'Y', '심한 거북목'),
('P005', 'M75.4', '2024-01-12', 'N', '우측 어깨'),

-- P006 정수빈: 오십견
('P006', 'M75.0', '2024-02-01', 'Y', '좌측 동결견'),

-- P007 한승민: 무릎인대 손상
('P007', 'S83.5', '2024-02-05', 'Y', '축구 중 부상'),

-- P008 윤지현: 손목건초염
('P008', 'M70.0', '2024-02-08', 'Y', '양측 손목'),

-- P009 임재원: 요추디스크 (수술 후)
('P009', 'M51.1', '2024-02-10', 'Y', 'L4-5 수술 후 재활'),

-- P010 송예진: 측만증
('P010', 'M41.1', '2024-02-15', 'Y', '흉추 우측 만곡 15도'),

-- P011 오성훈: 발목 염좌
('P011', 'S83.5', '2024-02-18', 'Y', '발목 인대 손상'),

-- P012 신유진: 테니스엘보
('P012', 'M77.1', '2024-02-20', 'Y', '우측 외측상과염'),

-- P013 권도현: 회전근개
('P013', 'M75.1', '2024-02-22', 'Y', '극상근 부분파열'),

-- P014 배수진: 고관절 통증
('P014', 'M79.1', '2024-02-25', 'Y', '고관절 주변 근육통'),

-- P015 조영민: 요통
('P015', 'M54.5', '2024-02-28', 'Y', '골프 스윙 시 통증'),

-- P016 장서윤: 경추통 + 근육통
('P016', 'M54.2', '2024-03-01', 'Y', 'VDT 증후군'),
('P016', 'M79.1', '2024-03-01', 'N', '승모근 긴장'),

-- P017 안정호: 목디스크
('P017', 'M50.1', '2024-03-03', 'Y', 'C5-6 디스크'),

-- P018 황지민: 요통
('P018', 'M54.5', '2024-03-05', 'Y', '간호 업무로 인한 요통'),

-- P019 노현석: 회전근개
('P019', 'M75.1', '2024-03-07', 'Y', '좌측 어깨'),

-- P020 하윤서: 경추통
('P020', 'M54.2', '2024-03-10', 'Y', '거북목'),

-- P021 유재훈: 무릎관절염
('P021', 'M17.1', '2024-03-12', 'Y', '양측 퇴행성'),

-- P022 남정희: 무릎관절염
('P022', 'M17.1', '2024-03-13', 'Y', '양측, 중등도'),

-- P023 심우진: 요통 + 척추증
('P023', 'M54.5', '2024-03-14', 'Y', '만성'),
('P023', 'M47.8', '2024-03-14', 'N', '퇴행성 변화'),

-- P024 전미숙: 오십견
('P024', 'M75.0', '2024-03-15', 'Y', '우측'),

-- P025 고영수: 척추관협착증
('P025', 'M48.0', '2024-03-16', 'Y', 'L3-4, L4-5'),

-- P026 문채원: 손목건초염
('P026', 'M70.0', '2024-03-18', 'Y', '우측'),

-- P027 양승준: 요통 + 경추통
('P027', 'M54.5', '2024-03-19', 'Y', '요추'),
('P027', 'M54.2', '2024-03-19', 'N', '경추'),

-- P028 구하나: 경추통
('P028', 'M54.2', '2024-03-20', 'Y', '두통 동반'),

-- P029 라민혁: 경추염좌 (교통사고)
('P029', 'M54.2', '2024-03-21', 'Y', '교통사고 후유증'),

-- P030 마지원: 요추염좌
('P030', 'M54.5', '2024-03-22', 'Y', '급성 요추염좌');</code></pre>

            <h3>✅ 체크포인트</h3>

            <pre><code>-- 진단별 환자 수 확인
SELECT d.diagnosis_name, COUNT(DISTINCT pd.patient_id) as 환자수
FROM patient_diagnoses pd
JOIN diagnosis_codes d ON pd.diagnosis_code = d.diagnosis_code
WHERE pd.is_primary = 'Y'
GROUP BY d.diagnosis_name
ORDER BY 환자수 DESC
LIMIT 10;</code></pre>

            <p>요통, 경추통 환자가 가장 많이 나와야 합니다. 실제 물리치료 클리닉과 비슷하죠!</p>

            <hr>

            <h2>3. 치료 세션 데이터 (treatment_sessions)</h2>

            <p>이제 진짜 치료 기록입니다. 2024년 1월부터 3월까지 3개월간의 치료 기록을 입력합니다. 현실적인 패턴을 반영했어요:</p>

            <ul>
                <li>환자마다 주 1~3회 방문</li>
                <li>평일이 주말보다 많음</li>
                <li>오전/오후 골고루 분포</li>
                <li>치료사별로 담당 환자가 다름</li>
            </ul>

            <pre><code>-- 치료 세션 데이터 입력 (1월)
INSERT INTO treatment_sessions (patient_id, therapist_id, session_date, start_time, end_time, session_status, notes) VALUES
-- 1월 첫째 주
('P001', 'T001', '2024-01-03', '10:00', '10:30', '완료', '초진, 요통 평가'),
('P002', 'T003', '2024-01-05', '14:00', '14:30', '완료', '초진, 경추 평가'),
('P001', 'T001', '2024-01-05', '10:00', '10:30', '완료', '도수치료 2회차'),

-- 1월 둘째 주
('P003', 'T001', '2024-01-08', '09:00', '09:30', '완료', '초진, 디스크 평가'),
('P001', 'T001', '2024-01-08', '10:00', '10:30', '완료', '도수치료 3회차'),
('P002', 'T003', '2024-01-09', '14:00', '14:30', '완료', '도수치료 2회차'),
('P004', 'T002', '2024-01-10', '11:00', '11:30', '완료', '초진, 무릎 평가'),
('P003', 'T001', '2024-01-10', '09:00', '09:30', '완료', '도수치료 2회차'),
('P001', 'T001', '2024-01-11', '10:00', '10:30', '완료', '도수치료 4회차'),
('P005', 'T003', '2024-01-12', '15:00', '15:30', '완료', '초진, 경추 평가'),

-- 1월 셋째 주
('P002', 'T003', '2024-01-15', '14:00', '14:30', '완료', '도수치료 3회차'),
('P003', 'T001', '2024-01-15', '09:00', '09:30', '완료', '도수치료 3회차'),
('P004', 'T002', '2024-01-16', '11:00', '11:30', '완료', '운동치료 2회차'),
('P005', 'T003', '2024-01-16', '15:00', '15:30', '완료', '도수치료 2회차'),
('P001', 'T001', '2024-01-17', '10:00', '10:30', '완료', '도수치료 5회차'),
('P003', 'T001', '2024-01-18', '09:00', '09:30', '완료', '도수치료 4회차'),
('P002', 'T003', '2024-01-19', '14:00', '14:30', '완료', '도수치료 4회차'),

-- 1월 넷째 주
('P004', 'T002', '2024-01-22', '11:00', '11:30', '완료', '운동치료 3회차'),
('P005', 'T003', '2024-01-22', '15:00', '15:30', '완료', '도수치료 3회차'),
('P001', 'T001', '2024-01-23', '10:00', '10:30', '완료', '도수치료 6회차'),
('P003', 'T001', '2024-01-24', '09:00', '09:30', '완료', '도수치료 5회차'),
('P002', 'T003', '2024-01-25', '14:00', '14:30', '완료', '도수치료 5회차'),
('P004', 'T002', '2024-01-26', '11:00', '12:00', '완료', '운동치료 4회차 (60분)'),

-- 1월 다섯째 주
('P005', 'T003', '2024-01-29', '15:00', '15:30', '완료', '도수치료 4회차'),
('P001', 'T001', '2024-01-30', '10:00', '10:30', '완료', '도수치료 7회차'),
('P003', 'T001', '2024-01-31', '09:00', '09:30', '완료', '도수치료 6회차');</code></pre>

            <pre><code>-- 치료 세션 데이터 입력 (2월)
INSERT INTO treatment_sessions (patient_id, therapist_id, session_date, start_time, end_time, session_status, notes) VALUES
-- 2월 첫째 주
('P006', 'T003', '2024-02-01', '10:00', '10:30', '완료', '초진, 오십견 평가'),
('P002', 'T003', '2024-02-01', '14:00', '14:30', '완료', '도수치료 6회차'),
('P001', 'T001', '2024-02-02', '10:00', '10:30', '완료', '도수치료 8회차'),
('P004', 'T002', '2024-02-02', '11:00', '12:00', '완료', '운동치료 5회차'),

-- 2월 둘째 주
('P007', 'T002', '2024-02-05', '09:00', '09:30', '완료', '초진, 무릎 인대 평가'),
('P005', 'T003', '2024-02-05', '15:00', '15:30', '완료', '도수치료 5회차'),
('P006', 'T003', '2024-02-06', '10:00', '10:30', '완료', '도수치료 2회차'),
('P003', 'T001', '2024-02-06', '09:00', '09:30', '완료', '도수치료 7회차'),
('P008', 'T003', '2024-02-08', '11:00', '11:30', '완료', '초진, 손목 평가'),
('P007', 'T002', '2024-02-08', '14:00', '14:30', '완료', '재활운동 2회차'),
('P009', 'T001', '2024-02-10', '10:00', '10:30', '완료', '초진, 수술 후 평가'),

-- 2월 셋째 주
('P006', 'T003', '2024-02-13', '10:00', '10:30', '완료', '도수치료 3회차'),
('P007', 'T002', '2024-02-13', '14:00', '14:30', '완료', '재활운동 3회차'),
('P008', 'T003', '2024-02-14', '11:00', '11:30', '완료', '도수치료 2회차'),
('P010', 'T004', '2024-02-15', '16:00', '17:00', '완료', '초진, 측만증 운동 평가'),
('P009', 'T001', '2024-02-15', '10:00', '10:30', '완료', '재활치료 2회차'),

-- 2월 넷째 주
('P011', 'T002', '2024-02-18', '09:00', '09:30', '완료', '초진, 발목 재활 평가'),
('P006', 'T003', '2024-02-19', '10:00', '10:30', '완료', '도수치료 4회차'),
('P012', 'T002', '2024-02-20', '14:00', '14:30', '완료', '초진, 테니스엘보 평가'),
('P010', 'T004', '2024-02-20', '16:00', '17:00', '완료', '슈로스 운동 2회차'),
('P009', 'T001', '2024-02-21', '10:00', '10:30', '완료', '재활치료 3회차'),
('P013', 'T002', '2024-02-22', '11:00', '11:30', '완료', '초진, 어깨 평가'),
('P011', 'T002', '2024-02-23', '09:00', '09:30', '완료', '재활운동 2회차'),
('P014', 'T004', '2024-02-25', '15:00', '15:30', '완료', '초진, 고관절 평가'),
('P007', 'T002', '2024-02-26', '14:00', '14:30', '완료', '재활운동 4회차'),
('P015', 'T001', '2024-02-28', '11:00', '11:30', '완료', '초진, 요통 평가'),
('P012', 'T002', '2024-02-28', '14:00', '14:30', '완료', '충격파 치료 2회차');</code></pre>

            <pre><code>-- 치료 세션 데이터 입력 (3월)
INSERT INTO treatment_sessions (patient_id, therapist_id, session_date, start_time, end_time, session_status, notes) VALUES
-- 3월 첫째 주
('P016', 'T003', '2024-03-01', '09:00', '09:30', '완료', '초진, VDT 증후군 평가'),
('P010', 'T004', '2024-03-01', '16:00', '17:00', '완료', '슈로스 운동 3회차'),
('P015', 'T001', '2024-03-02', '11:00', '11:30', '완료', '도수치료 2회차'),
('P017', 'T001', '2024-03-03', '10:00', '10:30', '완료', '초진, 목디스크 평가'),
('P013', 'T002', '2024-03-04', '11:00', '11:30', '완료', '재활운동 2회차'),
('P018', 'T003', '2024-03-05', '14:00', '14:30', '완료', '초진, 요통 평가'),
('P016', 'T003', '2024-03-06', '09:00', '09:30', '완료', '도수치료 2회차'),

-- 3월 둘째 주
('P019', 'T002', '2024-03-07', '10:00', '10:30', '완료', '초진, 어깨 평가'),
('P011', 'T002', '2024-03-08', '09:00', '09:30', '완료', '재활운동 3회차'),
('P020', 'T003', '2024-03-10', '15:00', '15:30', '완료', '초진, 거북목 평가'),
('P017', 'T001', '2024-03-11', '10:00', '10:30', '완료', '도수치료 2회차'),
('P021', 'T002', '2024-03-12', '11:00', '11:30', '완료', '초진, 무릎 관절염 평가'),
('P022', 'T002', '2024-03-13', '14:00', '14:30', '완료', '초진, 무릎 관절염 평가'),
('P023', 'T001', '2024-03-14', '09:00', '09:30', '완료', '초진, 만성요통 평가'),

-- 3월 셋째 주
('P024', 'T003', '2024-03-15', '10:00', '10:30', '완료', '초진, 오십견 평가'),
('P025', 'T001', '2024-03-16', '11:00', '11:30', '완료', '초진, 협착증 평가'),
('P018', 'T003', '2024-03-17', '14:00', '14:30', '완료', '도수치료 2회차'),
('P026', 'T003', '2024-03-18', '15:00', '15:30', '완료', '초진, 손목 평가'),
('P027', 'T001', '2024-03-19', '10:00', '10:30', '완료', '초진, 요통/경추통 평가'),
('P028', 'T003', '2024-03-20', '09:00', '09:30', '완료', '초진, 경추통 평가'),
('P029', 'T002', '2024-03-21', '14:00', '14:30', '완료', '초진, 교통사고 평가'),
('P030', 'T001', '2024-03-22', '11:00', '11:30', '완료', '초진, 급성요통 평가'),

-- 3월 넷째 주 (기존 환자 후속 치료)
('P016', 'T003', '2024-03-23', '09:00', '09:30', '완료', '도수치료 3회차'),
('P020', 'T003', '2024-03-24', '15:00', '15:30', '완료', '도수치료 2회차'),
('P017', 'T001', '2024-03-25', '10:00', '10:30', '완료', '도수치료 3회차'),
('P021', 'T002', '2024-03-25', '11:00', '11:30', '완료', '운동치료 2회차'),
('P019', 'T002', '2024-03-26', '10:00', '10:30', '완료', '도수치료 2회차'),
('P022', 'T002', '2024-03-26', '14:00', '14:30', '완료', '운동치료 2회차'),
('P023', 'T001', '2024-03-27', '09:00', '09:30', '완료', '도수치료 2회차'),
('P024', 'T003', '2024-03-27', '10:00', '10:30', '완료', '도수치료 2회차'),
('P025', 'T001', '2024-03-28', '11:00', '11:30', '완료', '도수치료 2회차'),
('P029', 'T002', '2024-03-28', '14:00', '14:30', '완료', '보험치료 2회차'),
('P030', 'T001', '2024-03-29', '11:00', '11:30', '완료', '도수치료 2회차'),
('P027', 'T001', '2024-03-29', '10:00', '10:30', '완료', '도수치료 2회차');</code></pre>

            <h3>✅ 체크포인트</h3>

            <pre><code>-- 총 치료 건수 확인
SELECT COUNT(*) as 총치료건수 FROM treatment_sessions;

-- 월별 치료 건수
SELECT DATE_FORMAT(session_date, '%Y-%m') as 월, COUNT(*) as 건수
FROM treatment_sessions
GROUP BY DATE_FORMAT(session_date, '%Y-%m')
ORDER BY 월;

-- 치료사별 치료 건수
SELECT t.name, COUNT(*) as 치료건수
FROM treatment_sessions ts
JOIN therapists t ON ts.therapist_id = t.therapist_id
GROUP BY t.name
ORDER BY 치료건수 DESC;</code></pre>

            <hr>

            <h2>4. 청구/수납 데이터 (billings)</h2>

            <p>각 치료 세션에 대한 청구와 수납 정보입니다. 대부분은 수납 완료지만, 일부는 미수금으로 남아있습니다. 현실적이죠?</p>

            <pre><code>-- 청구/수납 데이터 입력
-- session_id는 AUTO_INCREMENT로 생성되었으므로, 순서대로 1부터 시작합니다

INSERT INTO billings (session_id, fee_code, quantity, unit_price, total_amount, payment_status, payment_method, payment_date, memo) VALUES
-- 1월 청구 (session_id 1~27)
(1, 'FEE008', 1, 0, 0, '완료', NULL, '2024-01-03', '초진 상담'),
(2, 'FEE008', 1, 0, 0, '완료', NULL, '2024-01-05', '초진 상담'),
(3, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-05', NULL),
(4, 'FEE008', 1, 0, 0, '완료', NULL, '2024-01-08', '초진 상담'),
(5, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-08', NULL),
(6, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-09', NULL),
(7, 'FEE008', 1, 0, 0, '완료', NULL, '2024-01-10', '초진 상담'),
(8, 'FEE001', 1, 80000, 80000, '완료', '현금', '2024-01-10', NULL),
(9, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-11', NULL),
(10, 'FEE008', 1, 0, 0, '완료', NULL, '2024-01-12', '초진 상담'),
(11, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-15', NULL),
(12, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-15', NULL),
(13, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-01-16', NULL),
(14, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-16', NULL),
(15, 'FEE001', 1, 80000, 80000, '완료', '계좌이체', '2024-01-17', NULL),
(16, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-18', NULL),
(17, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-19', NULL),
(18, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-01-22', NULL),
(19, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-22', NULL),
(20, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-23', NULL),
(21, 'FEE001', 1, 80000, 80000, '완료', '현금', '2024-01-24', NULL),
(22, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-25', NULL),
(23, 'FEE004', 1, 90000, 90000, '완료', '카드', '2024-01-26', '60분 운동치료'),
(24, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-29', NULL),
(25, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-30', NULL),
(26, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-01-31', NULL),

-- 2월 청구 (session_id 27~57)
(27, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-01', '초진 상담'),
(28, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-01', NULL),
(29, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-02', NULL),
(30, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-02-02', NULL),
(31, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-05', '초진 상담'),
(32, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-05', NULL),
(33, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-06', NULL),
(34, 'FEE001', 1, 80000, 80000, '완료', '현금', '2024-02-06', NULL),
(35, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-08', '초진 상담'),
(36, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-02-08', NULL),
(37, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-10', '초진 상담'),
(38, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-13', NULL),
(39, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-02-13', NULL),
(40, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-14', NULL),
(41, 'FEE006', 1, 100000, 100000, '완료', '카드', '2024-02-15', '슈로스 치료'),
(42, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-15', NULL),
(43, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-18', '초진 상담'),
(44, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-19', NULL),
(45, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-20', '초진 상담'),
(46, 'FEE006', 1, 100000, 100000, '완료', '카드', '2024-02-20', '슈로스 치료'),
(47, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-02-21', NULL),
(48, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-22', '초진 상담'),
(49, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-02-23', NULL),
(50, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-25', '초진 상담'),
(51, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-02-26', NULL),
(52, 'FEE008', 1, 0, 0, '완료', NULL, '2024-02-28', '초진 상담'),
(53, 'FEE005', 1, 30000, 30000, '완료', '카드', '2024-02-28', '충격파'),

-- 3월 청구 (session_id 54~85) - 일부 미수금 포함
(54, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-01', '초진 상담'),
(55, 'FEE006', 1, 100000, 100000, '완료', '카드', '2024-03-01', '슈로스 치료'),
(56, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-02', NULL),
(57, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-03', '초진 상담'),
(58, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-03-04', NULL),
(59, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-05', '초진 상담'),
(60, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-06', NULL),
(61, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-07', '초진 상담'),
(62, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-03-08', NULL),
(63, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-10', '초진 상담'),
(64, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-11', NULL),
(65, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-12', '초진 상담'),
(66, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-13', '초진 상담'),
(67, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-14', '초진 상담'),
(68, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-15', '초진 상담'),
(69, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-16', '초진 상담'),
(70, 'FEE001', 1, 80000, 80000, '대기', NULL, NULL, '미수금'),
(71, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-18', '초진 상담'),
(72, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-19', '초진 상담'),
(73, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-20', '초진 상담'),
(74, 'FEE007', 1, 100000, 100000, '대기', NULL, NULL, '자동차보험 청구 예정'),
(75, 'FEE008', 1, 0, 0, '완료', NULL, '2024-03-22', '초진 상담'),
(76, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-23', NULL),
(77, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-24', NULL),
(78, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-25', NULL),
(79, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-03-25', NULL),
(80, 'FEE001', 1, 80000, 80000, '대기', NULL, NULL, '미수금'),
(81, 'FEE003', 1, 50000, 50000, '완료', '카드', '2024-03-26', NULL),
(82, 'FEE001', 1, 80000, 80000, '완료', '현금', '2024-03-27', NULL),
(83, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-27', NULL),
(84, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-28', NULL),
(85, 'FEE007', 1, 100000, 100000, '대기', NULL, NULL, '자동차보험 청구 예정'),
(86, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-29', NULL),
(87, 'FEE001', 1, 80000, 80000, '완료', '카드', '2024-03-29', NULL);</code></pre>

            <h3>✅ 체크포인트</h3>

            <pre><code>-- 수납 현황 확인
SELECT
payment_status,
COUNT(*) as 건수,
SUM(total_amount) as 금액
FROM billings
GROUP BY payment_status;

-- 월별 매출
SELECT
DATE_FORMAT(payment_date, '%Y-%m') as 월,
SUM(total_amount) as 매출
FROM billings
WHERE payment_status = '완료'
GROUP BY DATE_FORMAT(payment_date, '%Y-%m')
ORDER BY 월;</code></pre>

            <p>미수금 4건, 완료 83건 정도가 보이면 정상입니다!</p>

            <hr>

            <h2>5. SOAP 노트 데이터 (soap_notes)</h2>

            <p>마지막으로 SOAP 노트 샘플입니다. 모든 치료에 SOAP를 넣기엔 양이 많으니, 대표적인 케이스 몇 개만 입력합니다.</p>

            <pre><code>-- SOAP 노트 샘플 데이터 입력
INSERT INTO soap_notes (session_id, subjective, objective, assessment, plan) VALUES
(1,
'허리 통증 호소. 앉아서 일할 때 특히 심함. 통증 VAS 6/10. 아침에 뻣뻣함.',
'요추 ROM 제한 (굴곡 60%, 신전 70%). L4-5 level 압통(+). SLR 70도에서 통증.',
'만성 요통, L4-5 추간판 병변 의심. 자세 불균형 및 코어 근력 약화.',
'주 2회 도수치료 권장. 맥켄지 신전 운동 교육. 바른 자세 교육.'),

(4,
'허리 아래쪽 통증. 오래 서있으면 다리로 저림. 10년 전 디스크 진단 이력.',
'L5-S1 압통(++). 좌측 하지 방사통(+). 근력 정상. 감각 이상 없음.',
'요추 추간판 장애 (L5-S1). 만성화된 상태로 보존적 치료 우선.',
'도수치료 주 2회. 코어 안정화 운동. 증상 악화 시 영상검사 권유.'),

(7,
'무릎 앞쪽 불편감. 계단 내려갈 때 불안정한 느낌. 2년 전 ACL 재건술.',
'슬관절 ROM 정상. 전방전위검사 음성. 대퇴사두근 위축 관찰.',
'ACL 재건술 후 상태. 대퇴사두근 근력 저하로 인한 불안정감.',
'대퇴사두근 강화 운동. 고유수용감각 훈련. 주 2회 운동치료.'),

(27,
'왼쪽 어깨 통증. 머리 빗기, 브래지어 채우기 어려움. 3개월 전 시작.',
'좌측 견관절 ROM 심한 제한 (외전 90도, 외회전 20도). 야간통 있음.',
'좌측 유착성 관절낭염 (동결견, frozen shoulder). 동결기로 추정.',
'관절가동술 + 스트레칭. 주 2~3회 치료 권장. 가정 운동 프로그램 제공.'),

(41,
'등이 휘어있다고 학교 검진에서 지적받음. 통증은 없음.',
'흉추 우측 만곡 15도 (Adam test 양성). 체간 회전 비대칭.',
'청소년기 특발성 측만증. 경도. 진행 여부 모니터링 필요.',
'슈로스 운동치료 주 1회. 가정 운동 교육. 6개월 후 재평가.'),

(57,
'목 뒤쪽과 어깨 통증. 두통 동반. 하루 10시간 이상 컴퓨터 작업.',
'경추 전만 소실. 상부승모근 긴장(+++). 흉추 후만 증가.',
'경추통 + 긴장성 두통. VDT 증후군으로 인한 자세 불균형.',
'경추 도수치료. 자세 교정 운동. 업무 환경 개선 상담.');</code></pre>

            <h3>✅ 체크포인트</h3>

            <pre><code>-- SOAP 노트 확인
SELECT
s.note_id,
p.name as 환자명,
ts.session_date as 치료일,
LEFT(s.subjective, 30) as 'S (요약)'
FROM soap_notes s
JOIN treatment_sessions ts ON s.session_id = ts.session_id
JOIN patients p ON ts.patient_id = p.patient_id;</code></pre>

            <hr>

            <h2>전체 데이터 확인</h2>

            <p>모든 데이터 입력이 완료되었습니다! 전체 현황을 확인해볼까요?</p>

            <pre><code>-- 전체 테이블 데이터 개수
SELECT 'insurances' as 테이블, COUNT(*) as 개수 FROM insurances
UNION ALL SELECT 'fee_items', COUNT(*) FROM fee_items
UNION ALL SELECT 'diagnosis_codes', COUNT(*) FROM diagnosis_codes
UNION ALL SELECT 'therapists', COUNT(*) FROM therapists
UNION ALL SELECT 'patients', COUNT(*) FROM patients
UNION ALL SELECT 'patient_diagnoses', COUNT(*) FROM patient_diagnoses
UNION ALL SELECT 'treatment_sessions', COUNT(*) FROM treatment_sessions
UNION ALL SELECT 'billings', COUNT(*) FROM billings
UNION ALL SELECT 'soap_notes', COUNT(*) FROM soap_notes;</code></pre>

            <p>예상 결과:</p>
            <pre><code>+--------------------+------+
| 테이블              | 개수 |
+--------------------+------+
| insurances         |    5 |
| fee_items          |    8 |
| diagnosis_codes    |   20 |
| therapists         |    4 |
| patients           |   30 |
| patient_diagnoses  |   40 |
| treatment_sessions |   87 |
| billings           |   87 |
| soap_notes         |    6 |
+--------------------+------+</code></pre>

            <div class="tip"><strong>축하합니다!</strong><br>
            힐링손 물리치료센터의 데이터베이스에 3개월치 데이터가 모두 입력되었습니다! 이제 진짜 클리닉처럼 데이터가 있는 상태입니다.</div>

            <hr>

            <h2>이번 장 요약</h2>

            <p>이번 장에서 입력한 데이터:</p>

            <ul>
                <li><strong>환자 30명</strong> - 다양한 연령, 직업, 증상</li>
                <li><strong>진단 연결 40건</strong> - 환자별 진단 정보</li>
                <li><strong>치료 기록 87건</strong> - 1월~3월 치료 세션</li>
                <li><strong>청구/수납 87건</strong> - 매출 및 미수금 정보</li>
                <li><strong>SOAP 노트 6건</strong> - 대표 케이스 샘플</li>
            </ul>

            <p>다음 장에서는 입력한 데이터가 제대로 들어갔는지 검증하고, 데이터 품질을 체크합니다. 잘못된 데이터가 있으면 지금 찾아서 수정해야 나중에 고생하지 않아요!</p>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn">← 이전</button>
                <span class="page-num" id="pageNum"></span>
                <button class="nav-btn" id="nextBtn">다음 →</button>
            </div>
        </main>
    </div>

    <script src="../js/nav.js"></script>
</body>
</html>
