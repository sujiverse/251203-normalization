<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>15장: 완성 & 활용 - 물리치료사를 위한 데이터베이스 3권</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    @@include('components/top-nav.html', {"root": "../..", "activeBook": "3"})

    @@include('components/mobile-menu.html')
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">×</button>
            <div class="sidebar-header">
                <h1>📙 물리치료사를 위한</h1>
                <p>실전 구축 & 대시보드 (3권)</p>
            </div>
            <ul class="nav-list" id="navList"></ul>
        </nav>
        <main class="main">
<h1 class="title">완성 & 활용</h1>

<h2>축하합니다!</h2>

<p>드디어 힐링손 물리치료센터의 데이터베이스와 대시보드가 완성되었습니다. 0권부터 14권까지 긴 여정이었지만, 이제 김지훈 원장은 완전히 다른 방식으로 클리닉을 운영할 수 있게 되었습니다.</p>

<p>이번 마지막 장에서는 지금까지 만든 것을 정리하고, 실제로 어떻게 활용하면 좋을지, 그리고 앞으로 어떻게 발전시킬 수 있을지 다룹니다.</p>

<hr>

<h2>1. 완성된 시스템 정리</h2>

<h3>데이터베이스 구조</h3>

<table>
<tr><th>테이블</th><th>역할</th><th>데이터 수</th></tr>
<tr><td>patients</td><td>환자 정보</td><td>30명</td></tr>
<tr><td>therapists</td><td>치료사 정보</td><td>4명</td></tr>
<tr><td>treatment_sessions</td><td>치료 기록</td><td>87건</td></tr>
<tr><td>billings</td><td>청구/수납</td><td>87건</td></tr>
<tr><td>patient_diagnoses</td><td>환자별 진단</td><td>40건</td></tr>
<tr><td>soap_notes</td><td>SOAP 기록</td><td>6건</td></tr>
<tr><td>diagnosis_codes</td><td>진단 코드</td><td>20개</td></tr>
<tr><td>fee_items</td><td>수가 항목</td><td>8개</td></tr>
<tr><td>insurances</td><td>보험사</td><td>5개</td></tr>
</table>

<h3>대시보드 3종</h3>

<table>
<tr><th>대시보드</th><th>목적</th><th>주요 내용</th></tr>
<tr><td>📊 매출 대시보드</td><td>재무 현황 파악</td><td>일/주/월 매출, 추이, 미수금</td></tr>
<tr><td>📋 운영 대시보드</td><td>일상 운영 지원</td><td>예약 현황, 해피콜, 이탈 위험</td></tr>
<tr><td>👨‍⚕️ 치료사 실적</td><td>인력 관리</td><td>실적 비교, 인센티브 계산</td></tr>
</table>

<hr>

<h2>2. Before & After</h2>

<p>엑셀 시절과 지금을 비교해봅시다.</p>

<h3>매출 확인</h3>

<table>
<tr><th>항목</th><th>Before (엑셀)</th><th>After (DB+대시보드)</th></tr>
<tr><td>오늘 매출 확인</td><td>파일 열고 필터링 5분</td><td>대시보드 클릭 1초</td></tr>
<tr><td>월말 정산</td><td>반나절 (4~5시간)</td><td>실시간 자동 계산</td></tr>
<tr><td>치료사별 실적</td><td>수작업 집계 2시간</td><td>대시보드에서 바로 확인</td></tr>
</table>

<h3>환자 관리</h3>

<table>
<tr><th>항목</th><th>Before (엑셀)</th><th>After (DB+대시보드)</th></tr>
<tr><td>환자 검색</td><td>Ctrl+F, 여러 파일 뒤적</td><td>검색 쿼리 1초</td></tr>
<tr><td>해피콜 대상 찾기</td><td>일일이 날짜 계산</td><td>자동 목록 생성</td></tr>
<tr><td>이탈 환자 파악</td><td>불가능 (모름)</td><td>실시간 모니터링</td></tr>
</table>

<h3>데이터 품질</h3>

<table>
<tr><th>항목</th><th>Before (엑셀)</th><th>After (DB+대시보드)</th></tr>
<tr><td>중복 입력</td><td>자주 발생</td><td>제약조건으로 방지</td></tr>
<tr><td>오타/잘못된 값</td><td>발견 어려움</td><td>CHECK 제약으로 검증</td></tr>
<tr><td>관계 무결성</td><td>보장 불가</td><td>외래키로 자동 보장</td></tr>
</table>

<hr>

<h2>3. 일일 업무 루틴</h2>

<p>완성된 시스템으로 하루를 어떻게 운영하면 좋을까요?</p>

<h3>아침 (08:30)</h3>

<ol>
<li><strong>운영 대시보드</strong> 열기</li>
<li>오늘 예약 현황 확인</li>
<li>신규 환자 있는지 체크 (첫 방문 준비)</li>
<li>치료사별 스케줄 배분 확인</li>
</ol>

<h3>점심 (12:00~13:00)</h3>

<ol>
<li><strong>매출 대시보드</strong>에서 오전 매출 확인</li>
<li><strong>운영 대시보드</strong>에서 해피콜 대상자 확인</li>
<li>7일 미방문 환자에게 연락</li>
</ol>

<h3>저녁 (19:00)</h3>

<ol>
<li><strong>매출 대시보드</strong>에서 오늘 최종 매출 확인</li>
<li>미수금 발생했는지 체크</li>
<li>내일 예약 미리 확인 (운영 대시보드에서 날짜 필터 변경)</li>
</ol>

<h3>월말</h3>

<ol>
<li><strong>치료사 실적 대시보드</strong>에서 월간 실적 확인</li>
<li>인센티브 계산표로 정산</li>
<li>전월 대비 분석</li>
<li>다음 달 목표 설정</li>
</ol>

<hr>

<h2>4. 확장 아이디어</h2>

<p>기본 시스템이 완성되었으니, 앞으로 이렇게 확장할 수 있습니다.</p>

<h3>4-1. 예약 시스템 연동</h3>

<p>현재는 치료 기록만 있지만, 예약 테이블을 추가하면:</p>

<pre><code>CREATE TABLE appointments (
appointment_id INT AUTO_INCREMENT PRIMARY KEY,
patient_id VARCHAR(10),
therapist_id VARCHAR(10),
appointment_date DATE,
appointment_time TIME,
status ENUM('예약', '확정', '취소', '완료'),
created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
FOREIGN KEY (patient_id) REFERENCES patients(patient_id),
FOREIGN KEY (therapist_id) REFERENCES therapists(therapist_id)
);</code></pre>

<p>이렇게 하면 예약 → 치료 → 청구의 전체 흐름을 추적할 수 있습니다.</p>

<h3>4-2. 재방문율 분석</h3>

<pre><code>-- 환자별 재방문율 계산
SELECT
p.name,
COUNT(DISTINCT DATE_FORMAT(ts.session_date, '%Y-%m')) as 방문월수,
MIN(ts.session_date) as 첫방문,
MAX(ts.session_date) as 최근방문,
DATEDIFF(MAX(ts.session_date), MIN(ts.session_date)) as 유지기간일
FROM patients p
JOIN treatment_sessions ts ON p.patient_id = ts.patient_id
WHERE ts.session_status = '완료'
GROUP BY p.patient_id, p.name
ORDER BY 유지기간일 DESC;</code></pre>

<h3>4-3. 진단별 평균 치료 기간</h3>

<pre><code>-- 진단별 평균 치료 횟수
SELECT
d.diagnosis_name,
COUNT(*) as 총치료건수,
COUNT(DISTINCT ts.patient_id) as 환자수,
ROUND(COUNT(*) / COUNT(DISTINCT ts.patient_id), 1) as 환자당평균치료횟수
FROM treatment_sessions ts
JOIN patient_diagnoses pd ON ts.patient_id = pd.patient_id
JOIN diagnosis_codes d ON pd.diagnosis_code = d.diagnosis_code
WHERE pd.is_primary = 'Y'
AND ts.session_status = '완료'
GROUP BY d.diagnosis_code, d.diagnosis_name
ORDER BY 환자당평균치료횟수 DESC;</code></pre>

<h3>4-4. 시즌별 분석</h3>

<pre><code>-- 월별/계절별 패턴 분석
SELECT
MONTH(session_date) as 월,
COUNT(*) as 치료건수,
COUNT(DISTINCT patient_id) as 환자수
FROM treatment_sessions
WHERE session_status = '완료'
GROUP BY MONTH(session_date)
ORDER BY 월;</code></pre>

<p>어떤 달에 환자가 많은지, 어떤 계절에 특정 질환이 늘어나는지 파악할 수 있습니다.</p>

<h3>4-5. 알림 시스템</h3>

<p>Metabase의 알림 기능을 활용하면:</p>

<ul>
<li>매일 아침 오늘 예약 목록 이메일 발송</li>
<li>미수금이 일정 금액 넘으면 알림</li>
<li>30일 미방문 환자 발생 시 알림</li>
</ul>

<hr>

<h2>5. 유지보수 체크리스트</h2>

<p>시스템이 잘 돌아가려면 정기적인 관리가 필요합니다.</p>

<h3>매일</h3>

<table>
<tr><th>작업</th><th>담당</th><th>체크</th></tr>
<tr><td>백업 실행 확인</td><td>자동</td><td>☐</td></tr>
<tr><td>대시보드 정상 작동 확인</td><td>담당자</td><td>☐</td></tr>
</table>

<h3>매주</h3>

<table>
<tr><th>작업</th><th>담당</th><th>체크</th></tr>
<tr><td>백업 파일 확인</td><td>담당자</td><td>☐</td></tr>
<tr><td>디스크 공간 확인</td><td>담당자</td><td>☐</td></tr>
<tr><td>데이터 무결성 체크</td><td>담당자</td><td>☐</td></tr>
</table>

<h3>매월</h3>

<table>
<tr><th>작업</th><th>담당</th><th>체크</th></tr>
<tr><td>테이블 최적화 (OPTIMIZE)</td><td>담당자</td><td>☐</td></tr>
<tr><td>느린 쿼리 점검</td><td>담당자</td><td>☐</td></tr>
<tr><td>Metabase 업데이트 확인</td><td>담당자</td><td>☐</td></tr>
</table>

<h3>분기별</h3>

<table>
<tr><th>작업</th><th>담당</th><th>체크</th></tr>
<tr><td>백업 복원 테스트</td><td>담당자</td><td>☐</td></tr>
<tr><td>전체 데이터 검증</td><td>담당자</td><td>☐</td></tr>
<tr><td>대시보드 개선 검토</td><td>전체</td><td>☐</td></tr>
</table>

<hr>

<h2>6. 문제 해결 가이드</h2>

<h3>문제: Metabase가 안 열려요</h3>

<pre><code># Docker 상태 확인
docker ps

# 실행 중이 아니면 시작
docker start metabase

# 1~2분 후 http://localhost:3000 접속</code></pre>

<h3>문제: 데이터가 안 보여요</h3>

<ol>
<li>MySQL 서버가 실행 중인지 확인</li>
<li>Metabase의 데이터베이스 연결 상태 확인</li>
<li>데이터베이스 동기화 (관리자 → 데이터베이스 → 동기화)</li>
</ol>

<h3>문제: 쿼리가 느려요</h3>

<pre><code>-- EXPLAIN으로 분석
EXPLAIN SELECT ...;

-- 필요한 인덱스 추가
CREATE INDEX idx_name ON table(column);</code></pre>

<h3>문제: 대시보드 숫자가 이상해요</h3>

<ol>
<li>데이터 검증 쿼리 실행 (7권 참고)</li>
<li>잘못된 데이터 수정</li>
<li>대시보드 새로고침</li>
</ol>

<hr>

<h2>7. 다음 단계</h2>

<p>이 책에서 배운 것은 시작일 뿐입니다. 더 발전하고 싶다면:</p>

<h3>4권: 자동화 & AI 활용 (예정)</h3>

<ul>
<li>Python으로 데이터 자동 처리</li>
<li>정기 리포트 자동 생성</li>
<li>AI를 활용한 환자 이탈 예측</li>
<li>챗봇으로 데이터 조회</li>
</ul>

<h3>추가 학습 추천</h3>

<ul>
<li><strong>SQL 심화</strong>: 윈도우 함수, CTE, 서브쿼리 최적화</li>
<li><strong>데이터 분석</strong>: 통계 기초, 시각화 원칙</li>
<li><strong>Metabase 고급</strong>: 커스텀 표현식, 임베딩</li>
</ul>

<hr>

<h2>8. 마무리</h2>

<p>김지훈 원장의 고민을 기억하시나요?</p>

<blockquote>
"환자가 30명으로 늘었는데, 엑셀로는 도저히 관리가 안 돼요. 매출 정산에만 반나절이 걸리고, 해피콜 대상자 찾는 것도 일이에요..."
</blockquote>

<p>이제 김지훈 원장은:</p>

<ul>
<li>✅ 클릭 한 번으로 실시간 매출 확인</li>
<li>✅ 자동으로 생성되는 해피콜 대상자 목록</li>
<li>✅ 공정한 데이터 기반 인센티브 계산</li>
<li>✅ 이탈 위험 환자 조기 발견</li>
<li>✅ 신뢰할 수 있는 데이터 품질</li>
</ul>

<p>무엇보다 중요한 것은, <strong>데이터를 다루는 방법을 배웠다</strong>는 것입니다. 이 지식은 힐링손뿐 아니라 어떤 클리닉에서도, 어떤 사업에서도 활용할 수 있습니다.</p>

<hr>

<h2>감사합니다!</h2>

<p>긴 여정을 함께해주셔서 감사합니다.</p>

<p>이 책이 여러분의 클리닉 운영에 도움이 되길 바랍니다. 데이터는 단순한 숫자가 아니라, 더 나은 의사결정을 위한 도구입니다. 그 도구를 잘 활용하시길 바랍니다.</p>

<p>질문이나 피드백이 있으시면 언제든 연락주세요. 함께 성장해요!</p>

<div class="tip"><strong>완주를 축하합니다!</strong><br>
<ul>
<li>데이터베이스 설계부터 대시보드까지</li>
<li>SQL 기초부터 실전 활용까지</li>
<li>이론부터 실습까지</li>
</ul>
모든 과정을 완료하셨습니다. 이제 여러분은 물리치료사이자 데이터 전문가입니다!</div>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn">← 이전</button>
                <span class="page-num" id="pageNum"></span>
                <button class="nav-btn" id="nextBtn">다음 →</button>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>
