<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[14ì¥] ì§ˆì /í˜¼í•© ì—°êµ¬ - ì—°êµ¬ ë°ì´í„° ì„¤ê³„</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav class="top-nav">
        <a href="../../index.html" class="top-nav-brand"><span>ğŸ“Š</span> ì—°êµ¬ ë°ì´í„° ì„¤ê³„</a>
        <div class="top-nav-links">
            <a href="../../book-1/index.html" class="top-nav-link book-1">1ê¶Œ</a>
            <a href="../../book-2/index.html" class="top-nav-link book-2">2ê¶Œ</a>
            <a href="../../book-3/index.html" class="top-nav-link book-3">3ê¶Œ</a>
            <a href="../../book-4/index.html" class="top-nav-link book-4">4ê¶Œ</a>
            <a href="../../book-5/index.html" class="top-nav-link book-5">5ê¶Œ</a>
            <a href="../../book-6/index.html" class="top-nav-link book-6 active">6ê¶Œ</a>
        </div>
    </nav>
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">Ã—</button>
            <div class="sidebar-header"><h1>ğŸ“˜ 6ê¶Œ: ì—°êµ¬ ë°ì´í„° ì„¤ê³„</h1><p>ë³€ìˆ˜ë¶€í„° íšŒê·€ë¶„ì„ê¹Œì§€</p></div>
            <ul class="nav-list" id="navList"></ul>
        </nav>
        <main class="main">
            <div class="part-header">3ë¶€: ì—°êµ¬ í˜•íƒœë³„ DB ì„¤ê³„</div>
            <h1 class="title">[14ì¥] ì§ˆì /í˜¼í•© ì—°êµ¬ (Qualitative/Mixed)</h1>

            <div class="intro-box">
                <p>ì´ ì¥ì—ì„œëŠ” <strong>ì§ˆì  ì—°êµ¬ ë°ì´í„°</strong>ì˜ ì €ì¥ê³¼ <strong>í˜¼í•© ì—°êµ¬</strong>ì—ì„œì˜ í†µí•© ì „ëµì„ ë°°ì›ë‹ˆë‹¤.</p>
            </div>

            <hr>

            <h2>1. ì§ˆì  ì—°êµ¬ ë°ì´í„°ì˜ íŠ¹ì„±</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì§ˆì  ë°ì´í„°ë€</h3>
                <p>ìˆ«ìê°€ ì•„ë‹Œ <strong>ì–¸ì–´, ì´ë¯¸ì§€, í–‰ë™</strong> ë“±ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” ë°ì´í„°ì…ë‹ˆë‹¤.</p>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>ìœ í˜•</th>
                            <th>ì˜ˆì‹œ</th>
                            <th>ìˆ˜ì§‘ ë°©ë²•</th>
                        </tr>
                        <tr>
                            <td><strong>í…ìŠ¤íŠ¸</strong></td>
                            <td>ì¸í„°ë·° ì „ì‚¬ë³¸, ì¼ì§€, ê°œë°©í˜• ì‘ë‹µ</td>
                            <td>ì‹¬ì¸µ ë©´ë‹´, ì„¤ë¬¸</td>
                        </tr>
                        <tr>
                            <td><strong>ì´ë¯¸ì§€</strong></td>
                            <td>ë™ì‘ ì‚¬ì§„, ìì„¸ ë¶„ì„ ìº¡ì²˜</td>
                            <td>ì‚¬ì§„ ì´¬ì˜, ìŠ¤í¬ë¦°ìƒ·</td>
                        </tr>
                        <tr>
                            <td><strong>ì˜ìƒ</strong></td>
                            <td>ì¹˜ë£Œ ì„¸ì…˜ ë…¹í™”, ë³´í–‰ ë¶„ì„ ì˜ìƒ</td>
                            <td>ë¹„ë””ì˜¤ ë…¹í™”</td>
                        </tr>
                        <tr>
                            <td><strong>ìŒì„±</strong></td>
                            <td>ì¸í„°ë·° ë…¹ìŒ íŒŒì¼</td>
                            <td>ìŒì„± ë…¹ìŒ</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ì§ˆì  ë°ì´í„°ì˜ íŠ¹ì§•</h3>
                <ul>
                    <li><strong>ë¹„êµ¬ì¡°í™”</strong>: ë¯¸ë¦¬ ì •í•´ì§„ í˜•ì‹ì´ ì—†ìŒ</li>
                    <li><strong>ë§¥ë½ ì˜ì¡´</strong>: ëˆ„ê°€, ì–¸ì œ, ì–´ë–¤ ìƒí™©ì—ì„œ ë§í–ˆëŠ”ì§€ê°€ ì¤‘ìš”</li>
                    <li><strong>í•´ì„ í•„ìš”</strong>: ì—°êµ¬ìì˜ ë¶„ì„ê³¼ í•´ì„ì´ í•„ìˆ˜</li>
                    <li><strong>ìš©ëŸ‰ í¼</strong>: í…ìŠ¤íŠ¸, ì˜ìƒ íŒŒì¼ì€ ìš©ëŸ‰ì´ í´ ìˆ˜ ìˆìŒ</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ì–‘ì  vs ì§ˆì  ì—°êµ¬ ë¹„êµ</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>í•­ëª©</th>
                            <th>ì–‘ì  ì—°êµ¬</th>
                            <th>ì§ˆì  ì—°êµ¬</th>
                        </tr>
                        <tr>
                            <td>ë°ì´í„° í˜•íƒœ</td>
                            <td>ìˆ«ì</td>
                            <td>í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, ì˜ìƒ</td>
                        </tr>
                        <tr>
                            <td>ë¶„ì„ ë°©ë²•</td>
                            <td>í†µê³„ ê²€ì •</td>
                            <td>ì£¼ì œ ë¶„ì„, ê·¼ê±°ì´ë¡  ë“±</td>
                        </tr>
                        <tr>
                            <td>í‘œë³¸ í¬ê¸°</td>
                            <td>ëŒ€ê·œëª¨ (ê²€ì •ë ¥ í™•ë³´)</td>
                            <td>ì†Œê·œëª¨ (í¬í™”ê¹Œì§€)</td>
                        </tr>
                        <tr>
                            <td>ì¼ë°˜í™”</td>
                            <td>ëª¨ì§‘ë‹¨ìœ¼ë¡œ ì¼ë°˜í™”</td>
                            <td>ì´ë¡ ì  ì „ì´ ê°€ëŠ¥ì„±</td>
                        </tr>
                        <tr>
                            <td>ì €ì¥ êµ¬ì¡°</td>
                            <td>ì •í˜• í…Œì´ë¸”</td>
                            <td>í…ìŠ¤íŠ¸ + ë©”íƒ€ë°ì´í„°</td>
                        </tr>
                    </table>
                </div>
            </div>

            <hr>

            <h2>2. ì¸í„°ë·° ì „ì‚¬ ì €ì¥</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì „ì‚¬ë³¸(Transcript)ì´ë€</h3>
                <p>ë…¹ìŒëœ ì¸í„°ë·°ë¥¼ <strong>í…ìŠ¤íŠ¸ë¡œ ë³€í™˜</strong>í•œ ë¬¸ì„œì…ë‹ˆë‹¤. ì§ˆì  ë¶„ì„ì˜ ê¸°ë³¸ ìë£Œê°€ ë©ë‹ˆë‹¤.</p>
                <p><strong>ì „ì‚¬ì˜ ìˆ˜ì¤€:</strong></p>
                <ul>
                    <li><strong>ì¶•ì–´ì  ì „ì‚¬</strong>: ëª¨ë“  ë§ì„ ê·¸ëŒ€ë¡œ ê¸°ë¡ ("ìŒ...", "ê·¸ëŸ¬ë‹ˆê¹Œ..." í¬í•¨)</li>
                    <li><strong>ê¹”ë”í•œ ì „ì‚¬</strong>: êµ°ë”ë”ê¸° ì œê±°, ì˜ë¯¸ë§Œ ë³´ì¡´</li>
                    <li><strong>ìš”ì•½ ì „ì‚¬</strong>: í•µì‹¬ ë‚´ìš©ë§Œ ìš”ì•½</li>
                </ul>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì¸í„°ë·° ë°ì´í„° ìŠ¤í‚¤ë§ˆ</h3>
                <pre><code>-- ì¸í„°ë·° ì„¸ì…˜ ì •ë³´
CREATE TABLE interviews (
    interview_id INTEGER PRIMARY KEY,
    participant_id INTEGER NOT NULL,
    interviewer_id INTEGER,
    interview_date DATE NOT NULL,
    interview_location TEXT,
    duration_minutes INTEGER,
    audio_file_path TEXT,
    transcript_status TEXT DEFAULT 'pending',  -- pending, in_progress, completed
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id)
);

-- ì „ì‚¬ë³¸ ì €ì¥
CREATE TABLE transcripts (
    transcript_id INTEGER PRIMARY KEY,
    interview_id INTEGER NOT NULL,
    full_text TEXT NOT NULL,           -- ì „ì²´ ì „ì‚¬ í…ìŠ¤íŠ¸
    transcriber_id INTEGER,
    transcription_date DATE,
    transcription_method TEXT,          -- manual, automated, hybrid
    FOREIGN KEY (interview_id) REFERENCES interviews(interview_id)
);</code></pre>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ëŒ€í™” í„´(Turn) ë‹¨ìœ„ ì €ì¥</h3>
                <p>ë¶„ì„ì„ ìœ„í•´ ì „ì‚¬ë³¸ì„ <strong>ë°œí™” ë‹¨ìœ„</strong>ë¡œ ë¶„ë¦¬í•˜ë©´ ìœ ìš©í•©ë‹ˆë‹¤:</p>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>turn_id</th>
                            <th>speaker</th>
                            <th>timestamp</th>
                            <th>content</th>
                        </tr>
                        <tr><td>1</td><td>ë©´ë‹´ì</td><td>00:00:15</td><td>ì¹˜ë£Œë¥¼ ì‹œì‘í•˜ê²Œ ëœ ê³„ê¸°ê°€ ë¬´ì—‡ì¸ê°€ìš”?</td></tr>
                        <tr><td>2</td><td>ì°¸ê°€ì</td><td>00:00:22</td><td>í—ˆë¦¬ê°€ ë„ˆë¬´ ì•„íŒŒì„œìš”. ì¼ë„ ëª» í•  ì •ë„ì˜€ì–´ìš”.</td></tr>
                        <tr><td>3</td><td>ë©´ë‹´ì</td><td>00:00:35</td><td>êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ í™œë™ì´ ì–´ë ¤ìš°ì…¨ë‚˜ìš”?</td></tr>
                    </table>
                </div>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ëŒ€í™” í„´ í…Œì´ë¸”</h3>
                <pre><code>-- ë°œí™” ë‹¨ìœ„ ì €ì¥
CREATE TABLE transcript_turns (
    turn_id INTEGER PRIMARY KEY,
    transcript_id INTEGER NOT NULL,
    turn_order INTEGER NOT NULL,
    speaker_role TEXT NOT NULL,         -- interviewer, participant
    timestamp_start TEXT,               -- HH:MM:SS í˜•ì‹
    timestamp_end TEXT,
    content TEXT NOT NULL,
    FOREIGN KEY (transcript_id) REFERENCES transcripts(transcript_id)
);

-- íŠ¹ì • ì°¸ê°€ìì˜ ë°œí™”ë§Œ ì¡°íšŒ
SELECT
    tt.turn_order,
    tt.timestamp_start,
    tt.content
FROM transcript_turns tt
JOIN transcripts t ON tt.transcript_id = t.transcript_id
JOIN interviews i ON t.interview_id = i.interview_id
WHERE i.participant_id = 1
  AND tt.speaker_role = 'participant'
ORDER BY tt.turn_order;</code></pre>
            </div>

            <hr>

            <h2>3. ì½”ë”©ê³¼ ì½”ë“œ í…Œì´ë¸”</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì§ˆì  ì½”ë”©(Coding)ì´ë€</h3>
                <p>í…ìŠ¤íŠ¸ ë°ì´í„°ì— <strong>ì˜ë¯¸ ìˆëŠ” ë ˆì´ë¸”(ì½”ë“œ)</strong>ì„ ë¶€ì—¬í•˜ëŠ” ë¶„ì„ ê³¼ì •ì…ë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆì‹œ:</strong></p>
                <ul>
                    <li>"í—ˆë¦¬ê°€ ë„ˆë¬´ ì•„íŒŒì„œìš”" â†’ <code>í†µì¦ ê²½í—˜</code></li>
                    <li>"ì¼ë„ ëª» í•  ì •ë„ì˜€ì–´ìš”" â†’ <code>ì¼ìƒìƒí™œ ì œí•œ</code></li>
                    <li>"ì¹˜ë£Œ í›„ ë§ì´ ë‚˜ì•„ì¡Œì–´ìš”" â†’ <code>ì¹˜ë£Œ íš¨ê³¼ ì¸ì‹</code></li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ì½”ë”©ì˜ ìœ í˜•</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>ìœ í˜•</th>
                            <th>ì„¤ëª…</th>
                            <th>ì˜ˆì‹œ</th>
                        </tr>
                        <tr>
                            <td><strong>ê°œë°© ì½”ë”©</strong></td>
                            <td>ì²˜ìŒ ì½ìœ¼ë©´ì„œ ììœ ë¡­ê²Œ ì½”ë“œ ìƒì„±</td>
                            <td>í†µì¦, ì œí•œ, ê¸°ëŒ€, ë¶ˆì•ˆ...</td>
                        </tr>
                        <tr>
                            <td><strong>ì¶• ì½”ë”©</strong></td>
                            <td>ì½”ë“œ ê°„ ê´€ê³„ì™€ ë²”ì£¼ í˜•ì„±</td>
                            <td>í†µì¦â†’ì‹ ì²´ì  ê²½í—˜, ë¶ˆì•ˆâ†’ì‹¬ë¦¬ì  ê²½í—˜</td>
                        </tr>
                        <tr>
                            <td><strong>ì„ íƒ ì½”ë”©</strong></td>
                            <td>í•µì‹¬ ë²”ì£¼ ì¤‘ì‹¬ìœ¼ë¡œ í†µí•©</td>
                            <td>"í†µì¦ ê´€ë¦¬ ì—¬ì •"</td>
                        </tr>
                        <tr>
                            <td><strong>ì—°ì—­ì  ì½”ë”©</strong></td>
                            <td>ê¸°ì¡´ ì´ë¡ /í”„ë ˆì„ì›Œí¬ ê¸°ë°˜</td>
                            <td>ICF ë¶„ë¥˜ ì½”ë“œ ì ìš©</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì½”ë“œ í…Œì´ë¸” ì„¤ê³„</h3>
                <pre><code>-- ì½”ë“œ ì •ì˜
CREATE TABLE codes (
    code_id INTEGER PRIMARY KEY,
    code_name TEXT NOT NULL UNIQUE,
    code_description TEXT,
    parent_code_id INTEGER,             -- ê³„ì¸µ êµ¬ì¡°ë¥¼ ìœ„í•œ ìê¸°ì°¸ì¡°
    created_date DATE DEFAULT CURRENT_DATE,
    created_by INTEGER,
    FOREIGN KEY (parent_code_id) REFERENCES codes(code_id)
);

-- í…ìŠ¤íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ (ì½”ë”©ëœ í…ìŠ¤íŠ¸ ì¡°ê°)
CREATE TABLE segments (
    segment_id INTEGER PRIMARY KEY,
    transcript_id INTEGER NOT NULL,
    start_position INTEGER NOT NULL,    -- í…ìŠ¤íŠ¸ ì‹œì‘ ìœ„ì¹˜ (ë¬¸ì ì¸ë±ìŠ¤)
    end_position INTEGER NOT NULL,      -- í…ìŠ¤íŠ¸ ë ìœ„ì¹˜
    segment_text TEXT NOT NULL,         -- ì‹¤ì œ í…ìŠ¤íŠ¸ ë‚´ìš©
    turn_id INTEGER,                    -- ë°œí™” ë‹¨ìœ„ ì°¸ì¡° (ì„ íƒ)
    FOREIGN KEY (transcript_id) REFERENCES transcripts(transcript_id),
    FOREIGN KEY (turn_id) REFERENCES transcript_turns(turn_id)
);

-- ì„¸ê·¸ë¨¼íŠ¸-ì½”ë“œ ì—°ê²° (M:N ê´€ê³„)
CREATE TABLE segment_codes (
    segment_code_id INTEGER PRIMARY KEY,
    segment_id INTEGER NOT NULL,
    code_id INTEGER NOT NULL,
    coder_id INTEGER,                   -- ëˆ„ê°€ ì½”ë”©í–ˆëŠ”ì§€
    coding_date DATE DEFAULT CURRENT_DATE,
    memo TEXT,                          -- ì½”ë”© ë©”ëª¨
    FOREIGN KEY (segment_id) REFERENCES segments(segment_id),
    FOREIGN KEY (code_id) REFERENCES codes(code_id),
    UNIQUE(segment_id, code_id, coder_id)  -- ê°™ì€ ì½”ë”ê°€ ì¤‘ë³µ ì½”ë”© ë°©ì§€
);</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì½”ë“œë³„ ì„¸ê·¸ë¨¼íŠ¸ ì¡°íšŒ</h3>
                <pre><code>-- íŠ¹ì • ì½”ë“œê°€ ì ìš©ëœ ëª¨ë“  í…ìŠ¤íŠ¸ ì¡°ê° ì¡°íšŒ
SELECT
    c.code_name,
    s.segment_text,
    i.participant_id,
    sc.memo
FROM segment_codes sc
JOIN codes c ON sc.code_id = c.code_id
JOIN segments s ON sc.segment_id = s.segment_id
JOIN transcripts t ON s.transcript_id = t.transcript_id
JOIN interviews i ON t.interview_id = i.interview_id
WHERE c.code_name = 'í†µì¦ ê²½í—˜'
ORDER BY i.participant_id;</code></pre>
            </div>

            <hr>

            <h2>4. í…Œë§ˆ ê³„ì¸µ êµ¬ì¡°</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì½”ë“œì—ì„œ í…Œë§ˆë¡œ</h3>
                <p>ê°œë³„ ì½”ë“œë“¤ì„ ë¬¶ì–´ <strong>í…Œë§ˆ(Theme)</strong>ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤:</p>
                <pre>
ì½”ë“œ (Codes)           í•˜ìœ„í…Œë§ˆ (Sub-theme)      ìƒìœ„í…Œë§ˆ (Theme)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
í†µì¦ ê°•ë„            â”€â”¬â”€ ì‹ ì²´ì  ê²½í—˜           â”€â”¬â”€ ì¹˜ë£Œ ì „ ìƒíƒœ
í†µì¦ ë¶€ìœ„            â”€â”˜                         â”‚
ì¼ìƒìƒí™œ ì œí•œ        â”€â”¬â”€ ê¸°ëŠ¥ì  ì œí•œ           â”€â”˜
ì§ì¥ ìƒí™œ ì–´ë ¤ì›€     â”€â”˜

ì¹˜ë£Œ íš¨ê³¼ ì¸ì‹       â”€â”¬â”€ ê¸ì •ì  ë³€í™”           â”€â”¬â”€ ì¹˜ë£Œ ê²½í—˜
ìê¸°ê´€ë¦¬ ëŠ¥ë ¥        â”€â”˜                         â”‚
ë¶€ì‘ìš© ê²½í—˜          â”€â”€â”€ ë¶€ì •ì  ê²½í—˜           â”€â”˜
                </pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ê³„ì¸µ êµ¬ì¡° ì €ì¥ (parent_id ë°©ì‹)</h3>
                <pre><code>-- codes í…Œì´ë¸”ì˜ parent_code_idë¥¼ í™œìš©í•œ ê³„ì¸µ êµ¬ì¡°
INSERT INTO codes (code_id, code_name, parent_code_id) VALUES
-- ìƒìœ„í…Œë§ˆ (ë ˆë²¨ 1)
(1, 'ì¹˜ë£Œ ì „ ìƒíƒœ', NULL),
(2, 'ì¹˜ë£Œ ê²½í—˜', NULL),

-- í•˜ìœ„í…Œë§ˆ (ë ˆë²¨ 2)
(10, 'ì‹ ì²´ì  ê²½í—˜', 1),
(11, 'ê¸°ëŠ¥ì  ì œí•œ', 1),
(20, 'ê¸ì •ì  ë³€í™”', 2),
(21, 'ë¶€ì •ì  ê²½í—˜', 2),

-- ì½”ë“œ (ë ˆë²¨ 3)
(100, 'í†µì¦ ê°•ë„', 10),
(101, 'í†µì¦ ë¶€ìœ„', 10),
(110, 'ì¼ìƒìƒí™œ ì œí•œ', 11),
(111, 'ì§ì¥ ìƒí™œ ì–´ë ¤ì›€', 11),
(200, 'ì¹˜ë£Œ íš¨ê³¼ ì¸ì‹', 20),
(201, 'ìê¸°ê´€ë¦¬ ëŠ¥ë ¥', 20),
(210, 'ë¶€ì‘ìš© ê²½í—˜', 21);</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ê³„ì¸µ êµ¬ì¡° ì¡°íšŒ</h3>
                <pre><code>-- ì½”ë“œì™€ ìƒìœ„ í…Œë§ˆ í•¨ê»˜ ì¡°íšŒ
SELECT
    c.code_name AS code,
    p1.code_name AS sub_theme,
    p2.code_name AS theme
FROM codes c
LEFT JOIN codes p1 ON c.parent_code_id = p1.code_id
LEFT JOIN codes p2 ON p1.parent_code_id = p2.code_id
WHERE c.parent_code_id IS NOT NULL
  AND p1.parent_code_id IS NOT NULL;

-- ê²°ê³¼:
-- code               | sub_theme      | theme
-- í†µì¦ ê°•ë„          | ì‹ ì²´ì  ê²½í—˜     | ì¹˜ë£Œ ì „ ìƒíƒœ
-- í†µì¦ ë¶€ìœ„          | ì‹ ì²´ì  ê²½í—˜     | ì¹˜ë£Œ ì „ ìƒíƒœ
-- ì¼ìƒìƒí™œ ì œí•œ      | ê¸°ëŠ¥ì  ì œí•œ     | ì¹˜ë£Œ ì „ ìƒíƒœ
-- ì¹˜ë£Œ íš¨ê³¼ ì¸ì‹     | ê¸ì •ì  ë³€í™”     | ì¹˜ë£Œ ê²½í—˜</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· í…Œë§ˆë³„ ë¹ˆë„ ë¶„ì„</h3>
                <pre><code>-- ìƒìœ„ í…Œë§ˆë³„ ì½”ë”© ë¹ˆë„
WITH RECURSIVE code_hierarchy AS (
    -- ìµœìƒìœ„ í…Œë§ˆ
    SELECT code_id, code_name, code_id AS root_id, code_name AS theme_name
    FROM codes
    WHERE parent_code_id IS NULL

    UNION ALL

    -- í•˜ìœ„ ì½”ë“œë“¤
    SELECT c.code_id, c.code_name, ch.root_id, ch.theme_name
    FROM codes c
    JOIN code_hierarchy ch ON c.parent_code_id = ch.code_id
)
SELECT
    ch.theme_name,
    COUNT(sc.segment_code_id) AS code_count
FROM code_hierarchy ch
JOIN segment_codes sc ON ch.code_id = sc.code_id
GROUP BY ch.theme_name
ORDER BY code_count DESC;</code></pre>
            </div>

            <hr>

            <h2>5. ì–‘ì -ì§ˆì  í†µí•© ì „ëµ</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ í˜¼í•© ì—°êµ¬ ì„¤ê³„ ìœ í˜•</h3>
                <p>John Creswellì˜ ë¶„ë¥˜ì— ë”°ë¥¸ ì£¼ìš” í˜¼í•© ì—°êµ¬ ì„¤ê³„:</p>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>ì„¤ê³„</th>
                            <th>ìˆœì„œ</th>
                            <th>ëª©ì </th>
                        </tr>
                        <tr>
                            <td><strong>ì„¤ëª…ì  ìˆœì°¨ ì„¤ê³„</strong><br>(Explanatory Sequential)</td>
                            <td>QUAN â†’ qual</td>
                            <td>ì–‘ì  ê²°ê³¼ë¥¼ ì§ˆì ìœ¼ë¡œ ì„¤ëª…/í•´ì„</td>
                        </tr>
                        <tr>
                            <td><strong>íƒìƒ‰ì  ìˆœì°¨ ì„¤ê³„</strong><br>(Exploratory Sequential)</td>
                            <td>QUAL â†’ quan</td>
                            <td>ì§ˆì  íƒìƒ‰ìœ¼ë¡œ ë„êµ¬/ì´ë¡  ê°œë°œ í›„ ì–‘ì  ê²€ì¦</td>
                        </tr>
                        <tr>
                            <td><strong>ìˆ˜ë ´ì  ì„¤ê³„</strong><br>(Convergent)</td>
                            <td>QUAN + QUAL ë™ì‹œ</td>
                            <td>ê°™ì€ í˜„ìƒì„ ë‘ ë°©ë²•ìœ¼ë¡œ ë™ì‹œì— ì—°êµ¬</td>
                        </tr>
                    </table>
                </div>
                <p><em>ëŒ€ë¬¸ìëŠ” ìš°ì„ ìˆœìœ„ë¥¼ ë‚˜íƒ€ëƒ„ (QUAN = ì–‘ì  ì¤‘ì‹¬, QUAL = ì§ˆì  ì¤‘ì‹¬)</em></p>
            </div>

            <div class="example-box">
                <h3>ğŸ“‹ ì˜ˆì‹œ: ì„¤ëª…ì  ìˆœì°¨ ì„¤ê³„</h3>
                <p><strong>ì—°êµ¬ ì§ˆë¬¸:</strong> ë¬¼ë¦¬ì¹˜ë£Œ í›„ í†µì¦ ê°ì†Œì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì¸ì€ ë¬´ì—‡ì¸ê°€?</p>
                <ol>
                    <li><strong>1ë‹¨ê³„ (ì–‘ì )</strong>: 100ëª… í™˜ìì—ê²Œ ì„¤ë¬¸ ì¡°ì‚¬ â†’ í†µì¦ ê°ì†Œì™€ ê´€ë ¨ëœ ë³€ìˆ˜ ë¶„ì„</li>
                    <li><strong>2ë‹¨ê³„ (ì§ˆì )</strong>: í†µì¦ ê°ì†Œê°€ í° 10ëª…, ì ì€ 10ëª… ì„ íƒ â†’ ì‹¬ì¸µ ì¸í„°ë·°</li>
                    <li><strong>í†µí•©</strong>: ì–‘ì  ê²°ê³¼(ë³€ìˆ˜ ê´€ê³„)ë¥¼ ì§ˆì  ë°ì´í„°(ê²½í—˜, ë§¥ë½)ë¡œ ì„¤ëª…</li>
                </ol>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ í†µí•©ì˜ í•µì‹¬: ê³µí†µ ID</h3>
                <p>ì–‘ì  ë°ì´í„°ì™€ ì§ˆì  ë°ì´í„°ë¥¼ ì—°ê²°í•˜ëŠ” ì—´ì‡ ëŠ” <strong>participant_id</strong>ì…ë‹ˆë‹¤:</p>
                <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì–‘ì  ë°ì´í„°     â”‚         â”‚  ì§ˆì  ë°ì´í„°     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ participants    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ interviews      â”‚
â”‚ assessments     â”‚         â”‚ transcripts     â”‚
â”‚ survey_responsesâ”‚         â”‚ segments        â”‚
â”‚ measurements    â”‚         â”‚ segment_codes   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            participant_idë¡œ ì—°ê²°
                </pre>
            </div>

            <hr>

            <h2>6. í˜¼í•© ì—°êµ¬ DB ì„¤ê³„</h2>

            <div class="example-box">
                <h3>ğŸ“‹ ì˜ˆì‹œ: ë‚™ìƒ ì˜ˆë°© í”„ë¡œê·¸ë¨ í˜¼í•© ì—°êµ¬</h3>
                <p>ë…¸ì¸ ë‚™ìƒ ì˜ˆë°© í”„ë¡œê·¸ë¨ì˜ íš¨ê³¼ë¥¼ ì–‘ì /ì§ˆì ìœ¼ë¡œ í‰ê°€í•˜ëŠ” ì—°êµ¬ì…ë‹ˆë‹¤.</p>
                <ul>
                    <li><strong>ì–‘ì </strong>: ê· í˜• ê²€ì‚¬(BBS), ë‚™ìƒ ë‘ë ¤ì›€ ì²™ë„(FES-I), ë‚™ìƒ ë°œìƒ íšŸìˆ˜</li>
                    <li><strong>ì§ˆì </strong>: í”„ë¡œê·¸ë¨ ì°¸ì—¬ ê²½í—˜ ì‹¬ì¸µ ì¸í„°ë·°</li>
                </ul>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· í†µí•© ìŠ¤í‚¤ë§ˆ</h3>
                <pre><code>-- ========================================
-- í˜¼í•© ì—°êµ¬: ë‚™ìƒ ì˜ˆë°© í”„ë¡œê·¸ë¨ í‰ê°€
-- ========================================

-- 1. ê³µí†µ: ì°¸ê°€ì ì •ë³´
CREATE TABLE participants (
    participant_id INTEGER PRIMARY KEY,
    participant_code TEXT UNIQUE NOT NULL,
    age INTEGER,
    sex TEXT CHECK(sex IN ('M', 'F')),
    group_type TEXT CHECK(group_type IN ('intervention', 'control')),
    enrollment_date DATE,
    is_qualitative_sample INTEGER DEFAULT 0  -- ì§ˆì  ì—°êµ¬ ëŒ€ìƒì ì—¬ë¶€
);

-- ========================================
-- ì–‘ì  ë°ì´í„° í…Œì´ë¸”
-- ========================================

-- 2. í‰ê°€ ì‹œì 
CREATE TABLE assessment_waves (
    wave_id INTEGER PRIMARY KEY,
    wave_name TEXT NOT NULL,
    wave_order INTEGER NOT NULL
);

INSERT INTO assessment_waves VALUES
(1, 'baseline', 1),
(2, 'post_intervention', 2),
(3, 'follow_up_3m', 3);

-- 3. ê· í˜• ê²€ì‚¬ (BBS)
CREATE TABLE balance_assessments (
    assessment_id INTEGER PRIMARY KEY,
    participant_id INTEGER NOT NULL,
    wave_id INTEGER NOT NULL,
    assessment_date DATE,
    bbs_score INTEGER CHECK(bbs_score BETWEEN 0 AND 56),
    tug_seconds REAL,                    -- Timed Up and Go
    assessor_id INTEGER,
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id),
    FOREIGN KEY (wave_id) REFERENCES assessment_waves(wave_id)
);

-- 4. ì„¤ë¬¸ ì‘ë‹µ (FES-I ë“±)
CREATE TABLE survey_responses (
    response_id INTEGER PRIMARY KEY,
    participant_id INTEGER NOT NULL,
    wave_id INTEGER NOT NULL,
    survey_name TEXT NOT NULL,
    total_score REAL,
    response_date DATE,
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id),
    FOREIGN KEY (wave_id) REFERENCES assessment_waves(wave_id)
);

-- 5. ë‚™ìƒ ì‚¬ê±´ ê¸°ë¡
CREATE TABLE fall_events (
    event_id INTEGER PRIMARY KEY,
    participant_id INTEGER NOT NULL,
    fall_date DATE,
    fall_location TEXT,
    injury_occurred INTEGER DEFAULT 0,
    injury_description TEXT,
    reported_date DATE,
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id)
);

-- ========================================
-- ì§ˆì  ë°ì´í„° í…Œì´ë¸”
-- ========================================

-- 6. ì¸í„°ë·°
CREATE TABLE interviews (
    interview_id INTEGER PRIMARY KEY,
    participant_id INTEGER NOT NULL,
    interview_type TEXT DEFAULT 'individual',  -- individual, focus_group
    interview_date DATE,
    duration_minutes INTEGER,
    audio_file_path TEXT,
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id)
);

-- 7. ì „ì‚¬ë³¸
CREATE TABLE transcripts (
    transcript_id INTEGER PRIMARY KEY,
    interview_id INTEGER NOT NULL,
    full_text TEXT,
    word_count INTEGER,
    FOREIGN KEY (interview_id) REFERENCES interviews(interview_id)
);

-- 8. ì½”ë“œ
CREATE TABLE codes (
    code_id INTEGER PRIMARY KEY,
    code_name TEXT NOT NULL,
    code_description TEXT,
    parent_code_id INTEGER,
    code_type TEXT DEFAULT 'inductive',  -- inductive, deductive
    FOREIGN KEY (parent_code_id) REFERENCES codes(code_id)
);

-- 9. ì„¸ê·¸ë¨¼íŠ¸
CREATE TABLE segments (
    segment_id INTEGER PRIMARY KEY,
    transcript_id INTEGER NOT NULL,
    segment_text TEXT NOT NULL,
    start_char INTEGER,
    end_char INTEGER,
    FOREIGN KEY (transcript_id) REFERENCES transcripts(transcript_id)
);

-- 10. ì„¸ê·¸ë¨¼íŠ¸-ì½”ë“œ ì—°ê²°
CREATE TABLE segment_codes (
    id INTEGER PRIMARY KEY,
    segment_id INTEGER NOT NULL,
    code_id INTEGER NOT NULL,
    coder_id INTEGER,
    FOREIGN KEY (segment_id) REFERENCES segments(segment_id),
    FOREIGN KEY (code_id) REFERENCES codes(code_id)
);</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· í†µí•© ì¿¼ë¦¬: ì–‘ì -ì§ˆì  ê²°í•©</h3>
                <pre><code>-- ì–‘ì  ê²°ê³¼ì™€ ì§ˆì  í…Œë§ˆ ë¹ˆë„ë¥¼ í•¨ê»˜ ì¡°íšŒ
SELECT
    p.participant_code,
    p.group_type,
    -- ì–‘ì  ë°ì´í„°
    ba_pre.bbs_score AS bbs_baseline,
    ba_post.bbs_score AS bbs_post,
    ba_post.bbs_score - ba_pre.bbs_score AS bbs_change,
    sr.total_score AS fesi_post,
    -- ì§ˆì  ë°ì´í„°
    (SELECT COUNT(*) FROM segment_codes sc
     JOIN segments s ON sc.segment_id = s.segment_id
     JOIN transcripts t ON s.transcript_id = t.transcript_id
     JOIN interviews i ON t.interview_id = i.interview_id
     WHERE i.participant_id = p.participant_id) AS total_codes
FROM participants p
LEFT JOIN balance_assessments ba_pre
    ON p.participant_id = ba_pre.participant_id AND ba_pre.wave_id = 1
LEFT JOIN balance_assessments ba_post
    ON p.participant_id = ba_post.participant_id AND ba_post.wave_id = 2
LEFT JOIN survey_responses sr
    ON p.participant_id = sr.participant_id
    AND sr.wave_id = 2 AND sr.survey_name = 'FES-I'
WHERE p.is_qualitative_sample = 1
ORDER BY bbs_change DESC;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· íš¨ê³¼ ë†’ì€/ë‚®ì€ ê·¸ë£¹ë³„ í…Œë§ˆ ë¹„êµ</h3>
                <pre><code>-- ê· í˜• í–¥ìƒ ì •ë„ì— ë”°ë¥¸ ê·¸ë£¹ ë¶„ë¥˜ í›„ í…Œë§ˆ ë¹ˆë„ ë¹„êµ
WITH participant_improvement AS (
    SELECT
        p.participant_id,
        ba_post.bbs_score - ba_pre.bbs_score AS improvement,
        CASE
            WHEN ba_post.bbs_score - ba_pre.bbs_score >= 4 THEN 'high_improver'
            ELSE 'low_improver'
        END AS improvement_group
    FROM participants p
    JOIN balance_assessments ba_pre
        ON p.participant_id = ba_pre.participant_id AND ba_pre.wave_id = 1
    JOIN balance_assessments ba_post
        ON p.participant_id = ba_post.participant_id AND ba_post.wave_id = 2
    WHERE p.is_qualitative_sample = 1
)
SELECT
    pi.improvement_group,
    c.code_name,
    COUNT(sc.id) AS code_frequency
FROM participant_improvement pi
JOIN interviews i ON pi.participant_id = i.participant_id
JOIN transcripts t ON i.interview_id = t.interview_id
JOIN segments s ON t.transcript_id = s.transcript_id
JOIN segment_codes sc ON s.segment_id = sc.segment_id
JOIN codes c ON sc.code_id = c.code_id
WHERE c.parent_code_id IS NOT NULL  -- ìµœí•˜ìœ„ ì½”ë“œë§Œ
GROUP BY pi.improvement_group, c.code_name
ORDER BY pi.improvement_group, code_frequency DESC;</code></pre>
            </div>

            <div class="warning-box">
                <h3>âš ï¸ í˜¼í•© ì—°êµ¬ DB ì„¤ê³„ ì‹œ ì£¼ì˜ì‚¬í•­</h3>
                <ul>
                    <li><strong>participant_id ì¼ê´€ì„±</strong>: ì–‘ì /ì§ˆì  ëª¨ë‘ ë™ì¼í•œ ID ì²´ê³„ ì‚¬ìš©</li>
                    <li><strong>ìµëª…í™” ìˆ˜ì¤€ í†µì¼</strong>: ì§ˆì  ë°ì´í„°ì—ì„œ ì´ë¦„ì´ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì£¼ì˜</li>
                    <li><strong>íŒŒì¼ ì°¸ì¡°</strong>: ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ëŠ” ê²½ë¡œë§Œ ì €ì¥, ì‹¤ì œ íŒŒì¼ì€ ë³„ë„ ê´€ë¦¬</li>
                    <li><strong>ì½”ë”© ì‹ ë¢°ë„</strong>: ë³µìˆ˜ ì½”ë” ì‚¬ìš© ì‹œ coder_idë¡œ ëˆ„ê°€ ì½”ë”©í–ˆëŠ”ì§€ ì¶”ì </li>
                </ul>
            </div>

            <div class="summary-box">
                <h3>ğŸ“ ì´ ì¥ì˜ í•µì‹¬ ì •ë¦¬</h3>
                <ol>
                    <li><strong>ì§ˆì  ë°ì´í„°</strong>: í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, ì˜ìƒ ë“± ë¹„êµ¬ì¡°í™”ëœ ë°ì´í„°, ë§¥ë½ì´ ì¤‘ìš”</li>
                    <li><strong>ì „ì‚¬ë³¸ ì €ì¥</strong>: ì „ì²´ í…ìŠ¤íŠ¸ + ë°œí™” ë‹¨ìœ„(turn) ë¶„ë¦¬ë¡œ ìœ ì—°í•œ ë¶„ì„</li>
                    <li><strong>ì½”ë”© êµ¬ì¡°</strong>: codes í…Œì´ë¸” + segments í…Œì´ë¸” + segment_codesë¡œ M:N ì—°ê²°</li>
                    <li><strong>í…Œë§ˆ ê³„ì¸µ</strong>: parent_code_idë¡œ ì½”ë“œâ†’í•˜ìœ„í…Œë§ˆâ†’ìƒìœ„í…Œë§ˆ êµ¬ì¡°í™”</li>
                    <li><strong>í˜¼í•© ì„¤ê³„</strong>: ìˆœì°¨ì (QUANâ†’qual, QUALâ†’quan) ë˜ëŠ” ìˆ˜ë ´ì (ë™ì‹œ) ì ‘ê·¼</li>
                    <li><strong>í†µí•© í•µì‹¬</strong>: participant_idë¡œ ì–‘ì /ì§ˆì  ë°ì´í„° ì—°ê²°, í†µí•© ì¿¼ë¦¬ ê°€ëŠ¥</li>
                </ol>
            </div>

            <div class="nav-buttons">
                <a href="chapter-13.html" class="nav-btn">â† ì´ì „</a>
                <span class="page-num">14 / 20</span>
                <a href="chapter-15.html" class="nav-btn">ë‹¤ìŒ â†’</a>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>