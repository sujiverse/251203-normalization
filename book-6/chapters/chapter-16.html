<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[16ì¥] ì§‘ë‹¨ ë¹„êµ ë¶„ì„ - ì—°êµ¬ ë°ì´í„° ì„¤ê³„</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav class="top-nav">
        <a href="../../index.html" class="top-nav-brand"><span>ğŸ“Š</span> ì—°êµ¬ ë°ì´í„° ì„¤ê³„</a>
        <div class="top-nav-links">
            <a href="../../book-1/index.html" class="top-nav-link book-1">1ê¶Œ</a>
            <a href="../../book-2/index.html" class="top-nav-link book-2">2ê¶Œ</a>
            <a href="../../book-3/index.html" class="top-nav-link book-3">3ê¶Œ</a>
            <a href="../../book-4/index.html" class="top-nav-link book-4">4ê¶Œ</a>
            <a href="../../book-5/index.html" class="top-nav-link book-5">5ê¶Œ</a>
            <a href="../../book-6/index.html" class="top-nav-link book-6 active">6ê¶Œ</a>
        </div>
    </nav>
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">Ã—</button>
            <div class="sidebar-header"><h1>ğŸ“˜ 6ê¶Œ: ì—°êµ¬ ë°ì´í„° ì„¤ê³„</h1><p>ë³€ìˆ˜ë¶€í„° íšŒê·€ë¶„ì„ê¹Œì§€</p></div>
            <ul class="nav-list" id="navList"></ul>
        </nav>
        <main class="main">
            <div class="part-header">4ë¶€: ê¸°ìˆ í†µê³„ì™€ ì¶”ë¡ í†µê³„</div>
            <h1 class="title">[16ì¥] ì§‘ë‹¨ ë¹„êµ ë¶„ì„ (t-test, ANOVA)</h1>

            <div class="intro-box">
                <p>ì´ ì¥ì—ì„œëŠ” <strong>ì§‘ë‹¨ ê°„ í‰ê·  ë¹„êµ</strong>ë¥¼ ìœ„í•œ t-testì™€ ANOVAì˜ ê°œë…, ê·¸ë¦¬ê³  ì´ë¥¼ ìœ„í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ë°°ì›ë‹ˆë‹¤.</p>
            </div>

            <hr>

            <h2>1. ê°€ì„¤ ê²€ì •ì˜ ê¸°ì´ˆ</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ê·€ë¬´ê°€ì„¤ê³¼ ëŒ€ë¦½ê°€ì„¤</h3>
                <p>í†µê³„ì  ê°€ì„¤ ê²€ì •ì€ ë‘ ê°€ì„¤ ì‚¬ì´ì—ì„œ íŒë‹¨í•©ë‹ˆë‹¤:</p>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>ê°€ì„¤</th>
                            <th>ê¸°í˜¸</th>
                            <th>ì˜ë¯¸</th>
                            <th>ì˜ˆì‹œ</th>
                        </tr>
                        <tr>
                            <td><strong>ê·€ë¬´ê°€ì„¤</strong><br>(Null Hypothesis)</td>
                            <td>Hâ‚€</td>
                            <td>ì°¨ì´ê°€ ì—†ë‹¤, íš¨ê³¼ê°€ ì—†ë‹¤</td>
                            <td>Î¼â‚ = Î¼â‚‚ (ë‘ ì§‘ë‹¨ í‰ê· ì´ ê°™ë‹¤)</td>
                        </tr>
                        <tr>
                            <td><strong>ëŒ€ë¦½ê°€ì„¤</strong><br>(Alternative Hypothesis)</td>
                            <td>Hâ‚ ë˜ëŠ” Hâ‚</td>
                            <td>ì°¨ì´ê°€ ìˆë‹¤, íš¨ê³¼ê°€ ìˆë‹¤</td>
                            <td>Î¼â‚ â‰  Î¼â‚‚ (ë‘ ì§‘ë‹¨ í‰ê· ì´ ë‹¤ë¥´ë‹¤)</td>
                        </tr>
                    </table>
                </div>
                <p><strong>í•µì‹¬:</strong> ê·€ë¬´ê°€ì„¤ì„ ê¸°ê°í•  ì¶©ë¶„í•œ ì¦ê±°ê°€ ìˆëŠ”ì§€ ê²€ì •í•©ë‹ˆë‹¤.</p>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ p-valueì˜ ì˜ë¯¸</h3>
                <p>p-valueëŠ” <strong>ê·€ë¬´ê°€ì„¤ì´ ì°¸ì¼ ë•Œ</strong>, í˜„ì¬ ë°ì´í„°(ë˜ëŠ” ë” ê·¹ë‹¨ì ì¸ ë°ì´í„°)ê°€ ê´€ì°°ë  í™•ë¥ ì…ë‹ˆë‹¤.</p>
                <ul>
                    <li><strong>p-valueê°€ ì‘ë‹¤</strong> â†’ ê·€ë¬´ê°€ì„¤ í•˜ì—ì„œ ì´ëŸ° ê²°ê³¼ê°€ ë‚˜ì˜¬ ê°€ëŠ¥ì„±ì´ ë‚®ë‹¤ â†’ ê·€ë¬´ê°€ì„¤ ê¸°ê°</li>
                    <li><strong>p-valueê°€ í¬ë‹¤</strong> â†’ ê·€ë¬´ê°€ì„¤ í•˜ì—ì„œë„ ì¶©ë¶„íˆ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ê²°ê³¼ â†’ ê·€ë¬´ê°€ì„¤ ê¸°ê° ì‹¤íŒ¨</li>
                </ul>
                <p><strong>ì£¼ì˜:</strong> p-valueëŠ” íš¨ê³¼ì˜ í¬ê¸°ë¥¼ ë§í•´ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤!</p>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ìœ ì˜ìˆ˜ì¤€(Î±, Alpha)</h3>
                <p>ê·€ë¬´ê°€ì„¤ì„ ê¸°ê°í•˜ê¸° ìœ„í•œ <strong>ê¸°ì¤€ê°’</strong>ì…ë‹ˆë‹¤.</p>
                <ul>
                    <li><strong>Î± = 0.05 (5%)</strong>: ê°€ì¥ ì¼ë°˜ì ì¸ ê¸°ì¤€</li>
                    <li><strong>Î± = 0.01 (1%)</strong>: ë” ì—„ê²©í•œ ê¸°ì¤€</li>
                    <li><strong>íŒë‹¨:</strong> p &lt; Î± ì´ë©´ ê·€ë¬´ê°€ì„¤ ê¸°ê° ("í†µê³„ì ìœ¼ë¡œ ìœ ì˜í•¨")</li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>âš ï¸ 1ì¢… ì˜¤ë¥˜ì™€ 2ì¢… ì˜¤ë¥˜</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th></th>
                            <th>Hâ‚€ê°€ ì‹¤ì œë¡œ ì°¸</th>
                            <th>Hâ‚€ê°€ ì‹¤ì œë¡œ ê±°ì§“</th>
                        </tr>
                        <tr>
                            <td><strong>Hâ‚€ ê¸°ê°</strong></td>
                            <td style="background-color: #ffebee;"><strong>1ì¢… ì˜¤ë¥˜ (Î±)</strong><br>ê±°ì§“ ì–‘ì„±</td>
                            <td style="background-color: #e8f5e9;">ì˜¬ë°”ë¥¸ ê²°ì •<br>(ê²€ì •ë ¥, 1-Î²)</td>
                        </tr>
                        <tr>
                            <td><strong>Hâ‚€ ê¸°ê° ì‹¤íŒ¨</strong></td>
                            <td style="background-color: #e8f5e9;">ì˜¬ë°”ë¥¸ ê²°ì •</td>
                            <td style="background-color: #fff3e0;"><strong>2ì¢… ì˜¤ë¥˜ (Î²)</strong><br>ê±°ì§“ ìŒì„±</td>
                        </tr>
                    </table>
                </div>
                <ul>
                    <li><strong>1ì¢… ì˜¤ë¥˜</strong>: íš¨ê³¼ê°€ ì—†ëŠ”ë° ìˆë‹¤ê³  íŒë‹¨ (í—ˆìœ„ ë°œê²¬)</li>
                    <li><strong>2ì¢… ì˜¤ë¥˜</strong>: íš¨ê³¼ê°€ ìˆëŠ”ë° ì—†ë‹¤ê³  íŒë‹¨ (ë†“ì¹¨)</li>
                    <li><strong>ê²€ì •ë ¥(Power)</strong>: ì‹¤ì œ íš¨ê³¼ë¥¼ ë°œê²¬í•  í™•ë¥  (ë³´í†µ 0.80 ì´ìƒ ê¶Œì¥)</li>
                </ul>
            </div>

            <hr>

            <h2>2. ë…ë¦½í‘œë³¸ t-test</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?</h3>
                <p><strong>ì„œë¡œ ë‹¤ë¥¸ ë‘ ì§‘ë‹¨</strong>ì˜ í‰ê· ì„ ë¹„êµí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆì‹œ:</strong></p>
                <ul>
                    <li>ì¤‘ì¬êµ° vs ëŒ€ì¡°êµ°ì˜ í†µì¦ ì ìˆ˜ ë¹„êµ</li>
                    <li>ë‚¨ì„± vs ì—¬ì„±ì˜ ê·¼ë ¥ ë¹„êµ</li>
                    <li>ë‚™ìƒ ê²½í—˜ì vs ë¹„ê²½í—˜ìì˜ ê· í˜• ì ìˆ˜ ë¹„êµ</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ê°€ì •(Assumptions)</h3>
                <ol>
                    <li><strong>ë…ë¦½ì„±</strong>: ë‘ ì§‘ë‹¨ì˜ ê´€ì¸¡ì¹˜ê°€ ì„œë¡œ ë…ë¦½ì </li>
                    <li><strong>ì •ê·œì„±</strong>: ê° ì§‘ë‹¨ì˜ ë°ì´í„°ê°€ ì •ê·œë¶„í¬ë¥¼ ë”°ë¦„ (nâ‰¥30ì´ë©´ ì™„í™”)</li>
                    <li><strong>ë“±ë¶„ì‚°ì„±</strong>: ë‘ ì§‘ë‹¨ì˜ ë¶„ì‚°ì´ ë™ì¼ (Welch's t-testë¡œ ì™„í™” ê°€ëŠ¥)</li>
                </ol>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ë…ë¦½í‘œë³¸ t-testë¥¼ ìœ„í•œ ë°ì´í„° êµ¬ì¡°</h3>
                <pre><code>-- í•„ìˆ˜ êµ¬ì¡°: participant_id, group, value
-- ê° ì°¸ê°€ìëŠ” í•˜ë‚˜ì˜ ê·¸ë£¹ì—ë§Œ ì†í•¨

CREATE TABLE ttest_data (
    participant_id INTEGER PRIMARY KEY,
    group_type TEXT NOT NULL,  -- 'intervention' ë˜ëŠ” 'control'
    outcome_value REAL NOT NULL
);

-- ì˜ˆì‹œ ë°ì´í„°
INSERT INTO ttest_data VALUES
(1, 'intervention', 42.5),
(2, 'intervention', 38.0),
(3, 'control', 45.2),
(4, 'control', 41.8);

-- ì§‘ë‹¨ë³„ ê¸°ìˆ í†µê³„ (t-test ì „ í•„ìˆ˜ í™•ì¸)
SELECT
    group_type,
    COUNT(*) AS n,
    ROUND(AVG(outcome_value), 2) AS mean,
    ROUND(SQRT(SUM((outcome_value -
        (SELECT AVG(outcome_value) FROM ttest_data t2
         WHERE t2.group_type = t1.group_type))
        * (outcome_value -
        (SELECT AVG(outcome_value) FROM ttest_data t2
         WHERE t2.group_type = t1.group_type))) / (COUNT(*) - 1)), 2) AS sd
FROM ttest_data t1
GROUP BY group_type;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· t-test ê´€ë ¨ í†µê³„ëŸ‰ ê³„ì‚°</h3>
                <pre><code>-- ì§‘ë‹¨ ê°„ í‰ê·  ì°¨ì´ ê³„ì‚°
WITH group_stats AS (
    SELECT
        group_type,
        COUNT(*) AS n,
        AVG(outcome_value) AS mean,
        SUM((outcome_value - (SELECT AVG(outcome_value) FROM ttest_data WHERE group_type = t.group_type))
            * (outcome_value - (SELECT AVG(outcome_value) FROM ttest_data WHERE group_type = t.group_type)))
            / (COUNT(*) - 1) AS variance
    FROM ttest_data t
    GROUP BY group_type
)
SELECT
    g1.mean - g2.mean AS mean_difference,
    g1.n AS n1,
    g2.n AS n2,
    g1.mean AS mean1,
    g2.mean AS mean2,
    g1.variance AS var1,
    g2.variance AS var2,
    -- í•©ë™ í‘œì¤€ì˜¤ì°¨ (pooled SE)
    SQRT(((g1.n - 1) * g1.variance + (g2.n - 1) * g2.variance) / (g1.n + g2.n - 2)
        * (1.0/g1.n + 1.0/g2.n)) AS pooled_se
FROM group_stats g1, group_stats g2
WHERE g1.group_type = 'intervention' AND g2.group_type = 'control';

-- ì°¸ê³ : ì‹¤ì œ t-ê°’ê³¼ p-value ê³„ì‚°ì€ í†µê³„ ì†Œí”„íŠ¸ì›¨ì–´ í•„ìš”</code></pre>
            </div>

            <hr>

            <h2>3. ëŒ€ì‘í‘œë³¸ t-test</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?</h3>
                <p><strong>ê°™ì€ ëŒ€ìƒ</strong>ì„ ë‘ ë²ˆ ì¸¡ì •í•˜ì—¬ ë¹„êµí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆì‹œ:</strong></p>
                <ul>
                    <li>ì¹˜ë£Œ ì „ vs ì¹˜ë£Œ í›„ í†µì¦ ë¹„êµ</li>
                    <li>ì¢Œì¸¡ vs ìš°ì¸¡ ê·¼ë ¥ ë¹„êµ</li>
                    <li>í”„ë¡œê·¸ë¨ ì „ vs í”„ë¡œê·¸ë¨ í›„ ê· í˜• ì ìˆ˜ ë¹„êµ</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ì°¨ì´ ì ìˆ˜(Difference Score)</h3>
                <p>ëŒ€ì‘í‘œë³¸ t-testëŠ” <strong>ì°¨ì´ ì ìˆ˜</strong>ê°€ 0ê³¼ ë‹¤ë¥¸ì§€ë¥¼ ê²€ì •í•©ë‹ˆë‹¤:</p>
                <p>D = ì‚¬í›„ ì ìˆ˜ - ì‚¬ì „ ì ìˆ˜</p>
                <p>Hâ‚€: Î¼D = 0 (ì‚¬ì „-ì‚¬í›„ ì°¨ì´ê°€ ì—†ë‹¤)</p>
                <p>Hâ‚: Î¼D â‰  0 (ì‚¬ì „-ì‚¬í›„ ì°¨ì´ê°€ ìˆë‹¤)</p>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· Wide í˜•ì‹ ë°ì´í„° (ëŒ€ì‘í‘œë³¸ìš©)</h3>
                <pre><code>-- Wide í˜•ì‹: í•œ í–‰ì— ì‚¬ì „-ì‚¬í›„ ê°’ì´ í•¨ê»˜ ìˆìŒ
CREATE TABLE paired_wide (
    participant_id INTEGER PRIMARY KEY,
    score_pre REAL NOT NULL,
    score_post REAL NOT NULL
);

INSERT INTO paired_wide VALUES
(1, 45.0, 38.0),
(2, 52.0, 48.0),
(3, 38.0, 35.0),
(4, 41.0, 40.0);

-- ì°¨ì´ ì ìˆ˜ ê³„ì‚°
SELECT
    participant_id,
    score_pre,
    score_post,
    score_post - score_pre AS difference
FROM paired_wide;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· Long í˜•ì‹ì—ì„œ Wideë¡œ ë³€í™˜</h3>
                <pre><code>-- Long í˜•ì‹ ì›ë³¸ ë°ì´í„°
CREATE TABLE paired_long (
    participant_id INTEGER NOT NULL,
    time_point TEXT NOT NULL,  -- 'pre' or 'post'
    score REAL NOT NULL,
    PRIMARY KEY (participant_id, time_point)
);

-- Long â†’ Wide ë³€í™˜í•˜ì—¬ ì°¨ì´ ê³„ì‚°
SELECT
    pre.participant_id,
    pre.score AS score_pre,
    post.score AS score_post,
    post.score - pre.score AS difference
FROM paired_long pre
JOIN paired_long post
    ON pre.participant_id = post.participant_id
WHERE pre.time_point = 'pre'
  AND post.time_point = 'post';

-- ì°¨ì´ ì ìˆ˜ì˜ ê¸°ìˆ í†µê³„
WITH differences AS (
    SELECT post.score - pre.score AS diff
    FROM paired_long pre
    JOIN paired_long post
        ON pre.participant_id = post.participant_id
    WHERE pre.time_point = 'pre' AND post.time_point = 'post'
)
SELECT
    COUNT(*) AS n,
    ROUND(AVG(diff), 2) AS mean_diff,
    ROUND(SQRT(SUM((diff - (SELECT AVG(diff) FROM differences)) *
                   (diff - (SELECT AVG(diff) FROM differences))) / (COUNT(*) - 1)), 2) AS sd_diff
FROM differences;</code></pre>
            </div>

            <hr>

            <h2>4. ì¼ì›ë¶„ì‚°ë¶„ì„ (One-way ANOVA)</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?</h3>
                <p><strong>3ê°œ ì´ìƒì˜ ë…ë¦½ì ì¸ ì§‘ë‹¨</strong> í‰ê· ì„ ë¹„êµí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆì‹œ:</strong></p>
                <ul>
                    <li>3ê°€ì§€ ì¹˜ë£Œë²•(A, B, C)ì˜ íš¨ê³¼ ë¹„êµ</li>
                    <li>4ê°œ ì—°ë ¹ëŒ€(20ëŒ€, 30ëŒ€, 40ëŒ€, 50ëŒ€)ì˜ ê· í˜• ì ìˆ˜ ë¹„êµ</li>
                    <li>3ê°œ ë³‘ì›ì˜ ì¹˜ë£Œ ì„±ê³¼ ë¹„êµ</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ANOVAì˜ ë…¼ë¦¬</h3>
                <p>ì „ì²´ ë³€ë™(Total Variance)ì„ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤:</p>
                <ul>
                    <li><strong>ì§‘ë‹¨ ê°„ ë³€ë™(Between-group)</strong>: ì§‘ë‹¨ í‰ê· ë“¤ì˜ ì°¨ì´ë¡œ ì¸í•œ ë³€ë™</li>
                    <li><strong>ì§‘ë‹¨ ë‚´ ë³€ë™(Within-group)</strong>: ê° ì§‘ë‹¨ ë‚´ì—ì„œì˜ ê°œì¸ì°¨</li>
                </ul>
                <p><strong>F-í†µê³„ëŸ‰:</strong> F = (ì§‘ë‹¨ ê°„ ë³€ë™) / (ì§‘ë‹¨ ë‚´ ë³€ë™)</p>
                <p>Fê°€ í¬ë©´ â†’ ì§‘ë‹¨ ê°„ ì°¨ì´ê°€ ìš°ì—°ì´ ì•„ë‹ ê°€ëŠ¥ì„± ë†’ìŒ</p>
            </div>

            <div class="warning-box">
                <h3>âš ï¸ ANOVA ê²°ê³¼ í•´ì„</h3>
                <ul>
                    <li>ANOVAëŠ” "ì „ì²´ì ìœ¼ë¡œ ì§‘ë‹¨ ê°„ ì°¨ì´ê°€ ìˆëŠ”ê°€?"ë§Œ ì•Œë ¤ì¤Œ</li>
                    <li>"ì–´ëŠ ì§‘ë‹¨ì´ ë‹¤ë¥¸ê°€?"ëŠ” <strong>ì‚¬í›„ê²€ì •(Post-hoc test)</strong>ì´ í•„ìš”</li>
                    <li>ëŒ€í‘œì ì¸ ì‚¬í›„ê²€ì •: Tukey HSD, Bonferroni, Scheffe</li>
                </ul>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ANOVAë¥¼ ìœ„í•œ ë°ì´í„° êµ¬ì¡°</h3>
                <pre><code>-- 3ê°œ ì´ìƒì˜ ê·¸ë£¹ ë¹„êµ
CREATE TABLE anova_data (
    participant_id INTEGER PRIMARY KEY,
    treatment_group TEXT NOT NULL,  -- 'A', 'B', 'C'
    outcome_score REAL NOT NULL
);

-- ìƒ˜í”Œ ë°ì´í„°
INSERT INTO anova_data VALUES
(1, 'A', 42.0), (2, 'A', 45.0), (3, 'A', 38.0),
(4, 'B', 35.0), (5, 'B', 32.0), (6, 'B', 37.0),
(7, 'C', 48.0), (8, 'C', 52.0), (9, 'C', 50.0);

-- ê·¸ë£¹ë³„ ê¸°ìˆ í†µê³„
SELECT
    treatment_group,
    COUNT(*) AS n,
    ROUND(AVG(outcome_score), 2) AS mean,
    ROUND(MIN(outcome_score), 2) AS min,
    ROUND(MAX(outcome_score), 2) AS max
FROM anova_data
GROUP BY treatment_group
ORDER BY treatment_group;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ANOVA ë¶„ì‚° ë¶„í•´</h3>
                <pre><code>-- Sum of Squares ê³„ì‚°
WITH grand_stats AS (
    SELECT AVG(outcome_score) AS grand_mean, COUNT(*) AS n_total
    FROM anova_data
),
group_stats AS (
    SELECT
        treatment_group,
        COUNT(*) AS n,
        AVG(outcome_score) AS group_mean
    FROM anova_data
    GROUP BY treatment_group
)
SELECT
    -- SS Between (ì§‘ë‹¨ ê°„ ì œê³±í•©)
    SUM(g.n * (g.group_mean - gs.grand_mean) * (g.group_mean - gs.grand_mean)) AS ss_between,
    -- SS Within (ì§‘ë‹¨ ë‚´ ì œê³±í•©)
    (SELECT SUM((a.outcome_score -
        (SELECT AVG(outcome_score) FROM anova_data WHERE treatment_group = a.treatment_group))
        * (a.outcome_score -
        (SELECT AVG(outcome_score) FROM anova_data WHERE treatment_group = a.treatment_group)))
     FROM anova_data a) AS ss_within,
    -- SS Total (ì „ì²´ ì œê³±í•©)
    (SELECT SUM((outcome_score - gs.grand_mean) * (outcome_score - gs.grand_mean))
     FROM anova_data) AS ss_total,
    -- ììœ ë„
    (SELECT COUNT(DISTINCT treatment_group) - 1 FROM anova_data) AS df_between,
    (SELECT COUNT(*) - COUNT(DISTINCT treatment_group) FROM anova_data) AS df_within
FROM group_stats g, grand_stats gs;</code></pre>
            </div>

            <hr>

            <h2>5. ë°˜ë³µì¸¡ì • ANOVA</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?</h3>
                <p><strong>ê°™ì€ ëŒ€ìƒì„ 3íšŒ ì´ìƒ</strong> ë°˜ë³µ ì¸¡ì •í•˜ì—¬ ë¹„êµí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆì‹œ:</strong></p>
                <ul>
                    <li>ì¹˜ë£Œ ì „ â†’ 4ì£¼ í›„ â†’ 8ì£¼ í›„ â†’ 12ì£¼ í›„ í†µì¦ ë¹„êµ</li>
                    <li>3ê°€ì§€ ì¡°ê±´ì—ì„œ ê°™ì€ ì°¸ê°€ìì˜ ìˆ˜í–‰ ë¹„êµ</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ êµ¬í˜•ì„± ê°€ì •(Sphericity)</h3>
                <p>ë°˜ë³µì¸¡ì • ANOVAì˜ ì¤‘ìš”í•œ ê°€ì •ì…ë‹ˆë‹¤:</p>
                <ul>
                    <li>ëª¨ë“  ì‹œì  ìŒ ê°„ì˜ ë¶„ì‚° ì°¨ì´ê°€ ë™ì¼í•´ì•¼ í•¨</li>
                    <li><strong>Mauchly's Test</strong>ë¡œ ê²€ì •</li>
                    <li>ìœ„ë°˜ ì‹œ: Greenhouse-Geisser ë˜ëŠ” Huynh-Feldt ë³´ì • ì‚¬ìš©</li>
                </ul>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ë°˜ë³µì¸¡ì •ì„ ìœ„í•œ Long í˜•ì‹</h3>
                <pre><code>-- Long í˜•ì‹: ë°˜ë³µì¸¡ì •ì— ì í•©
CREATE TABLE repeated_measures (
    participant_id INTEGER NOT NULL,
    time_point INTEGER NOT NULL,  -- 1, 2, 3, 4 (ì¸¡ì • ì‹œì )
    time_label TEXT NOT NULL,     -- 'baseline', 'week4', 'week8', 'week12'
    score REAL NOT NULL,
    PRIMARY KEY (participant_id, time_point)
);

-- ìƒ˜í”Œ ë°ì´í„°
INSERT INTO repeated_measures VALUES
(1, 1, 'baseline', 45.0), (1, 2, 'week4', 42.0), (1, 3, 'week8', 38.0), (1, 4, 'week12', 35.0),
(2, 1, 'baseline', 52.0), (2, 2, 'week4', 50.0), (2, 3, 'week8', 48.0), (2, 4, 'week12', 45.0),
(3, 1, 'baseline', 38.0), (3, 2, 'week4', 36.0), (3, 3, 'week8', 33.0), (3, 4, 'week12', 30.0);

-- ì‹œì ë³„ ê¸°ìˆ í†µê³„
SELECT
    time_point,
    time_label,
    COUNT(*) AS n,
    ROUND(AVG(score), 2) AS mean,
    ROUND(MIN(score), 2) AS min,
    ROUND(MAX(score), 2) AS max
FROM repeated_measures
GROUP BY time_point, time_label
ORDER BY time_point;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì‹œì  ê°„ ë³€í™” ì¶”ì </h3>
                <pre><code>-- ê° ì°¸ê°€ìì˜ ì‹œì ë³„ ì ìˆ˜ì™€ ê¸°ì¤€ì„  ëŒ€ë¹„ ë³€í™”
WITH baseline AS (
    SELECT participant_id, score AS baseline_score
    FROM repeated_measures
    WHERE time_point = 1
)
SELECT
    rm.participant_id,
    rm.time_label,
    rm.score,
    b.baseline_score,
    rm.score - b.baseline_score AS change_from_baseline,
    ROUND(100.0 * (rm.score - b.baseline_score) / b.baseline_score, 1) AS pct_change
FROM repeated_measures rm
JOIN baseline b ON rm.participant_id = b.participant_id
ORDER BY rm.participant_id, rm.time_point;

-- ì‹œì ë³„ í‰ê·  ë³€í™”ëŸ‰
WITH baseline AS (
    SELECT participant_id, score AS baseline_score
    FROM repeated_measures
    WHERE time_point = 1
)
SELECT
    rm.time_label,
    COUNT(*) AS n,
    ROUND(AVG(rm.score - b.baseline_score), 2) AS mean_change,
    ROUND(AVG(rm.score), 2) AS mean_score
FROM repeated_measures rm
JOIN baseline b ON rm.participant_id = b.participant_id
GROUP BY rm.time_point, rm.time_label
ORDER BY rm.time_point;</code></pre>
            </div>

            <hr>

            <h2>6. ì§‘ë‹¨ ë¹„êµë¥¼ ìœ„í•œ DB ì„¤ê³„</h2>

            <div class="example-box">
                <h3>ğŸ“‹ ì§‘ë‹¨ ë¹„êµ ì—°êµ¬ í†µí•© ìŠ¤í‚¤ë§ˆ</h3>
                <p>ë¬¼ë¦¬ì¹˜ë£Œ íš¨ê³¼ ë¹„êµ ì—°êµ¬ë¥¼ ìœ„í•œ ì™„ì „í•œ ìŠ¤í‚¤ë§ˆì…ë‹ˆë‹¤.</p>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· í†µí•© ìŠ¤í‚¤ë§ˆ</h3>
                <pre><code>-- ========================================
-- ì§‘ë‹¨ ë¹„êµ ì—°êµ¬ ë°ì´í„°ë² ì´ìŠ¤
-- ========================================

-- 1. ì°¸ê°€ì ë° ì§‘ë‹¨ ë°°ì •
CREATE TABLE participants (
    participant_id INTEGER PRIMARY KEY,
    participant_code TEXT UNIQUE NOT NULL,
    age INTEGER,
    sex TEXT CHECK(sex IN ('M', 'F')),
    group_id INTEGER NOT NULL,
    randomization_date DATE,
    FOREIGN KEY (group_id) REFERENCES study_groups(group_id)
);

-- 2. ì—°êµ¬ ì§‘ë‹¨ ì •ì˜
CREATE TABLE study_groups (
    group_id INTEGER PRIMARY KEY,
    group_name TEXT NOT NULL,      -- 'A', 'B', 'C' ë˜ëŠ” ì„¤ëª…ì  ì´ë¦„
    group_label TEXT NOT NULL,     -- 'ìŠ¤íŠ¸ë ˆì¹­', 'ê°•í™”ìš´ë™', 'ëŒ€ì¡°êµ°'
    group_order INTEGER,           -- í‘œì‹œ ìˆœì„œ
    is_control INTEGER DEFAULT 0   -- ëŒ€ì¡°êµ° ì—¬ë¶€
);

-- 3. ì¸¡ì • ì‹œì 
CREATE TABLE time_points (
    time_id INTEGER PRIMARY KEY,
    time_name TEXT NOT NULL,       -- 'baseline', 'week4', 'week8'
    time_order INTEGER NOT NULL,
    days_from_baseline INTEGER     -- ê¸°ì¤€ì„ ë¶€í„° ì¼ìˆ˜
);

-- 4. ì¸¡ì • ë³€ìˆ˜ ì •ì˜
CREATE TABLE variables (
    variable_id INTEGER PRIMARY KEY,
    variable_name TEXT NOT NULL,   -- 'pain_nrs', 'bbs_score'
    variable_label TEXT,           -- 'í†µì¦ NRS', 'ê· í˜• ì ìˆ˜'
    data_type TEXT,                -- 'continuous', 'ordinal', 'categorical'
    min_value REAL,
    max_value REAL
);

-- 5. ì¸¡ì • ë°ì´í„° (Long í˜•ì‹)
CREATE TABLE measurements (
    measurement_id INTEGER PRIMARY KEY,
    participant_id INTEGER NOT NULL,
    variable_id INTEGER NOT NULL,
    time_id INTEGER NOT NULL,
    value REAL,
    measurement_date DATE,
    assessor_id INTEGER,
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id),
    FOREIGN KEY (variable_id) REFERENCES variables(variable_id),
    FOREIGN KEY (time_id) REFERENCES time_points(time_id),
    UNIQUE(participant_id, variable_id, time_id)
);

-- 6. ë¶„ì„ ê²°ê³¼ ì €ì¥
CREATE TABLE analysis_results (
    result_id INTEGER PRIMARY KEY,
    analysis_type TEXT NOT NULL,   -- 't-test', 'anova', 'rm_anova'
    variable_name TEXT NOT NULL,
    comparison TEXT,               -- 'A vs B' ë˜ëŠ” 'time effect'
    test_statistic REAL,           -- tê°’ ë˜ëŠ” Fê°’
    df1 INTEGER,
    df2 INTEGER,
    p_value REAL,
    effect_size REAL,
    effect_size_type TEXT,         -- 'cohen_d', 'eta_squared'
    ci_lower REAL,
    ci_upper REAL,
    analysis_date DATE DEFAULT CURRENT_DATE
);</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì§‘ë‹¨ë³„ ê¸°ìˆ í†µê³„ ì¿¼ë¦¬</h3>
                <pre><code>-- ì§‘ë‹¨ Ã— ì‹œì ë³„ ê¸°ìˆ í†µê³„ (ë…¼ë¬¸ Table 1 í˜•ì‹)
SELECT
    sg.group_label,
    tp.time_name,
    v.variable_label,
    COUNT(m.value) AS n,
    ROUND(AVG(m.value), 2) AS mean,
    ROUND(SQRT(SUM((m.value - (
        SELECT AVG(m2.value)
        FROM measurements m2
        JOIN participants p2 ON m2.participant_id = p2.participant_id
        WHERE p2.group_id = p.group_id
          AND m2.variable_id = m.variable_id
          AND m2.time_id = m.time_id
    )) * (m.value - (
        SELECT AVG(m2.value)
        FROM measurements m2
        JOIN participants p2 ON m2.participant_id = p2.participant_id
        WHERE p2.group_id = p.group_id
          AND m2.variable_id = m.variable_id
          AND m2.time_id = m.time_id
    ))) / NULLIF(COUNT(m.value) - 1, 0)), 2) AS sd
FROM measurements m
JOIN participants p ON m.participant_id = p.participant_id
JOIN study_groups sg ON p.group_id = sg.group_id
JOIN time_points tp ON m.time_id = tp.time_id
JOIN variables v ON m.variable_id = v.variable_id
GROUP BY sg.group_id, tp.time_id, v.variable_id
ORDER BY v.variable_id, sg.group_order, tp.time_order;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· íš¨ê³¼ í¬ê¸°(Cohen's d) ê³„ì‚°</h3>
                <pre><code>-- ë‘ ì§‘ë‹¨ ê°„ Cohen's d ê³„ì‚°
WITH group_stats AS (
    SELECT
        p.group_id,
        sg.group_label,
        COUNT(*) AS n,
        AVG(m.value) AS mean,
        SUM((m.value - (
            SELECT AVG(m2.value) FROM measurements m2
            JOIN participants p2 ON m2.participant_id = p2.participant_id
            WHERE p2.group_id = p.group_id AND m2.variable_id = 1 AND m2.time_id = 2
        )) * (m.value - (
            SELECT AVG(m2.value) FROM measurements m2
            JOIN participants p2 ON m2.participant_id = p2.participant_id
            WHERE p2.group_id = p.group_id AND m2.variable_id = 1 AND m2.time_id = 2
        ))) / (COUNT(*) - 1) AS variance
    FROM measurements m
    JOIN participants p ON m.participant_id = p.participant_id
    JOIN study_groups sg ON p.group_id = sg.group_id
    WHERE m.variable_id = 1 AND m.time_id = 2  -- íŠ¹ì • ë³€ìˆ˜, íŠ¹ì • ì‹œì 
    GROUP BY p.group_id, sg.group_label
)
SELECT
    g1.group_label || ' vs ' || g2.group_label AS comparison,
    ROUND(g1.mean, 2) AS mean_1,
    ROUND(g2.mean, 2) AS mean_2,
    ROUND(g1.mean - g2.mean, 2) AS mean_diff,
    -- Cohen's d (pooled SD ì‚¬ìš©)
    ROUND((g1.mean - g2.mean) /
        SQRT(((g1.n - 1) * g1.variance + (g2.n - 1) * g2.variance) / (g1.n + g2.n - 2)), 2) AS cohens_d
FROM group_stats g1, group_stats g2
WHERE g1.group_id < g2.group_id;

-- Cohen's d í•´ì„
-- |d| < 0.2: íš¨ê³¼ ì—†ìŒ
-- 0.2 â‰¤ |d| < 0.5: ì‘ì€ íš¨ê³¼
-- 0.5 â‰¤ |d| < 0.8: ì¤‘ê°„ íš¨ê³¼
-- |d| â‰¥ 0.8: í° íš¨ê³¼</code></pre>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ë¶„ì„ ë°©ë²• ì„ íƒ ê°€ì´ë“œ</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>ìƒí™©</th>
                            <th>ë¶„ì„ ë°©ë²•</th>
                            <th>ë¹„ëª¨ìˆ˜ ëŒ€ì•ˆ</th>
                        </tr>
                        <tr>
                            <td>2ê°œ ë…ë¦½ ì§‘ë‹¨</td>
                            <td>ë…ë¦½í‘œë³¸ t-test</td>
                            <td>Mann-Whitney U</td>
                        </tr>
                        <tr>
                            <td>2íšŒ ë°˜ë³µì¸¡ì •</td>
                            <td>ëŒ€ì‘í‘œë³¸ t-test</td>
                            <td>Wilcoxon signed-rank</td>
                        </tr>
                        <tr>
                            <td>3ê°œ+ ë…ë¦½ ì§‘ë‹¨</td>
                            <td>One-way ANOVA</td>
                            <td>Kruskal-Wallis</td>
                        </tr>
                        <tr>
                            <td>3íšŒ+ ë°˜ë³µì¸¡ì •</td>
                            <td>Repeated ANOVA</td>
                            <td>Friedman test</td>
                        </tr>
                        <tr>
                            <td>2ìš”ì¸ (ì§‘ë‹¨ Ã— ì‹œì )</td>
                            <td>Mixed ANOVA</td>
                            <td>-</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="summary-box">
                <h3>ğŸ“ ì´ ì¥ì˜ í•µì‹¬ ì •ë¦¬</h3>
                <ol>
                    <li><strong>ê°€ì„¤ ê²€ì •</strong>: Hâ‚€(ì°¨ì´ ì—†ìŒ) vs Hâ‚(ì°¨ì´ ìˆìŒ), p &lt; Î± ë©´ ê¸°ê°</li>
                    <li><strong>ë…ë¦½í‘œë³¸ t-test</strong>: ì„œë¡œ ë‹¤ë¥¸ ë‘ ì§‘ë‹¨ ë¹„êµ, group ì»¬ëŸ¼ í•„ìš”</li>
                    <li><strong>ëŒ€ì‘í‘œë³¸ t-test</strong>: ê°™ì€ ëŒ€ìƒ 2íšŒ ì¸¡ì •, ì°¨ì´ ì ìˆ˜ë¡œ ë¶„ì„</li>
                    <li><strong>One-way ANOVA</strong>: 3ê°œ+ ì§‘ë‹¨ ë¹„êµ, ì‚¬í›„ê²€ì • í•„ìš”</li>
                    <li><strong>ë°˜ë³µì¸¡ì • ANOVA</strong>: 3íšŒ+ ë°˜ë³µì¸¡ì •, Long í˜•ì‹ ë°ì´í„°</li>
                    <li><strong>íš¨ê³¼ í¬ê¸°</strong>: Cohen's dë¡œ ì‹¤ì§ˆì  ì˜ë¯¸ íŒŒì•… (0.2/0.5/0.8 ê¸°ì¤€)</li>
                </ol>
            </div>

            <div class="nav-buttons">
                <a href="chapter-15.html" class="nav-btn">â† ì´ì „</a>
                <span class="page-num">16 / 20</span>
                <a href="chapter-17.html" class="nav-btn">ë‹¤ìŒ â†’</a>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>