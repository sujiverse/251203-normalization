<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[17ì¥] ê´€ê³„ ë¶„ì„ - ì—°êµ¬ ë°ì´í„° ì„¤ê³„</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav class="top-nav">
        <a href="../../index.html" class="top-nav-brand"><span>ğŸ“Š</span> ì—°êµ¬ ë°ì´í„° ì„¤ê³„</a>
        <div class="top-nav-links">
            <a href="../../book-1/index.html" class="top-nav-link book-1">1ê¶Œ</a>
            <a href="../../book-2/index.html" class="top-nav-link book-2">2ê¶Œ</a>
            <a href="../../book-3/index.html" class="top-nav-link book-3">3ê¶Œ</a>
            <a href="../../book-4/index.html" class="top-nav-link book-4">4ê¶Œ</a>
            <a href="../../book-5/index.html" class="top-nav-link book-5">5ê¶Œ</a>
            <a href="../../book-6/index.html" class="top-nav-link book-6 active">6ê¶Œ</a>
        </div>
    </nav>
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">Ã—</button>
            <div class="sidebar-header"><h1>ğŸ“˜ 6ê¶Œ: ì—°êµ¬ ë°ì´í„° ì„¤ê³„</h1><p>ë³€ìˆ˜ë¶€í„° íšŒê·€ë¶„ì„ê¹Œì§€</p></div>
            <ul class="nav-list" id="navList"></ul>
        </nav>
        <main class="main">
            <div class="part-header">4ë¶€: ê¸°ìˆ í†µê³„ì™€ ì¶”ë¡ í†µê³„</div>
            <h1 class="title">[17ì¥] ê´€ê³„ ë¶„ì„ (ìƒê´€, ì¹´ì´ì œê³±)</h1>

            <div class="intro-box">
                <p>ì´ ì¥ì—ì„œëŠ” <strong>ë³€ìˆ˜ ê°„ ê´€ê³„</strong>ë¥¼ ë¶„ì„í•˜ëŠ” ìƒê´€ë¶„ì„ê³¼ ì¹´ì´ì œê³± ê²€ì •ì˜ ê°œë…ê³¼ ë°ì´í„° êµ¬ì¡°ë¥¼ ë°°ì›ë‹ˆë‹¤.</p>
            </div>

            <hr>

            <h2>1. ìƒê´€ë¶„ì„ì˜ ê¸°ì´ˆ</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ìƒê´€(Correlation)ì´ë€?</h3>
                <p>ë‘ ë³€ìˆ˜ê°€ í•¨ê»˜ <strong>ë³€í•˜ëŠ” ê²½í–¥</strong>ì„ ë‚˜íƒ€ë‚´ëŠ” í†µê³„ì  ê´€ê³„ì…ë‹ˆë‹¤.</p>
                <ul>
                    <li><strong>ì–‘ì˜ ìƒê´€</strong>: í•œ ë³€ìˆ˜ê°€ ì¦ê°€í•˜ë©´ ë‹¤ë¥¸ ë³€ìˆ˜ë„ ì¦ê°€</li>
                    <li><strong>ìŒì˜ ìƒê´€</strong>: í•œ ë³€ìˆ˜ê°€ ì¦ê°€í•˜ë©´ ë‹¤ë¥¸ ë³€ìˆ˜ëŠ” ê°ì†Œ</li>
                    <li><strong>ë¬´ìƒê´€</strong>: ë‘ ë³€ìˆ˜ ê°„ì— ì²´ê³„ì ì¸ ê´€ê³„ê°€ ì—†ìŒ</li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>âš ï¸ ìƒê´€ì€ ì¸ê³¼ê°€ ì•„ë‹ˆë‹¤!</h3>
                <p><strong>Correlation does not imply causation</strong></p>
                <p>ë‘ ë³€ìˆ˜ê°€ ìƒê´€ê´€ê³„ê°€ ìˆë‹¤ê³  í•´ì„œ í•œ ë³€ìˆ˜ê°€ ë‹¤ë¥¸ ë³€ìˆ˜ì˜ ì›ì¸ì´ë¼ê³  í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆì‹œ:</strong></p>
                <ul>
                    <li>ì•„ì´ìŠ¤í¬ë¦¼ íŒë§¤ëŸ‰ê³¼ ìµì‚¬ ì‚¬ê³  ìˆ˜ëŠ” ë†’ì€ ì–‘ì˜ ìƒê´€ â†’ ì›ì¸ì€ ë‘˜ ë‹¤ "ì—¬ë¦„"</li>
                    <li>ê· í˜• ì ìˆ˜ì™€ ì¸ì§€ ê¸°ëŠ¥ ì ìˆ˜ëŠ” ì–‘ì˜ ìƒê´€ â†’ ê³µí†µ ì›ì¸ì€ "ì „ë°˜ì  ê±´ê°• ìƒíƒœ"ì¼ ìˆ˜ ìˆìŒ</li>
                </ul>
                <p><strong>ì¸ê³¼ ê´€ê³„ ì…ì¦ì—ëŠ”:</strong> ë¬´ì‘ìœ„ ì‹¤í—˜, ì‹œê°„ ìˆœì„œ, ì œ3ë³€ìˆ˜ í†µì œ í•„ìš”</p>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ì‚°ì ë„(Scatterplot)</h3>
                <p>ë‘ ì—°ì†í˜• ë³€ìˆ˜ì˜ ê´€ê³„ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê·¸ë˜í”„ì…ë‹ˆë‹¤.</p>
                <ul>
                    <li>Xì¶•: ë…ë¦½ë³€ìˆ˜ (ì„¤ëª…ë³€ìˆ˜)</li>
                    <li>Yì¶•: ì¢…ì†ë³€ìˆ˜ (ê²°ê³¼ë³€ìˆ˜)</li>
                    <li>ê° ì : í•œ ê´€ì¸¡ì¹˜ì˜ ë‘ ë³€ìˆ˜ ê°’</li>
                </ul>
                <p><strong>í™•ì¸í•  ê²ƒ:</strong></p>
                <ul>
                    <li>ê´€ê³„ì˜ ë°©í–¥ (ì–‘/ìŒ)</li>
                    <li>ê´€ê³„ì˜ í˜•íƒœ (ì„ í˜•/ë¹„ì„ í˜•)</li>
                    <li>ì´ìƒì¹˜ ì¡´ì¬ ì—¬ë¶€</li>
                </ul>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì‚°ì ë„ ë°ì´í„° ì¤€ë¹„</h3>
                <pre><code>-- ì‚°ì ë„ìš© ë°ì´í„°: ë‘ ë³€ìˆ˜ë¥¼ ë‚˜ë€íˆ ì¡°íšŒ
SELECT
    p.participant_id,
    m1.value AS bbs_score,    -- Xì¶•
    m2.value AS tug_seconds   -- Yì¶•
FROM participants p
JOIN measurements m1
    ON p.participant_id = m1.participant_id
    AND m1.variable_id = 1    -- BBS
    AND m1.time_id = 1        -- baseline
JOIN measurements m2
    ON p.participant_id = m2.participant_id
    AND m2.variable_id = 2    -- TUG
    AND m2.time_id = 1        -- baseline
WHERE m1.value IS NOT NULL
  AND m2.value IS NOT NULL;</code></pre>
            </div>

            <hr>

            <h2>2. Pearson ìƒê´€ê³„ìˆ˜</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ Pearson ìƒê´€ê³„ìˆ˜ (r)</h3>
                <p>ë‘ <strong>ì—°ì†í˜• ë³€ìˆ˜</strong> ê°„ì˜ <strong>ì„ í˜• ê´€ê³„</strong> ê°•ë„ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.</p>
                <p><strong>ìˆ˜ì‹:</strong></p>
                <pre>r = Î£(xáµ¢ - xÌ„)(yáµ¢ - È³) / âˆš[Î£(xáµ¢ - xÌ„)Â² Ã— Î£(yáµ¢ - È³)Â²]</pre>
                <p><strong>ë²”ìœ„:</strong> -1 â‰¤ r â‰¤ +1</p>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ìƒê´€ê³„ìˆ˜ í•´ì„</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>r ê°’</th>
                            <th>í•´ì„</th>
                            <th>ì˜ë¯¸</th>
                        </tr>
                        <tr>
                            <td>r = 1.0</td>
                            <td>ì™„ì „í•œ ì–‘ì˜ ìƒê´€</td>
                            <td>ì™„ë²½í•œ ì„ í˜• ì¦ê°€ ê´€ê³„</td>
                        </tr>
                        <tr>
                            <td>0.7 â‰¤ r < 1.0</td>
                            <td>ê°•í•œ ì–‘ì˜ ìƒê´€</td>
                            <td>ë°€ì ‘í•œ ê´€ê³„</td>
                        </tr>
                        <tr>
                            <td>0.4 â‰¤ r < 0.7</td>
                            <td>ì¤‘ê°„ ì–‘ì˜ ìƒê´€</td>
                            <td>ëšœë ·í•œ ê´€ê³„</td>
                        </tr>
                        <tr>
                            <td>0.1 â‰¤ r < 0.4</td>
                            <td>ì•½í•œ ì–‘ì˜ ìƒê´€</td>
                            <td>ì•½í•œ ê´€ê³„</td>
                        </tr>
                        <tr>
                            <td>-0.1 < r < 0.1</td>
                            <td>ê±°ì˜ ë¬´ìƒê´€</td>
                            <td>ê´€ê³„ ì—†ìŒ</td>
                        </tr>
                        <tr>
                            <td>-1.0 â‰¤ r â‰¤ -0.1</td>
                            <td>ìŒì˜ ìƒê´€</td>
                            <td>ë°˜ëŒ€ ë°©í–¥ ê´€ê³„</td>
                        </tr>
                    </table>
                </div>
                <p><em>* Cohen(1988) ê¸°ì¤€: 0.1=ì‘ìŒ, 0.3=ì¤‘ê°„, 0.5=í¼</em></p>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ Pearson ìƒê´€ì˜ ê°€ì •</h3>
                <ol>
                    <li><strong>ì—°ì†í˜• ë³€ìˆ˜</strong>: ë‘ ë³€ìˆ˜ ëª¨ë‘ ì—°ì†í˜• (ë¹„ìœ¨/ë“±ê°„ ì²™ë„)</li>
                    <li><strong>ì„ í˜• ê´€ê³„</strong>: ë‘ ë³€ìˆ˜ê°€ ì§ì„  ê´€ê³„ì—¬ì•¼ í•¨</li>
                    <li><strong>ì •ê·œì„±</strong>: ë‘ ë³€ìˆ˜ê°€ ì •ê·œë¶„í¬ì— ê°€ê¹Œì›Œì•¼ í•¨</li>
                    <li><strong>ë“±ë¶„ì‚°ì„±</strong>: Xê°’ì— ë”°ë¼ Yì˜ ë¶„ì‚°ì´ ì¼ì •í•´ì•¼ í•¨</li>
                    <li><strong>ì´ìƒì¹˜ ì—†ìŒ</strong>: ê·¹ë‹¨ê°’ì´ ìƒê´€ê³„ìˆ˜ë¥¼ ì™œê³¡í•  ìˆ˜ ìˆìŒ</li>
                </ol>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· Pearson ìƒê´€ê³„ìˆ˜ ê³„ì‚° (SQL)</h3>
                <pre><code>-- ë‘ ë³€ìˆ˜ ê°„ Pearson ìƒê´€ê³„ìˆ˜
WITH paired_data AS (
    SELECT
        m1.value AS x,
        m2.value AS y
    FROM measurements m1
    JOIN measurements m2
        ON m1.participant_id = m2.participant_id
        AND m1.time_id = m2.time_id
    WHERE m1.variable_id = 1   -- BBS
      AND m2.variable_id = 2   -- TUG
      AND m1.time_id = 1       -- baseline
      AND m1.value IS NOT NULL
      AND m2.value IS NOT NULL
),
stats AS (
    SELECT
        AVG(x) AS mean_x,
        AVG(y) AS mean_y,
        COUNT(*) AS n
    FROM paired_data
)
SELECT
    s.n,
    ROUND(s.mean_x, 2) AS mean_x,
    ROUND(s.mean_y, 2) AS mean_y,
    -- ìƒê´€ê³„ìˆ˜ ê³„ì‚°
    ROUND(
        SUM((p.x - s.mean_x) * (p.y - s.mean_y)) /
        SQRT(SUM((p.x - s.mean_x) * (p.x - s.mean_x)) *
             SUM((p.y - s.mean_y) * (p.y - s.mean_y)))
    , 3) AS pearson_r
FROM paired_data p, stats s;

-- ê²°ê³¼ ì˜ˆì‹œ: n=50, mean_x=43.2, mean_y=12.5, pearson_r=-0.72</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ê²°ì •ê³„ìˆ˜ (RÂ²)</h3>
                <pre><code>-- RÂ² = rÂ² : í•œ ë³€ìˆ˜ê°€ ë‹¤ë¥¸ ë³€ìˆ˜ì˜ ë¶„ì‚°ì„ ì„¤ëª…í•˜ëŠ” ë¹„ìœ¨
WITH correlation AS (
    -- ìœ„ì˜ ìƒê´€ê³„ìˆ˜ ì¿¼ë¦¬ ê²°ê³¼
    SELECT -0.72 AS r
)
SELECT
    r,
    ROUND(r * r, 3) AS r_squared,
    ROUND(r * r * 100, 1) || '%' AS variance_explained
FROM correlation;

-- ê²°ê³¼: r=-0.72, r_squared=0.518, variance_explained=51.8%
-- í•´ì„: BBS ì ìˆ˜ê°€ TUG ì‹œê°„ ë³€ë™ì˜ ì•½ 52%ë¥¼ ì„¤ëª…</code></pre>
            </div>

            <hr>

            <h2>3. Spearman ìƒê´€ê³„ìˆ˜</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ Spearman ìˆœìœ„ ìƒê´€ê³„ìˆ˜ (Ï, rho)</h3>
                <p>ë‘ ë³€ìˆ˜ì˜ <strong>ìˆœìœ„(rank)</strong>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°í•˜ëŠ” ìƒê´€ê³„ìˆ˜ì…ë‹ˆë‹¤.</p>
                <p><strong>ì‚¬ìš© ìƒí™©:</strong></p>
                <ul>
                    <li>ì •ê·œì„± ê°€ì •ì„ ë§Œì¡±í•˜ì§€ ì•ŠëŠ” ì—°ì†í˜• ë³€ìˆ˜</li>
                    <li><strong>ìˆœì„œí˜•(ordinal) ë³€ìˆ˜</strong> ê°„ì˜ ê´€ê³„</li>
                    <li>ë¹„ì„ í˜•ì´ì§€ë§Œ ë‹¨ì¡°(monotonic) ê´€ê³„ì¼ ë•Œ</li>
                    <li>ì´ìƒì¹˜ê°€ ìˆì„ ë•Œ (ìˆœìœ„ëŠ” ê·¹ë‹¨ê°’ì— ëœ ë¯¼ê°)</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ Pearson vs Spearman</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>êµ¬ë¶„</th>
                            <th>Pearson</th>
                            <th>Spearman</th>
                        </tr>
                        <tr>
                            <td>ë°ì´í„° ìœ í˜•</td>
                            <td>ì—°ì†í˜• (ë“±ê°„/ë¹„ìœ¨)</td>
                            <td>ì—°ì†í˜• ë˜ëŠ” ìˆœì„œí˜•</td>
                        </tr>
                        <tr>
                            <td>ê´€ê³„ ìœ í˜•</td>
                            <td>ì„ í˜• ê´€ê³„</td>
                            <td>ë‹¨ì¡° ê´€ê³„ (monotonic)</td>
                        </tr>
                        <tr>
                            <td>ì •ê·œì„± ê°€ì •</td>
                            <td>í•„ìš”</td>
                            <td>ë¶ˆí•„ìš”</td>
                        </tr>
                        <tr>
                            <td>ì´ìƒì¹˜ ë¯¼ê°ë„</td>
                            <td>ë¯¼ê°</td>
                            <td>ëœ ë¯¼ê° (ìˆœìœ„ ì‚¬ìš©)</td>
                        </tr>
                        <tr>
                            <td>ê³„ì‚° ë°©ì‹</td>
                            <td>ì› ë°ì´í„° ê°’</td>
                            <td>ìˆœìœ„ë¡œ ë³€í™˜ í›„ ê³„ì‚°</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· Spearman ìƒê´€ê³„ìˆ˜ ê³„ì‚°</h3>
                <pre><code>-- 1ë‹¨ê³„: ê° ë³€ìˆ˜ì˜ ìˆœìœ„ ë¶€ì—¬
WITH ranked_data AS (
    SELECT
        m1.participant_id,
        m1.value AS x,
        m2.value AS y,
        RANK() OVER (ORDER BY m1.value) AS rank_x,
        RANK() OVER (ORDER BY m2.value) AS rank_y
    FROM measurements m1
    JOIN measurements m2
        ON m1.participant_id = m2.participant_id
        AND m1.time_id = m2.time_id
    WHERE m1.variable_id = 1 AND m2.variable_id = 2
      AND m1.time_id = 1
      AND m1.value IS NOT NULL AND m2.value IS NOT NULL
),
-- 2ë‹¨ê³„: ìˆœìœ„ì— ëŒ€í•´ Pearson ìƒê´€ ê³„ì‚°
stats AS (
    SELECT
        AVG(rank_x) AS mean_rx,
        AVG(rank_y) AS mean_ry,
        COUNT(*) AS n
    FROM ranked_data
)
SELECT
    s.n,
    -- Spearman rho = ìˆœìœ„ì— ëŒ€í•œ Pearson r
    ROUND(
        SUM((r.rank_x - s.mean_rx) * (r.rank_y - s.mean_ry)) /
        SQRT(SUM((r.rank_x - s.mean_rx) * (r.rank_x - s.mean_rx)) *
             SUM((r.rank_y - s.mean_ry) * (r.rank_y - s.mean_ry)))
    , 3) AS spearman_rho
FROM ranked_data r, stats s;</code></pre>
            </div>

            <hr>

            <h2>4. ì¹´ì´ì œê³± ê²€ì •</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ì¹´ì´ì œê³±(Ï‡Â²) ê²€ì •ì´ë€?</h3>
                <p>ë‘ <strong>ë²”ì£¼í˜• ë³€ìˆ˜</strong> ê°„ì˜ ê´€ë ¨ì„±(ë…ë¦½ì„±)ì„ ê²€ì •í•©ë‹ˆë‹¤.</p>
                <p><strong>ê·€ë¬´ê°€ì„¤:</strong> ë‘ ë³€ìˆ˜ëŠ” ë…ë¦½ì ì´ë‹¤ (ê´€ë ¨ ì—†ë‹¤)</p>
                <p><strong>ëŒ€ë¦½ê°€ì„¤:</strong> ë‘ ë³€ìˆ˜ëŠ” ë…ë¦½ì ì´ì§€ ì•Šë‹¤ (ê´€ë ¨ ìˆë‹¤)</p>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ êµì°¨í‘œ(Contingency Table)</h3>
                <p>ì¹´ì´ì œê³± ê²€ì •ì˜ ê¸°ì´ˆ ë°ì´í„°ì…ë‹ˆë‹¤:</p>
                <div class="table-container">
                    <table>
                        <tr>
                            <th></th>
                            <th>ë‚™ìƒ ìˆìŒ</th>
                            <th>ë‚™ìƒ ì—†ìŒ</th>
                            <th>í–‰ í•©ê³„</th>
                        </tr>
                        <tr>
                            <td><strong>ìš´ë™êµ°</strong></td>
                            <td>5 (Oâ‚â‚)</td>
                            <td>20 (Oâ‚â‚‚)</td>
                            <td>25</td>
                        </tr>
                        <tr>
                            <td><strong>ëŒ€ì¡°êµ°</strong></td>
                            <td>12 (Oâ‚‚â‚)</td>
                            <td>13 (Oâ‚‚â‚‚)</td>
                            <td>25</td>
                        </tr>
                        <tr>
                            <td><strong>ì—´ í•©ê³„</strong></td>
                            <td>17</td>
                            <td>33</td>
                            <td>50</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ê¸°ëŒ€ë¹ˆë„ vs ê´€ì¸¡ë¹ˆë„</h3>
                <p><strong>ê¸°ëŒ€ë¹ˆë„(E)</strong>: ë‘ ë³€ìˆ˜ê°€ ë…ë¦½ì ì¼ ë•Œ ì˜ˆìƒë˜ëŠ” ë¹ˆë„</p>
                <p><strong>ìˆ˜ì‹:</strong> E = (í–‰ í•©ê³„ Ã— ì—´ í•©ê³„) / ì´í•©</p>
                <p><strong>ì˜ˆ:</strong> ìš´ë™êµ°-ë‚™ìƒìˆìŒì˜ ê¸°ëŒ€ë¹ˆë„ = (25 Ã— 17) / 50 = 8.5</p>
                <p><strong>ì¹´ì´ì œê³± í†µê³„ëŸ‰:</strong> Ï‡Â² = Î£(O - E)Â² / E</p>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· êµì°¨í‘œ ìƒì„±</h3>
                <pre><code>-- 2Ã—2 êµì°¨í‘œ ìƒì„±
SELECT
    p.group_type,
    SUM(CASE WHEN fe.fall_occurred = 1 THEN 1 ELSE 0 END) AS fall_yes,
    SUM(CASE WHEN fe.fall_occurred = 0 OR fe.fall_occurred IS NULL THEN 1 ELSE 0 END) AS fall_no,
    COUNT(*) AS total
FROM participants p
LEFT JOIN (
    SELECT
        participant_id,
        MAX(CASE WHEN event_id IS NOT NULL THEN 1 ELSE 0 END) AS fall_occurred
    FROM fall_events
    GROUP BY participant_id
) fe ON p.participant_id = fe.participant_id
GROUP BY p.group_type;

-- Wide í˜•ì‹ êµì°¨í‘œ
SELECT
    SUM(CASE WHEN group_type = 'intervention' AND fall_occurred = 1 THEN 1 ELSE 0 END) AS int_fall,
    SUM(CASE WHEN group_type = 'intervention' AND fall_occurred = 0 THEN 1 ELSE 0 END) AS int_nofall,
    SUM(CASE WHEN group_type = 'control' AND fall_occurred = 1 THEN 1 ELSE 0 END) AS ctrl_fall,
    SUM(CASE WHEN group_type = 'control' AND fall_occurred = 0 THEN 1 ELSE 0 END) AS ctrl_nofall
FROM (
    SELECT
        p.group_type,
        COALESCE(MAX(CASE WHEN fe.event_id IS NOT NULL THEN 1 END), 0) AS fall_occurred
    FROM participants p
    LEFT JOIN fall_events fe ON p.participant_id = fe.participant_id
    GROUP BY p.participant_id, p.group_type
) sub;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ì¹´ì´ì œê³± í†µê³„ëŸ‰ ê³„ì‚°</h3>
                <pre><code>-- 2Ã—2 êµì°¨í‘œì—ì„œ ì¹´ì´ì œê³± ê³„ì‚°
WITH observed AS (
    SELECT
        5 AS o11,   -- ìš´ë™êµ°, ë‚™ìƒ O
        20 AS o12,  -- ìš´ë™êµ°, ë‚™ìƒ X
        12 AS o21,  -- ëŒ€ì¡°êµ°, ë‚™ìƒ O
        13 AS o22   -- ëŒ€ì¡°êµ°, ë‚™ìƒ X
),
totals AS (
    SELECT
        o.*,
        o11 + o12 AS row1,
        o21 + o22 AS row2,
        o11 + o21 AS col1,
        o12 + o22 AS col2,
        o11 + o12 + o21 + o22 AS grand_total
    FROM observed o
),
expected AS (
    SELECT
        t.*,
        1.0 * row1 * col1 / grand_total AS e11,
        1.0 * row1 * col2 / grand_total AS e12,
        1.0 * row2 * col1 / grand_total AS e21,
        1.0 * row2 * col2 / grand_total AS e22
    FROM totals t
)
SELECT
    ROUND(e11, 2) AS expected_11,
    ROUND(e12, 2) AS expected_12,
    ROUND(e21, 2) AS expected_21,
    ROUND(e22, 2) AS expected_22,
    -- ì¹´ì´ì œê³± í†µê³„ëŸ‰
    ROUND(
        (o11 - e11) * (o11 - e11) / e11 +
        (o12 - e12) * (o12 - e12) / e12 +
        (o21 - e21) * (o21 - e21) / e21 +
        (o22 - e22) * (o22 - e22) / e22
    , 3) AS chi_square,
    1 AS df  -- (í–‰-1) Ã— (ì—´-1) = 1 Ã— 1 = 1
FROM expected;

-- ê²°ê³¼: chi_square=4.17, df=1
-- p-valueëŠ” ì¹´ì´ì œê³± ë¶„í¬í‘œ ì°¸ì¡° (p < 0.05ì´ë©´ ìœ ì˜)</code></pre>
            </div>

            <div class="warning-box">
                <h3>âš ï¸ ì¹´ì´ì œê³± ê²€ì • ì£¼ì˜ì‚¬í•­</h3>
                <ul>
                    <li><strong>ê¸°ëŒ€ë¹ˆë„ 5 ì´ìƒ</strong>: ëª¨ë“  ì…€ì˜ ê¸°ëŒ€ë¹ˆë„ê°€ 5 ì´ìƒì´ì–´ì•¼ í•¨</li>
                    <li><strong>ìœ„ë°˜ ì‹œ</strong>: Fisher's Exact Test ì‚¬ìš©</li>
                    <li><strong>ë…ë¦½ ê´€ì¸¡ì¹˜</strong>: ê°™ì€ ëŒ€ìƒì˜ ë°˜ë³µì¸¡ì • ë¶ˆê°€</li>
                </ul>
            </div>

            <hr>

            <h2>5. ìƒê´€ í–‰ë ¬</h2>

            <div class="concept-box">
                <h3>ğŸ’¡ ìƒê´€ í–‰ë ¬(Correlation Matrix)</h3>
                <p>ì—¬ëŸ¬ ë³€ìˆ˜ ê°„ì˜ ìƒê´€ê³„ìˆ˜ë¥¼ í–‰ë ¬ í˜•íƒœë¡œ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.</p>
                <div class="table-container">
                    <table>
                        <tr>
                            <th></th>
                            <th>BBS</th>
                            <th>TUG</th>
                            <th>í†µì¦</th>
                            <th>ë‚˜ì´</th>
                        </tr>
                        <tr>
                            <td><strong>BBS</strong></td>
                            <td>1.00</td>
                            <td>-0.72</td>
                            <td>-0.45</td>
                            <td>-0.38</td>
                        </tr>
                        <tr>
                            <td><strong>TUG</strong></td>
                            <td>-0.72</td>
                            <td>1.00</td>
                            <td>0.52</td>
                            <td>0.41</td>
                        </tr>
                        <tr>
                            <td><strong>í†µì¦</strong></td>
                            <td>-0.45</td>
                            <td>0.52</td>
                            <td>1.00</td>
                            <td>0.15</td>
                        </tr>
                        <tr>
                            <td><strong>ë‚˜ì´</strong></td>
                            <td>-0.38</td>
                            <td>0.41</td>
                            <td>0.15</td>
                            <td>1.00</td>
                        </tr>
                    </table>
                </div>
                <p><strong>íŠ¹ì§•:</strong> ëŒ€ê°ì„ ì€ 1.0, ëŒ€ì¹­ í–‰ë ¬</p>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ìƒê´€ í–‰ë ¬ í…Œì´ë¸” ì„¤ê³„</h3>
                <pre><code>-- ìƒê´€ ê²°ê³¼ ì €ì¥ í…Œì´ë¸”
CREATE TABLE correlation_matrix (
    corr_id INTEGER PRIMARY KEY,
    var1_id INTEGER NOT NULL,
    var2_id INTEGER NOT NULL,
    var1_name TEXT NOT NULL,
    var2_name TEXT NOT NULL,
    correlation_type TEXT DEFAULT 'pearson',  -- pearson, spearman
    r_value REAL,
    p_value REAL,
    n INTEGER,
    time_id INTEGER,           -- ì¸¡ì • ì‹œì 
    analysis_date DATE DEFAULT CURRENT_DATE,
    FOREIGN KEY (var1_id) REFERENCES variables(variable_id),
    FOREIGN KEY (var2_id) REFERENCES variables(variable_id),
    UNIQUE(var1_id, var2_id, time_id, correlation_type)
);</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ëª¨ë“  ë³€ìˆ˜ ìŒì˜ ìƒê´€ê³„ìˆ˜ ê³„ì‚°</h3>
                <pre><code>-- ëª¨ë“  ë³€ìˆ˜ ìŒ ì¡°í•©ì— ëŒ€í•´ ìƒê´€ê³„ìˆ˜ ê³„ì‚°
INSERT INTO correlation_matrix (var1_id, var2_id, var1_name, var2_name, r_value, n, time_id)
WITH variable_pairs AS (
    SELECT v1.variable_id AS var1, v2.variable_id AS var2,
           v1.variable_name AS name1, v2.variable_name AS name2
    FROM variables v1
    CROSS JOIN variables v2
    WHERE v1.variable_id < v2.variable_id  -- ì¤‘ë³µ ë°©ì§€
),
pair_data AS (
    SELECT
        vp.var1, vp.var2, vp.name1, vp.name2,
        m1.value AS x, m2.value AS y, m1.time_id
    FROM variable_pairs vp
    JOIN measurements m1 ON vp.var1 = m1.variable_id
    JOIN measurements m2 ON vp.var2 = m2.variable_id
        AND m1.participant_id = m2.participant_id
        AND m1.time_id = m2.time_id
    WHERE m1.value IS NOT NULL AND m2.value IS NOT NULL
),
correlations AS (
    SELECT
        var1, var2, name1, name2, time_id,
        COUNT(*) AS n,
        (COUNT(*) * SUM(x * y) - SUM(x) * SUM(y)) /
        SQRT((COUNT(*) * SUM(x * x) - SUM(x) * SUM(x)) *
             (COUNT(*) * SUM(y * y) - SUM(y) * SUM(y))) AS r
    FROM pair_data
    GROUP BY var1, var2, name1, name2, time_id
)
SELECT var1, var2, name1, name2, ROUND(r, 3), n, time_id
FROM correlations;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ìƒê´€ í–‰ë ¬ Wide í˜•ì‹ ì¶œë ¥</h3>
                <pre><code>-- í–‰ë ¬ í˜•íƒœë¡œ ì¶œë ¥ (í”¼ë²—)
SELECT
    var1_name,
    MAX(CASE WHEN var2_name = 'BBS' THEN r_value END) AS BBS,
    MAX(CASE WHEN var2_name = 'TUG' THEN r_value END) AS TUG,
    MAX(CASE WHEN var2_name = 'í†µì¦' THEN r_value END) AS í†µì¦,
    MAX(CASE WHEN var2_name = 'ë‚˜ì´' THEN r_value END) AS ë‚˜ì´
FROM (
    -- ìê¸° ìì‹  í¬í•¨
    SELECT var1_name, var2_name, r_value FROM correlation_matrix
    UNION ALL
    SELECT var2_name, var1_name, r_value FROM correlation_matrix
    UNION ALL
    SELECT variable_name, variable_name, 1.0 FROM variables
) combined
GROUP BY var1_name
ORDER BY var1_name;</code></pre>
            </div>

            <hr>

            <h2>6. ê´€ê³„ ë¶„ì„ì„ ìœ„í•œ DB ì„¤ê³„</h2>

            <div class="example-box">
                <h3>ğŸ“‹ í†µí•© ê´€ê³„ ë¶„ì„ ìŠ¤í‚¤ë§ˆ</h3>
                <p>ìƒê´€ë¶„ì„ê³¼ ì¹´ì´ì œê³± ê²€ì • ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” ìŠ¤í‚¤ë§ˆì…ë‹ˆë‹¤.</p>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ê´€ê³„ ë¶„ì„ ê²°ê³¼ í…Œì´ë¸”</h3>
                <pre><code>-- ========================================
-- ê´€ê³„ ë¶„ì„ ê²°ê³¼ ë°ì´í„°ë² ì´ìŠ¤
-- ========================================

-- 1. ìƒê´€ë¶„ì„ ê²°ê³¼
CREATE TABLE correlation_results (
    result_id INTEGER PRIMARY KEY,
    variable_x TEXT NOT NULL,
    variable_y TEXT NOT NULL,
    correlation_type TEXT NOT NULL,  -- 'pearson', 'spearman', 'point_biserial'
    r_value REAL NOT NULL,
    r_squared REAL,
    p_value REAL,
    n INTEGER,
    ci_lower REAL,
    ci_upper REAL,
    time_point TEXT,
    subgroup TEXT,                   -- í•˜ìœ„ê·¸ë£¹ ë¶„ì„ ì‹œ
    analysis_date DATE DEFAULT CURRENT_DATE,
    notes TEXT
);

-- 2. ì¹´ì´ì œê³± ê²€ì • ê²°ê³¼
CREATE TABLE chi_square_results (
    result_id INTEGER PRIMARY KEY,
    variable_row TEXT NOT NULL,      -- í–‰ ë³€ìˆ˜
    variable_col TEXT NOT NULL,      -- ì—´ ë³€ìˆ˜
    chi_square REAL,
    df INTEGER,
    p_value REAL,
    cramers_v REAL,                  -- íš¨ê³¼ í¬ê¸°
    phi REAL,                        -- 2Ã—2 êµì°¨í‘œìš© íš¨ê³¼ í¬ê¸°
    n INTEGER,
    time_point TEXT,
    analysis_date DATE DEFAULT CURRENT_DATE
);

-- 3. êµì°¨í‘œ ì…€ ë°ì´í„°
CREATE TABLE crosstab_cells (
    cell_id INTEGER PRIMARY KEY,
    result_id INTEGER NOT NULL,      -- chi_square_results ì°¸ì¡°
    row_category TEXT NOT NULL,
    col_category TEXT NOT NULL,
    observed INTEGER,
    expected REAL,
    residual REAL,                   -- (O - E)
    std_residual REAL,               -- (O - E) / sqrt(E)
    FOREIGN KEY (result_id) REFERENCES chi_square_results(result_id)
);</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ë¶„ì„ ê²°ê³¼ ì €ì¥ ë° ì¡°íšŒ</h3>
                <pre><code>-- ìƒê´€ë¶„ì„ ê²°ê³¼ ì €ì¥
INSERT INTO correlation_results
    (variable_x, variable_y, correlation_type, r_value, r_squared, p_value, n, time_point)
VALUES
    ('BBS', 'TUG', 'pearson', -0.72, 0.52, 0.001, 50, 'baseline'),
    ('BBS', 'í†µì¦', 'pearson', -0.45, 0.20, 0.012, 50, 'baseline'),
    ('TUG', 'í†µì¦', 'pearson', 0.52, 0.27, 0.003, 50, 'baseline');

-- ê°•í•œ ìƒê´€ê´€ê³„ë§Œ ì¡°íšŒ
SELECT
    variable_x,
    variable_y,
    r_value,
    CASE
        WHEN ABS(r_value) >= 0.7 THEN 'ê°•í•¨'
        WHEN ABS(r_value) >= 0.4 THEN 'ì¤‘ê°„'
        WHEN ABS(r_value) >= 0.1 THEN 'ì•½í•¨'
        ELSE 'ë¬´ê´€'
    END AS strength,
    p_value,
    CASE WHEN p_value < 0.05 THEN '*' ELSE '' END AS significant
FROM correlation_results
WHERE ABS(r_value) >= 0.3
ORDER BY ABS(r_value) DESC;</code></pre>
            </div>

            <div class="sql-box">
                <h3>ğŸ”· ë…¼ë¬¸ìš© ìƒê´€ í…Œì´ë¸” ì¶œë ¥</h3>
                <pre><code>-- ë…¼ë¬¸ í˜•ì‹: r (p-value)
SELECT
    variable_x || ' Ã— ' || variable_y AS variables,
    ROUND(r_value, 2) || ' (' ||
    CASE
        WHEN p_value < 0.001 THEN '<.001'
        WHEN p_value < 0.01 THEN '<.01'
        ELSE ROUND(p_value, 3)
    END || ')' AS "r (p)",
    n,
    CASE
        WHEN p_value < 0.001 THEN '***'
        WHEN p_value < 0.01 THEN '**'
        WHEN p_value < 0.05 THEN '*'
        ELSE ''
    END AS sig
FROM correlation_results
ORDER BY variable_x, variable_y;

-- ê²°ê³¼:
-- variables       | r (p)          | n  | sig
-- BBS Ã— TUG       | -0.72 (<.001)  | 50 | ***
-- BBS Ã— í†µì¦      | -0.45 (<.05)   | 50 | *</code></pre>
            </div>

            <div class="concept-box">
                <h3>ğŸ’¡ ë¶„ì„ ë°©ë²• ì„ íƒ ê°€ì´ë“œ</h3>
                <div class="table-container">
                    <table>
                        <tr>
                            <th>ë³€ìˆ˜ X</th>
                            <th>ë³€ìˆ˜ Y</th>
                            <th>ë¶„ì„ ë°©ë²•</th>
                        </tr>
                        <tr>
                            <td>ì—°ì†í˜• (ì •ê·œ)</td>
                            <td>ì—°ì†í˜• (ì •ê·œ)</td>
                            <td>Pearson ìƒê´€</td>
                        </tr>
                        <tr>
                            <td>ì—°ì†í˜• (ë¹„ì •ê·œ)</td>
                            <td>ì—°ì†í˜• (ë¹„ì •ê·œ)</td>
                            <td>Spearman ìƒê´€</td>
                        </tr>
                        <tr>
                            <td>ìˆœì„œí˜•</td>
                            <td>ìˆœì„œí˜•</td>
                            <td>Spearman ìƒê´€</td>
                        </tr>
                        <tr>
                            <td>ì´ë¶„í˜•</td>
                            <td>ì—°ì†í˜•</td>
                            <td>Point-biserial ìƒê´€</td>
                        </tr>
                        <tr>
                            <td>ë²”ì£¼í˜•</td>
                            <td>ë²”ì£¼í˜•</td>
                            <td>ì¹´ì´ì œê³± ê²€ì •</td>
                        </tr>
                        <tr>
                            <td>ë²”ì£¼í˜• (2Ã—2, ì†Œí‘œë³¸)</td>
                            <td>ë²”ì£¼í˜•</td>
                            <td>Fisher's Exact</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="summary-box">
                <h3>ğŸ“ ì´ ì¥ì˜ í•µì‹¬ ì •ë¦¬</h3>
                <ol>
                    <li><strong>ìƒê´€ â‰  ì¸ê³¼</strong>: ë‘ ë³€ìˆ˜ì˜ ê´€ê³„ê°€ ì›ì¸-ê²°ê³¼ë¥¼ ì˜ë¯¸í•˜ì§€ ì•ŠìŒ</li>
                    <li><strong>Pearson r</strong>: ì—°ì†í˜• ë³€ìˆ˜ì˜ ì„ í˜• ê´€ê³„, -1~+1 ë²”ìœ„</li>
                    <li><strong>Spearman Ï</strong>: ìˆœìœ„ ê¸°ë°˜, ë¹„ì •ê·œ/ìˆœì„œí˜•ì— ì í•©</li>
                    <li><strong>ì¹´ì´ì œê³±</strong>: ë²”ì£¼í˜• ë³€ìˆ˜ ê°„ ë…ë¦½ì„± ê²€ì •, ê¸°ëŒ€ë¹ˆë„ 5 ì´ìƒ</li>
                    <li><strong>ìƒê´€ í–‰ë ¬</strong>: ì—¬ëŸ¬ ë³€ìˆ˜ ê°„ ìƒê´€ì„ í•œëˆˆì— íŒŒì•…</li>
                    <li><strong>ê²°ì •ê³„ìˆ˜ RÂ²</strong>: ìƒê´€ê³„ìˆ˜ì˜ ì œê³±, ì„¤ëª…ë ¥ ë¹„ìœ¨</li>
                </ol>
            </div>

            <div class="nav-buttons">
                <a href="chapter-16.html" class="nav-btn">â† ì´ì „</a>
                <span class="page-num">17 / 20</span>
                <a href="chapter-18.html" class="nav-btn">ë‹¤ìŒ â†’</a>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>