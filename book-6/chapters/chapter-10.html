<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[10ì¥] íš¡ë‹¨ ì—°êµ¬ - ì—°êµ¬ ë°ì´í„° ì„¤ê³„</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav class="top-nav">
        <a href="../../index.html" class="top-nav-brand"><span>ğŸ“Š</span> ì—°êµ¬ ë°ì´í„° ì„¤ê³„</a>
        <div class="top-nav-links">
            <a href="../../book-1/index.html" class="top-nav-link book-1">1ê¶Œ</a>
            <a href="../../book-2/index.html" class="top-nav-link book-2">2ê¶Œ</a>
            <a href="../../book-3/index.html" class="top-nav-link book-3">3ê¶Œ</a>
            <a href="../../book-4/index.html" class="top-nav-link book-4">4ê¶Œ</a>
            <a href="../../book-5/index.html" class="top-nav-link book-5">5ê¶Œ</a>
            <a href="../../book-6/index.html" class="top-nav-link book-6 active">6ê¶Œ</a>
        </div>
    </nav>
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">Ã—</button>
            <div class="sidebar-header"><h1>ğŸ“˜ 6ê¶Œ: ì—°êµ¬ ë°ì´í„° ì„¤ê³„</h1><p>ë³€ìˆ˜ë¶€í„° íšŒê·€ë¶„ì„ê¹Œì§€</p></div>
            <ul class="nav-list" id="navList"></ul>
        </nav>
        <main class="main">
            <div class="part-header">3ë¶€: ì—°êµ¬ í˜•íƒœë³„ DB ì„¤ê³„</div>
            <h1 class="title">[10ì¥] íš¡ë‹¨ ì—°êµ¬ (Cross-sectional)</h1>

            <div class="intro-box">
                <p>ì´ ì¥ì—ì„œëŠ” <strong>í•œ ì‹œì ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” íš¡ë‹¨ ì—°êµ¬</strong>ì˜ DB ì„¤ê³„ë¥¼ ë°°ì›ë‹ˆë‹¤. ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œ ê°€ì¥ í”í•œ ì—°êµ¬ í˜•íƒœë¡œ, ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë„ ê°€ì¥ ë‹¨ìˆœí•©ë‹ˆë‹¤.</p>
            </div>

            <hr>

            <h2>1. íš¡ë‹¨ ì—°êµ¬ë€?</h2>

            <div class="concept-box">
                <h3>ğŸ“– íš¡ë‹¨ ì—°êµ¬ì˜ ì •ì˜</h3>
                <p><strong>íš¡ë‹¨ ì—°êµ¬(Cross-sectional Study)</strong>ëŠ” íŠ¹ì • ì‹œì ì—ì„œ ëª¨ë“  ë³€ìˆ˜ë¥¼ ë™ì‹œì— ì¸¡ì •í•˜ëŠ” ì—°êµ¬ ì„¤ê³„ì…ë‹ˆë‹¤.</p>
                <ul>
                    <li><strong>ì‹œê°„</strong>: í•œ ì‹œì  (ìŠ¤ëƒ…ìƒ·)</li>
                    <li><strong>ì¸¡ì • íšŸìˆ˜</strong>: ì°¸ê°€ìë‹¹ 1íšŒ</li>
                    <li><strong>ëª©ì </strong>: ë³€ìˆ˜ ê°„ ê´€ë ¨ì„± íƒìƒ‰, í˜„í™© íŒŒì•…</li>
                </ul>
            </div>

            <h3>1.1 íš¡ë‹¨ ì—°êµ¬ì˜ ì¥ì </h3>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ì¥ì </th>
                            <th>ì„¤ëª…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë¹ ë¥¸ ìˆ˜í–‰</td>
                            <td>ì¶”ì ê´€ì°° ì—†ì´ í•œ ë²ˆì— ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ</td>
                        </tr>
                        <tr>
                            <td>ë¹„ìš© íš¨ìœ¨ì </td>
                            <td>ì¥ê¸° ì¶”ì ì— ë”°ë¥¸ ë¹„ìš© ì—†ìŒ</td>
                        </tr>
                        <tr>
                            <td>íƒˆë½ ì—†ìŒ</td>
                            <td>ì¶”ì ê´€ì°° ì¤‘ íƒˆë½(dropout) ë¬¸ì œ ì—†ìŒ</td>
                        </tr>
                        <tr>
                            <td>ì—¬ëŸ¬ ê²°ê³¼ ë™ì‹œ ì¡°ì‚¬</td>
                            <td>ë‹¤ì–‘í•œ ë³€ìˆ˜ë¥¼ í•œêº¼ë²ˆì— ì¸¡ì • ê°€ëŠ¥</td>
                        </tr>
                        <tr>
                            <td>ìœ ë³‘ë¥  ì¶”ì •</td>
                            <td>íŠ¹ì • ì‹œì ì˜ ì§ˆë³‘/ìƒíƒœ ìœ ë³‘ë¥  íŒŒì•…</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>1.2 íš¡ë‹¨ ì—°êµ¬ì˜ ë‹¨ì </h3>

            <div class="warning-box">
                <h3>âš ï¸ íš¡ë‹¨ ì—°êµ¬ì˜ í•œê³„</h3>
                <ul>
                    <li><strong>ì¸ê³¼ê´€ê³„ ì¶”ë¡  ë¶ˆê°€</strong>: ì›ì¸ê³¼ ê²°ê³¼ì˜ ì‹œê°„ì  ì„ í›„ê´€ê³„ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ</li>
                    <li><strong>ì—­ì¸ê³¼ì„± ë¬¸ì œ</strong>: Aê°€ Bë¥¼ ìœ ë°œí–ˆëŠ”ì§€, Bê°€ Aë¥¼ ìœ ë°œí–ˆëŠ”ì§€ êµ¬ë¶„ ë¶ˆê°€</li>
                    <li><strong>ë°œìƒë¥  ì¶”ì • ë¶ˆê°€</strong>: ìƒˆë¡œìš´ ì¼€ì´ìŠ¤ì˜ ë°œìƒ(incidence)ì„ ì¸¡ì •í•  ìˆ˜ ì—†ìŒ</li>
                    <li><strong>ìƒì¡´ì í¸í–¥</strong>: ì—°êµ¬ ì‹œì ì— ìƒì¡´í•œ ì‚¬ëŒë§Œ í¬í•¨ë¨</li>
                </ul>
            </div>

            <h3>1.3 íš¡ë‹¨ ì—°êµ¬ì— ì í•©í•œ ì—°êµ¬ ì§ˆë¬¸</h3>

            <div class="example-box">
                <h3>ğŸ“ ì í•©í•œ ì—°êµ¬ ì§ˆë¬¸ ì˜ˆì‹œ</h3>
                <table>
                    <thead>
                        <tr><th>ìœ í˜•</th><th>ì—°êµ¬ ì§ˆë¬¸</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ìœ ë³‘ë¥  ì¡°ì‚¬</td>
                            <td>ë§Œì„± ìš”í†µ í™˜ì ì¤‘ ìš°ìš¸ì¦ ë™ë°˜ ë¹„ìœ¨ì€?</td>
                        </tr>
                        <tr>
                            <td>ìƒê´€ê´€ê³„ íƒìƒ‰</td>
                            <td>ì•…ë ¥ê³¼ ë‚™ìƒ ë‘ë ¤ì›€ ì‚¬ì´ì— ê´€ë ¨ì´ ìˆëŠ”ê°€?</td>
                        </tr>
                        <tr>
                            <td>ì§‘ë‹¨ ë¹„êµ</td>
                            <td>ë‚¨ì„±ê³¼ ì—¬ì„±ì˜ ê· í˜• ëŠ¥ë ¥ì— ì°¨ì´ê°€ ìˆëŠ”ê°€?</td>
                        </tr>
                        <tr>
                            <td>ìš”ì¸ íƒìƒ‰</td>
                            <td>ë…¸ì¸ ë‚™ìƒê³¼ ê´€ë ¨ëœ ìš”ì¸ì€ ë¬´ì—‡ì¸ê°€?</td>
                        </tr>
                        <tr>
                            <td>ì²™ë„ íƒ€ë‹¹í™”</td>
                            <td>K-WOMACì˜ êµ¬ì„±íƒ€ë‹¹ë„ëŠ” ì ì ˆí•œê°€?</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <hr>

            <h2>2. 1íšŒ ì¸¡ì • êµ¬ì¡°</h2>

            <p>íš¡ë‹¨ ì—°êµ¬ì˜ ë°ì´í„° êµ¬ì¡°ëŠ” ë§¤ìš° ë‹¨ìˆœí•©ë‹ˆë‹¤: <strong>1ëª…ì˜ ì°¸ê°€ì = 1ê°œì˜ í–‰</strong></p>

            <h3>2.1 ê¸°ë³¸ êµ¬ì¡°: Wide Format</h3>

            <div class="concept-box">
                <h3>ğŸ“– Wide Format êµ¬ì¡°</h3>
                <p>íš¡ë‹¨ ì—°êµ¬ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ Wide formatì…ë‹ˆë‹¤:</p>
                <ul>
                    <li>ê° í–‰: í•œ ëª…ì˜ ì°¸ê°€ì</li>
                    <li>ê° ì—´: í•˜ë‚˜ì˜ ë³€ìˆ˜</li>
                    <li>ì…€: í•´ë‹¹ ì°¸ê°€ìì˜ í•´ë‹¹ ë³€ìˆ˜ ê°’</li>
                </ul>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>participant_id</th>
                            <th>age</th>
                            <th>gender</th>
                            <th>height_cm</th>
                            <th>weight_kg</th>
                            <th>pain_vas</th>
                            <th>function_score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>P001</td><td>65</td><td>F</td><td>158.5</td><td>62.3</td><td>45</td><td>72</td></tr>
                        <tr><td>P002</td><td>72</td><td>M</td><td>170.2</td><td>75.8</td><td>30</td><td>85</td></tr>
                        <tr><td>P003</td><td>58</td><td>F</td><td>162.0</td><td>58.5</td><td>60</td><td>65</td></tr>
                    </tbody>
                </table>
            </div>

            <h3>2.2 ë‹¨ì¼ í…Œì´ë¸” vs ë‹¤ì¤‘ í…Œì´ë¸”</h3>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ìƒí™©</th>
                            <th>ì„¤ê³„</th>
                            <th>ì´ìœ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë³€ìˆ˜ 10ê°œ ë¯¸ë§Œ, ê°„ë‹¨í•œ ì„¤ë¬¸</td>
                            <td>ë‹¨ì¼ í…Œì´ë¸”</td>
                            <td>ê°„ë‹¨í•¨, JOIN ì—†ì´ ì¡°íšŒ</td>
                        </tr>
                        <tr>
                            <td>ë³€ìˆ˜ ë§¤ìš° ë§ìŒ (50ê°œ ì´ìƒ)</td>
                            <td>ì˜ì—­ë³„ í…Œì´ë¸” ë¶„ë¦¬</td>
                            <td>ê´€ë¦¬ ìš©ì´, ëª¨ë“ˆí™”</td>
                        </tr>
                        <tr>
                            <td>ì—¬ëŸ¬ ì²™ë„ ì‚¬ìš©</td>
                            <td>ì²™ë„ë³„ í…Œì´ë¸” ë¶„ë¦¬</td>
                            <td>ê° ì²™ë„ ë…ë¦½ ê´€ë¦¬</td>
                        </tr>
                        <tr>
                            <td>ì‹ ì²´ì¸¡ì • + ì„¤ë¬¸</td>
                            <td>í…Œì´ë¸” ë¶„ë¦¬ ê³ ë ¤</td>
                            <td>ì¸¡ì • ìœ í˜•ë³„ êµ¬ë¶„</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <hr>

            <h2>3. ì°¸ê°€ì-ì‘ë‹µ í…Œì´ë¸” ì„¤ê³„</h2>

            <h3>3.1 ë‹¨ì¼ í…Œì´ë¸” ì„¤ê³„</h3>

            <div class="sql-box">
                <h3>ğŸ’» ë‹¨ì¼ í…Œì´ë¸” (ê°„ë‹¨í•œ íš¡ë‹¨ ì—°êµ¬)</h3>
                <pre><code>-- ëª¨ë“  ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ í…Œì´ë¸”ì— ì €ì¥
CREATE TABLE survey_data (
    participant_id TEXT PRIMARY KEY,
    collection_date DATE NOT NULL,

    -- ì¸êµ¬í†µê³„í•™ì  ì •ë³´
    age INTEGER,
    gender TEXT CHECK (gender IN ('M', 'F')),
    education TEXT,
    occupation TEXT,

    -- ì‹ ì²´ ì¸¡ì •
    height_cm DECIMAL(5,1),
    weight_kg DECIMAL(5,2),
    bmi DECIMAL(4,2),

    -- ì„ìƒ ì¸¡ì •
    pain_vas INTEGER CHECK (pain_vas BETWEEN 0 AND 100),
    rom_flexion INTEGER,
    grip_strength_kg DECIMAL(4,1),

    -- ì„¤ë¬¸ ì ìˆ˜
    phq9_total INTEGER,
    gad7_total INTEGER,
    function_score INTEGER,

    -- ë©”íƒ€ ì •ë³´
    assessor_id TEXT,
    notes TEXT
);</code></pre>
            </div>

            <h3>3.2 ë‹¤ì¤‘ í…Œì´ë¸” ì„¤ê³„ (ì •ê·œí™”)</h3>

            <div class="sql-box">
                <h3>ğŸ’» ë‹¤ì¤‘ í…Œì´ë¸” (ë³µì¡í•œ íš¡ë‹¨ ì—°êµ¬)</h3>
                <pre><code>-- 1. ì°¸ê°€ì ê¸°ë³¸ ì •ë³´
CREATE TABLE participants (
    participant_id TEXT PRIMARY KEY,
    enrollment_date DATE NOT NULL,
    age INTEGER,
    gender TEXT CHECK (gender IN ('M', 'F')),
    education TEXT,
    occupation TEXT
);

-- 2. ì‹ ì²´ ì¸¡ì • ë°ì´í„°
CREATE TABLE physical_measurements (
    measurement_id INTEGER PRIMARY KEY,
    participant_id TEXT NOT NULL,
    measurement_date DATE NOT NULL,
    height_cm DECIMAL(5,1),
    weight_kg DECIMAL(5,2),
    waist_cm DECIMAL(5,1),
    hip_cm DECIMAL(5,1),
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id)
);

-- 3. ì„ìƒ í‰ê°€ ë°ì´í„°
CREATE TABLE clinical_assessments (
    assessment_id INTEGER PRIMARY KEY,
    participant_id TEXT NOT NULL,
    assessment_date DATE NOT NULL,
    assessor_id TEXT,
    pain_vas INTEGER CHECK (pain_vas BETWEEN 0 AND 100),
    rom_flexion INTEGER,
    rom_extension INTEGER,
    grip_right_kg DECIMAL(4,1),
    grip_left_kg DECIMAL(4,1),
    tug_time_sec DECIMAL(5,2),
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id)
);

-- 4. ì„¤ë¬¸ ì‘ë‹µ (ì›ì ìˆ˜)
CREATE TABLE questionnaire_responses (
    response_id INTEGER PRIMARY KEY,
    participant_id TEXT NOT NULL,
    questionnaire_name TEXT NOT NULL,  -- 'PHQ9', 'GAD7', 'SF36' ë“±
    response_date DATE NOT NULL,
    -- ê°œë³„ ë¬¸í•­ ì ìˆ˜ (JSON ë˜ëŠ” ë³„ë„ í…Œì´ë¸”)
    item_scores TEXT,  -- JSON: '[0, 1, 2, 1, 0, 1, 2, 1, 1]'
    total_score INTEGER,
    FOREIGN KEY (participant_id) REFERENCES participants(participant_id)
);

-- VIEWë¡œ í†µí•© ì¡°íšŒ
CREATE VIEW survey_complete AS
SELECT
    p.participant_id,
    p.age,
    p.gender,
    pm.height_cm,
    pm.weight_kg,
    ROUND(pm.weight_kg / (pm.height_cm/100.0 * pm.height_cm/100.0), 1) AS bmi,
    ca.pain_vas,
    ca.tug_time_sec,
    phq.total_score AS phq9_total,
    gad.total_score AS gad7_total
FROM participants p
LEFT JOIN physical_measurements pm ON p.participant_id = pm.participant_id
LEFT JOIN clinical_assessments ca ON p.participant_id = ca.participant_id
LEFT JOIN questionnaire_responses phq ON p.participant_id = phq.participant_id
    AND phq.questionnaire_name = 'PHQ9'
LEFT JOIN questionnaire_responses gad ON p.participant_id = gad.participant_id
    AND gad.questionnaire_name = 'GAD7';</code></pre>
            </div>

            <h3>3.3 ì •ê·œí™” ì—¬ë¶€ ê²°ì • ê¸°ì¤€</h3>

            <div class="concept-box">
                <h3>ğŸ“– ì–¸ì œ í…Œì´ë¸”ì„ ë¶„ë¦¬í•˜ëŠ”ê°€?</h3>
                <table>
                    <thead>
                        <tr><th>ë¶„ë¦¬ ê¶Œì¥</th><th>ë‹¨ì¼ í…Œì´ë¸” ìœ ì§€</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë³€ìˆ˜ê°€ 50ê°œ ì´ìƒ</td>
                            <td>ë³€ìˆ˜ê°€ 20ê°œ ë¯¸ë§Œ</td>
                        </tr>
                        <tr>
                            <td>ë‹¤ë¥¸ ì‹œì ì— ì¸¡ì •ë  ê°€ëŠ¥ì„±</td>
                            <td>ëª¨ë“  ë³€ìˆ˜ë¥¼ ë™ì‹œì— ì¸¡ì •</td>
                        </tr>
                        <tr>
                            <td>ì—¬ëŸ¬ í‰ê°€ìê°€ ë‹¤ë¥¸ ë¶€ë¶„ ë‹´ë‹¹</td>
                            <td>í•œ ì‚¬ëŒì´ ëª¨ë“  ë°ì´í„° ìˆ˜ì§‘</td>
                        </tr>
                        <tr>
                            <td>í‘œì¤€ ì²™ë„ ì—¬ëŸ¬ ê°œ ì‚¬ìš©</td>
                            <td>ìì²´ ê°œë°œ ì„¤ë¬¸ì§€ í•˜ë‚˜</td>
                        </tr>
                        <tr>
                            <td>ì¶”í›„ ì¢…ë‹¨ ì—°êµ¬ë¡œ í™•ì¥ ê°€ëŠ¥ì„±</td>
                            <td>ì¼íšŒì„± ì¡°ì‚¬</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <hr>

            <h2>4. ë¹„êµ ì§‘ë‹¨ ì„¤ê³„</h2>

            <p>íš¡ë‹¨ ì—°êµ¬ì—ì„œ ì§‘ë‹¨ ê°„ ë¹„êµëŠ” ë§¤ìš° í”í•œ ë¶„ì„ì…ë‹ˆë‹¤.</p>

            <h3>4.1 ì§‘ë‹¨ ë³€ìˆ˜ ì¶”ê°€</h3>

            <div class="sql-box">
                <h3>ğŸ’» ì§‘ë‹¨ ë³€ìˆ˜ê°€ ìˆëŠ” í…Œì´ë¸” ì„¤ê³„</h3>
                <pre><code>CREATE TABLE comparison_study (
    participant_id TEXT PRIMARY KEY,
    collection_date DATE NOT NULL,

    -- ì§‘ë‹¨ ë³€ìˆ˜
    group_code TEXT NOT NULL CHECK (group_code IN ('control', 'patient')),
    -- ë˜ëŠ” ë” ìƒì„¸í•˜ê²Œ
    diagnosis TEXT,  -- 'healthy', 'LBP', 'OA_knee', 'stroke' ë“±
    disease_severity TEXT,  -- 'mild', 'moderate', 'severe'

    -- ì¸¡ì • ë³€ìˆ˜ë“¤
    age INTEGER,
    gender TEXT,
    pain_vas INTEGER,
    function_score INTEGER,
    balance_score DECIMAL(4,2)
);

-- ì§‘ë‹¨ë³„ ê¸°ìˆ í†µê³„
SELECT
    group_code,
    COUNT(*) AS n,
    AVG(age) AS mean_age,
    AVG(pain_vas) AS mean_pain,
    AVG(function_score) AS mean_function
FROM comparison_study
GROUP BY group_code;</code></pre>
            </div>

            <h3>4.2 ë‹¤ì§‘ë‹¨ ë¹„êµ</h3>

            <div class="sql-box">
                <h3>ğŸ’» 3ê°œ ì´ìƒ ì§‘ë‹¨ ë¹„êµ</h3>
                <pre><code>CREATE TABLE multi_group_study (
    participant_id TEXT PRIMARY KEY,

    -- ë‹¤ì¤‘ ì§‘ë‹¨ ë³€ìˆ˜ (3ê°œ ì´ìƒ)
    age_group TEXT CHECK (age_group IN ('young', 'middle', 'old')),
    exercise_level TEXT CHECK (exercise_level IN ('sedentary', 'moderate', 'active')),
    pain_category TEXT CHECK (pain_category IN ('none', 'mild', 'moderate', 'severe')),

    -- ê²°ê³¼ ë³€ìˆ˜
    balance_score DECIMAL(4,2),
    strength_kg DECIMAL(4,1),
    endurance_sec INTEGER
);

-- ê° ì§‘ë‹¨ë³„ í†µê³„
SELECT
    age_group,
    exercise_level,
    COUNT(*) AS n,
    ROUND(AVG(balance_score), 2) AS mean_balance,
    ROUND(AVG(strength_kg), 1) AS mean_strength
FROM multi_group_study
GROUP BY age_group, exercise_level
ORDER BY age_group, exercise_level;</code></pre>
            </div>

            <h3>4.3 ë§¤ì¹­ëœ ë¹„êµ ì§‘ë‹¨</h3>

            <div class="sql-box">
                <h3>ğŸ’» ë§¤ì¹­ ì •ë³´ ì €ì¥</h3>
                <pre><code>-- í™˜ì-ëŒ€ì¡°êµ° ë§¤ì¹­ ì—°êµ¬
CREATE TABLE matched_pairs (
    pair_id INTEGER PRIMARY KEY,
    patient_id TEXT NOT NULL,
    control_id TEXT NOT NULL,
    match_criteria TEXT,  -- 'ageÂ±5, gender, bmiÂ±2'
    FOREIGN KEY (patient_id) REFERENCES participants(participant_id),
    FOREIGN KEY (control_id) REFERENCES participants(participant_id)
);

-- ë§¤ì¹­ í’ˆì§ˆ í™•ì¸
SELECT
    mp.pair_id,
    p_patient.age AS patient_age,
    p_control.age AS control_age,
    ABS(p_patient.age - p_control.age) AS age_diff,
    p_patient.gender AS patient_gender,
    p_control.gender AS control_gender
FROM matched_pairs mp
JOIN participants p_patient ON mp.patient_id = p_patient.participant_id
JOIN participants p_control ON mp.control_id = p_control.participant_id;</code></pre>
            </div>

            <hr>

            <h2>5. íš¡ë‹¨ ì—°êµ¬ì˜ í•œê³„</h2>

            <h3>5.1 ì¸ê³¼ê´€ê³„ ì¶”ë¡ ì˜ í•œê³„</h3>

            <div class="example-box">
                <h3>ğŸ“ ì¸ê³¼ê´€ê³„ í•´ì„ì˜ ë¬¸ì œ</h3>
                <p><strong>ì—°êµ¬ ê²°ê³¼</strong>: í†µì¦ì´ ë†’ì€ ì‚¬ëŒì´ ìš°ìš¸ ì ìˆ˜ë„ ë†’ë‹¤ (r = 0.45)</p>
                <p><strong>ê°€ëŠ¥í•œ í•´ì„</strong>:</p>
                <ol>
                    <li>í†µì¦ â†’ ìš°ìš¸: ë§Œì„± í†µì¦ì´ ìš°ìš¸ì„ ìœ ë°œ</li>
                    <li>ìš°ìš¸ â†’ í†µì¦: ìš°ìš¸ì´ í†µì¦ ì§€ê°ì„ ë†’ì„</li>
                    <li>ì–‘ë°©í–¥: ì„œë¡œ ì˜í–¥ì„ ì£¼ê³ ë°›ìŒ</li>
                    <li>ì œ3ë³€ìˆ˜: ë‹¤ë¥¸ ìš”ì¸(ì˜ˆ: ìˆ˜ë©´ì¥ì• )ì´ ë‘˜ ë‹¤ ìœ ë°œ</li>
                </ol>
                <p><strong>íš¡ë‹¨ ì—°êµ¬ì—ì„œëŠ” ì´ ì¤‘ ì–´ë–¤ í•´ì„ì´ ë§ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</strong></p>
            </div>

            <div class="warning-box">
                <h3>âš ï¸ íš¡ë‹¨ ì—°êµ¬ ê²°ê³¼ ê¸°ìˆ  ì‹œ ì£¼ì˜</h3>
                <table>
                    <thead>
                        <tr><th>ì˜ëª»ëœ ê¸°ìˆ </th><th>ì˜¬ë°”ë¥¸ ê¸°ìˆ </th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>"ìš´ë™ì´ í†µì¦ì„ ê°ì†Œì‹œì¼°ë‹¤"</td>
                            <td>"ìš´ë™ëŸ‰ì´ ë§ì€ ì‚¬ëŒì˜ í†µì¦ì´ ë‚®ì•˜ë‹¤"</td>
                        </tr>
                        <tr>
                            <td>"ìš°ìš¸ì´ ê¸°ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí–ˆë‹¤"</td>
                            <td>"ìš°ìš¸ê³¼ ê¸°ëŠ¥ì€ ìŒì˜ ìƒê´€ì„ ë³´ì˜€ë‹¤"</td>
                        </tr>
                        <tr>
                            <td>"ë‚™ìƒì´ ë‘ë ¤ì›€ì„ ì¼ìœ¼ì¼°ë‹¤"</td>
                            <td>"ë‚™ìƒ ê²½í—˜ê³¼ ë‚™ìƒ ë‘ë ¤ì›€ì€ ê´€ë ¨ì´ ìˆì—ˆë‹¤"</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>5.2 ì¢…ë‹¨ ì—°êµ¬ì™€ì˜ ë¹„êµ</h3>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>íŠ¹ì„±</th>
                            <th>íš¡ë‹¨ ì—°êµ¬</th>
                            <th>ì¢…ë‹¨ ì—°êµ¬</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ì¸¡ì • ì‹œì </td>
                            <td>1íšŒ</td>
                            <td>2íšŒ ì´ìƒ</td>
                        </tr>
                        <tr>
                            <td>ì¸ê³¼ê´€ê³„</td>
                            <td>ì¶”ë¡  ë¶ˆê°€</td>
                            <td>ì¶”ë¡  ê°€ëŠ¥ (ì œí•œì )</td>
                        </tr>
                        <tr>
                            <td>ì‹œê°„/ë¹„ìš©</td>
                            <td>ì ìŒ</td>
                            <td>ë§ìŒ</td>
                        </tr>
                        <tr>
                            <td>íƒˆë½ ë¬¸ì œ</td>
                            <td>ì—†ìŒ</td>
                            <td>ìˆìŒ</td>
                        </tr>
                        <tr>
                            <td>ìœ ë³‘ë¥ </td>
                            <td>ì¸¡ì • ê°€ëŠ¥</td>
                            <td>ì¸¡ì • ê°€ëŠ¥</td>
                        </tr>
                        <tr>
                            <td>ë°œìƒë¥ </td>
                            <td>ì¸¡ì • ë¶ˆê°€</td>
                            <td>ì¸¡ì • ê°€ëŠ¥</td>
                        </tr>
                        <tr>
                            <td>ë³€í™” ì¸¡ì •</td>
                            <td>ë¶ˆê°€</td>
                            <td>ê°€ëŠ¥</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <hr>

            <h2>6. íš¡ë‹¨ ì—°êµ¬ DB ì„¤ê³„ ì˜ˆì‹œ</h2>

            <h3>6.1 ì™„ì „í•œ ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ</h3>

            <div class="sql-box">
                <h3>ğŸ’» ë…¸ì¸ ë‚™ìƒ ìš”ì¸ íš¡ë‹¨ ì—°êµ¬</h3>
                <pre><code>-- ì—°êµ¬ ì œëª©: ì§€ì—­ì‚¬íšŒ ë…¸ì¸ì˜ ë‚™ìƒ ê´€ë ¨ ìš”ì¸
-- ì„¤ê³„: íš¡ë‹¨ ì—°êµ¬, ë¹„êµ ì§‘ë‹¨ (ë‚™ìƒêµ° vs ë¹„ë‚™ìƒêµ°)

-- 1. ì°¸ê°€ì ê¸°ë³¸ ì •ë³´
CREATE TABLE fall_study_participants (
    participant_id TEXT PRIMARY KEY,
    enrollment_date DATE NOT NULL,

    -- ì¸êµ¬í†µê³„
    birth_date DATE,
    gender TEXT CHECK (gender IN ('M', 'F')),
    education_years INTEGER,
    living_alone INTEGER CHECK (living_alone IN (0, 1)),

    -- ì§‘ë‹¨ ë¶„ë¥˜
    fall_history INTEGER CHECK (fall_history IN (0, 1)),  -- ì§€ë‚œ 1ë…„ ë‚™ìƒ ì—¬ë¶€
    fall_count INTEGER DEFAULT 0,  -- ë‚™ìƒ íšŸìˆ˜

    -- ì˜ë£Œ ì •ë³´
    comorbidity_count INTEGER,
    medication_count INTEGER,
    vision_impairment INTEGER CHECK (vision_impairment IN (0, 1)),
    hearing_impairment INTEGER CHECK (hearing_impairment IN (0, 1))
);

-- 2. ì‹ ì²´ ê¸°ëŠ¥ ì¸¡ì •
CREATE TABLE fall_study_physical (
    measurement_id INTEGER PRIMARY KEY,
    participant_id TEXT NOT NULL,
    measurement_date DATE NOT NULL,
    assessor_id TEXT,

    -- ì‹ ì²´ ê³„ì¸¡
    height_cm DECIMAL(5,1),
    weight_kg DECIMAL(5,2),

    -- ê·¼ë ¥
    grip_strength_kg DECIMAL(4,1),
    chair_stand_count INTEGER,  -- 30ì´ˆ ì˜ì ì•‰ì•˜ë‹¤ ì¼ì–´ì„œê¸°

    -- ê· í˜•
    tandem_stance_sec DECIMAL(5,2),  -- ì¼ë ¬ ì„œê¸° ì‹œê°„
    single_leg_stance_sec DECIMAL(5,2),  -- í•œë°œ ì„œê¸° ì‹œê°„

    -- ì´ë™ì„±
    tug_time_sec DECIMAL(5,2),  -- Timed Up and Go
    gait_speed_ms DECIMAL(4,2),  -- ë³´í–‰ ì†ë„ (m/s)

    FOREIGN KEY (participant_id) REFERENCES fall_study_participants(participant_id)
);

-- 3. ì„¤ë¬¸ ì‘ë‹µ
CREATE TABLE fall_study_questionnaires (
    response_id INTEGER PRIMARY KEY,
    participant_id TEXT NOT NULL,
    response_date DATE NOT NULL,

    -- ë‚™ìƒ íš¨ëŠ¥ê° (FES-I, 16ë¬¸í•­, 16-64ì )
    fes_i_total INTEGER CHECK (fes_i_total BETWEEN 16 AND 64),

    -- ìš°ìš¸ (GDS-15, 15ë¬¸í•­, 0-15ì )
    gds_15_total INTEGER CHECK (gds_15_total BETWEEN 0 AND 15),

    -- ì¸ì§€ (MMSE, 0-30ì )
    mmse_total INTEGER CHECK (mmse_total BETWEEN 0 AND 30),

    -- ì¼ìƒìƒí™œí™œë™ (K-ADL, K-IADL)
    adl_score INTEGER,
    iadl_score INTEGER,

    FOREIGN KEY (participant_id) REFERENCES fall_study_participants(participant_id)
);

-- 4. í†µí•© VIEW
CREATE VIEW fall_study_complete AS
SELECT
    p.participant_id,
    -- ë‚˜ì´ ê³„ì‚°
    (strftime('%Y', 'now') - strftime('%Y', p.birth_date)) -
    (strftime('%m-%d', 'now') < strftime('%m-%d', p.birth_date)) AS age,
    p.gender,
    p.fall_history,
    p.fall_count,
    p.comorbidity_count,
    p.medication_count,

    -- ì‹ ì²´ ì¸¡ì •
    ph.height_cm,
    ph.weight_kg,
    ROUND(ph.weight_kg / (ph.height_cm/100.0 * ph.height_cm/100.0), 1) AS bmi,
    ph.grip_strength_kg,
    ph.tug_time_sec,
    ph.gait_speed_ms,

    -- ì„¤ë¬¸
    q.fes_i_total,
    q.gds_15_total,
    q.mmse_total

FROM fall_study_participants p
LEFT JOIN fall_study_physical ph ON p.participant_id = ph.participant_id
LEFT JOIN fall_study_questionnaires q ON p.participant_id = q.participant_id;</code></pre>
            </div>

            <h3>6.2 ë¶„ì„ìš© ì¿¼ë¦¬ ì˜ˆì‹œ</h3>

            <div class="sql-box">
                <h3>ğŸ’» ë¶„ì„ ì¿¼ë¦¬</h3>
                <pre><code>-- 1. ì§‘ë‹¨ë³„ ê¸°ìˆ í†µê³„
SELECT
    CASE fall_history WHEN 1 THEN 'ë‚™ìƒêµ°' ELSE 'ë¹„ë‚™ìƒêµ°' END AS group_name,
    COUNT(*) AS n,
    ROUND(AVG(age), 1) AS mean_age,
    SUM(CASE WHEN gender = 'F' THEN 1 ELSE 0 END) AS female_count,
    ROUND(AVG(grip_strength_kg), 1) AS mean_grip,
    ROUND(AVG(tug_time_sec), 2) AS mean_tug,
    ROUND(AVG(fes_i_total), 1) AS mean_fes
FROM fall_study_complete
GROUP BY fall_history;

-- 2. ë‚™ìƒ ê´€ë ¨ ìš”ì¸ íƒìƒ‰ (ì´ë¶„í˜• ê²°ê³¼ë³€ìˆ˜ ì¤€ë¹„)
SELECT
    participant_id,
    fall_history,
    age,
    CASE WHEN gender = 'F' THEN 1 ELSE 0 END AS female,
    grip_strength_kg,
    tug_time_sec,
    fes_i_total,
    gds_15_total,
    comorbidity_count
FROM fall_study_complete
WHERE grip_strength_kg IS NOT NULL
  AND tug_time_sec IS NOT NULL;

-- 3. ìœ„í—˜ ìš”ì¸ë³„ ë‚™ìƒë¥ 
SELECT
    CASE
        WHEN tug_time_sec > 12 THEN 'TUG > 12ì´ˆ'
        ELSE 'TUG â‰¤ 12ì´ˆ'
    END AS tug_category,
    COUNT(*) AS total,
    SUM(fall_history) AS fall_count,
    ROUND(100.0 * SUM(fall_history) / COUNT(*), 1) AS fall_rate_pct
FROM fall_study_complete
WHERE tug_time_sec IS NOT NULL
GROUP BY CASE WHEN tug_time_sec > 12 THEN 'TUG > 12ì´ˆ' ELSE 'TUG â‰¤ 12ì´ˆ' END;

-- 4. ìƒê´€ê´€ê³„ ë¶„ì„ ì¤€ë¹„ (ì—°ì† ë³€ìˆ˜ ì¶”ì¶œ)
SELECT
    age,
    grip_strength_kg,
    tug_time_sec,
    gait_speed_ms,
    fes_i_total,
    gds_15_total
FROM fall_study_complete
WHERE grip_strength_kg IS NOT NULL;</code></pre>
            </div>

            <div class="summary-box">
                <h3>ğŸ“ ì´ ì¥ì˜ í•µì‹¬ ì •ë¦¬</h3>
                <ol>
                    <li><strong>íš¡ë‹¨ ì—°êµ¬</strong>: í•œ ì‹œì ì—ì„œ ëª¨ë“  ë³€ìˆ˜ë¥¼ ì¸¡ì •í•˜ëŠ” ì—°êµ¬ ì„¤ê³„</li>
                    <li><strong>ë°ì´í„° êµ¬ì¡°</strong>: 1ëª… = 1í–‰ì˜ Wide formatì´ ê¸°ë³¸</li>
                    <li><strong>í…Œì´ë¸” ì„¤ê³„</strong>: ë‹¨ìˆœí•œ ì—°êµ¬ëŠ” ë‹¨ì¼ í…Œì´ë¸”, ë³µì¡í•œ ì—°êµ¬ëŠ” ë¶„ë¦¬</li>
                    <li><strong>ì§‘ë‹¨ ë¹„êµ</strong>: group ë³€ìˆ˜ë¡œ ì§‘ë‹¨ êµ¬ë¶„, ë§¤ì¹­ ì •ë³´ëŠ” ë³„ë„ í…Œì´ë¸”</li>
                    <li><strong>í•œê³„</strong>: ì¸ê³¼ê´€ê³„ ì¶”ë¡  ë¶ˆê°€, "ê´€ë ¨ì´ ìˆë‹¤"ë¡œ ê¸°ìˆ </li>
                    <li><strong>í™œìš©</strong>: ìœ ë³‘ë¥  ì¡°ì‚¬, ìš”ì¸ íƒìƒ‰, ì²™ë„ íƒ€ë‹¹í™”ì— ì í•©</li>
                </ol>
            </div>

            <div class="nav-buttons">
                <a href="chapter-9.html" class="nav-btn">â† ì´ì „</a>
                <span class="page-num">10 / 20</span>
                <a href="chapter-11.html" class="nav-btn">ë‹¤ìŒ â†’</a>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>
