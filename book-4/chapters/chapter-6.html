<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6ì¥: JSON ì‘ë‹µ ë§Œë“¤ê¸° - ë¬¼ë¦¬ì¹˜ë£Œì‚¬ë¥¼ ìœ„í•œ DB 4ê¶Œ</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    @@include('components/top-nav.html', {"root": "../..", "activeBook": "4"})

    @@include('components/mobile-menu.html')

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">Ã—</button>
            <div class="sidebar-header">
                <h1>ğŸ“• ë¬¼ë¦¬ì¹˜ë£Œì‚¬ë¥¼ ìœ„í•œ</h1>
                <p>ì›¹ ì•± ë§Œë“¤ê¸° (4ê¶Œ)</p>
            </div>
            <ul class="nav-list" id="navList"></ul>
        </nav>

        <main class="main">
            <h1 class="title">JSON ì‘ë‹µ ë§Œë“¤ê¸°</h1>

            <h2>JSONì´ë€?</h2>

            <p>JSON(JavaScript Object Notation)ì€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” í‘œì¤€ í˜•ì‹ì…ë‹ˆë‹¤.</p>

            <pre><code>{
    "name": "ê¹€ì² ìˆ˜",
    "age": 35,
    "phone": "010-1234-5678"
}</code></pre>

            <h3>íŠ¹ì§•</h3>
            <ul>
                <li>ì‚¬ëŒì´ ì½ê¸° ì‰¬ì›€</li>
                <li>ê¸°ê³„ê°€ íŒŒì‹±í•˜ê¸° ì‰¬ì›€</li>
                <li>ê±°ì˜ ëª¨ë“  í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì§€ì›</li>
                <li>API í†µì‹ ì˜ í‘œì¤€</li>
            </ul>

            <hr>

            <h2>Flaskì—ì„œ JSON ì‘ë‹µ</h2>

            <h3>ë°©ë²• 1: jsonify() ì‚¬ìš©</h3>
            <pre><code>from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/api/patient')
def get_patient():
    patient = {
        'id': 1,
        'name': 'ê¹€ì² ìˆ˜',
        'phone': '010-1234-5678'
    }
    return jsonify(patient)</code></pre>

            <h3>ë°©ë²• 2: ë”•ì…”ë„ˆë¦¬ ì§ì ‘ ë°˜í™˜ (Flask 2.0+)</h3>
            <pre><code>@app.route('/api/patient')
def get_patient():
    return {
        'id': 1,
        'name': 'ê¹€ì² ìˆ˜',
        'phone': '010-1234-5678'
    }</code></pre>

            <div class="tip"><strong>ğŸ’¡ jsonify()ë¥¼ ê¶Œì¥</strong><br>
            ëª…ì‹œì ì´ê³ , ì¶”ê°€ ì„¤ì •(í•œê¸€ ì²˜ë¦¬ ë“±)ì´ ì‰½ìŠµë‹ˆë‹¤.</div>

            <hr>

            <h2>ì‹¤ìŠµ: í™˜ì API ë§Œë“¤ê¸°</h2>

            <pre><code>from flask import Flask, jsonify

app = Flask(__name__)

# í•œê¸€ ê¹¨ì§ ë°©ì§€
app.config['JSON_AS_ASCII'] = False

# ì„ì‹œ ë°ì´í„°
patients = [
    {'id': 1, 'name': 'ê¹€ì² ìˆ˜', 'phone': '010-1234-5678', 'birth': '1985-03-15'},
    {'id': 2, 'name': 'ì´ì˜í¬', 'phone': '010-2345-6789', 'birth': '1990-07-22'},
    {'id': 3, 'name': 'ë°•ë¯¼ìˆ˜', 'phone': '010-3456-7890', 'birth': '1978-11-08'},
]

# ì „ì²´ ëª©ë¡
@app.route('/api/patients')
def get_patients():
    return jsonify({
        'success': True,
        'data': patients,
        'count': len(patients)
    })

# ê°œë³„ ì¡°íšŒ
@app.route('/api/patients/&lt;int:patient_id&gt;')
def get_patient(patient_id):
    for p in patients:
        if p['id'] == patient_id:
            return jsonify({
                'success': True,
                'data': p
            })
    return jsonify({
        'success': False,
        'error': 'í™˜ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
    }), 404

if __name__ == '__main__':
    app.run(debug=True)</code></pre>

            <h3>í…ŒìŠ¤íŠ¸</h3>
            <p>ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸:</p>
            <ul>
                <li><code>http://127.0.0.1:5000/api/patients</code></li>
                <li><code>http://127.0.0.1:5000/api/patients/1</code></li>
                <li><code>http://127.0.0.1:5000/api/patients/999</code></li>
            </ul>

            <hr>

            <h2>ì‘ë‹µ êµ¬ì¡° ì„¤ê³„</h2>

            <p>ì¼ê´€ëœ ì‘ë‹µ í˜•ì‹ì„ ì‚¬ìš©í•˜ë©´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.</p>

            <h3>ì„±ê³µ ì‘ë‹µ</h3>
            <pre><code>{
    "success": true,
    "data": { ... },
    "message": "ì¡°íšŒ ì„±ê³µ"
}</code></pre>

            <h3>ì‹¤íŒ¨ ì‘ë‹µ</h3>
            <pre><code>{
    "success": false,
    "error": "í™˜ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
    "code": "NOT_FOUND"
}</code></pre>

            <h3>ëª©ë¡ ì‘ë‹µ</h3>
            <pre><code>{
    "success": true,
    "data": [ ... ],
    "count": 10,
    "page": 1,
    "total_pages": 5
}</code></pre>

            <hr>

            <h2>HTTP ìƒíƒœ ì½”ë“œ</h2>

            <p>ì‘ë‹µê³¼ í•¨ê»˜ ìƒíƒœ ì½”ë“œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>

            <table>
                <tr>
                    <th>ì½”ë“œ</th>
                    <th>ì˜ë¯¸</th>
                    <th>ì‚¬ìš© ìƒí™©</th>
                </tr>
                <tr>
                    <td>200</td>
                    <td>OK</td>
                    <td>ì„±ê³µ</td>
                </tr>
                <tr>
                    <td>201</td>
                    <td>Created</td>
                    <td>ìƒì„± ì„±ê³µ</td>
                </tr>
                <tr>
                    <td>400</td>
                    <td>Bad Request</td>
                    <td>ì˜ëª»ëœ ìš”ì²­</td>
                </tr>
                <tr>
                    <td>404</td>
                    <td>Not Found</td>
                    <td>ë°ì´í„° ì—†ìŒ</td>
                </tr>
                <tr>
                    <td>500</td>
                    <td>Server Error</td>
                    <td>ì„œë²„ ì˜¤ë¥˜</td>
                </tr>
            </table>

            <h3>ìƒíƒœ ì½”ë“œ ë°˜í™˜í•˜ê¸°</h3>
            <pre><code># ì„±ê³µ (200ì€ ê¸°ë³¸ê°’)
return jsonify({'success': True, 'data': patient})

# ìƒì„± ì„±ê³µ (201)
return jsonify({'success': True, 'data': new_patient}), 201

# ì°¾ì„ ìˆ˜ ì—†ìŒ (404)
return jsonify({'success': False, 'error': 'Not found'}), 404

# ì˜ëª»ëœ ìš”ì²­ (400)
return jsonify({'success': False, 'error': 'Invalid data'}), 400</code></pre>

            <hr>

            <h2>POST ìš”ì²­ ì²˜ë¦¬í•˜ê¸°</h2>

            <p>í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ JSON ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>

            <pre><code>from flask import Flask, jsonify, request

@app.route('/api/patients', methods=['POST'])
def create_patient():
    # ìš”ì²­ ë°ì´í„° ë°›ê¸°
    data = request.get_json()

    # ë°ì´í„° ê²€ì¦
    if not data.get('name'):
        return jsonify({
            'success': False,
            'error': 'ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤'
        }), 400

    # ìƒˆ í™˜ì ìƒì„± (ì„ì‹œë¡œ ID ë¶€ì—¬)
    new_patient = {
        'id': len(patients) + 1,
        'name': data['name'],
        'phone': data.get('phone', ''),
        'birth': data.get('birth', '')
    }
    patients.append(new_patient)

    return jsonify({
        'success': True,
        'data': new_patient,
        'message': 'í™˜ìê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤'
    }), 201</code></pre>

            <div class="tip"><strong>ğŸ’¡ í…ŒìŠ¤íŠ¸ ë°©ë²•</strong><br>
            POST ìš”ì²­ì€ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. Postman, curl, ë˜ëŠ” ë‚˜ì¤‘ì— ë§Œë“¤ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</div>

            <hr>

            <h2>ì´ë²ˆ ì¥ ì •ë¦¬</h2>

            <ul>
                <li>JSONì€ API í†µì‹ ì˜ í‘œì¤€ í˜•ì‹ì…ë‹ˆë‹¤</li>
                <li><code>jsonify()</code>ë¡œ JSON ì‘ë‹µì„ ë§Œë“­ë‹ˆë‹¤</li>
                <li><code>JSON_AS_ASCII = False</code>ë¡œ í•œê¸€ ê¹¨ì§ì„ ë°©ì§€í•©ë‹ˆë‹¤</li>
                <li>ì¼ê´€ëœ ì‘ë‹µ êµ¬ì¡°ë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤</li>
                <li>HTTP ìƒíƒœ ì½”ë“œë¡œ ê²°ê³¼ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤</li>
            </ul>

            <blockquote>ë‹¤ìŒ ì¥ì—ì„œëŠ” ë“œë””ì–´ MySQLê³¼ ì—°ê²°í•©ë‹ˆë‹¤. ì§„ì§œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ë´…ì‹œë‹¤!</blockquote>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn">â† ì´ì „</button>
                <span class="page-num" id="pageNum"></span>
                <button class="nav-btn" id="nextBtn">ë‹¤ìŒ â†’</button>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>
