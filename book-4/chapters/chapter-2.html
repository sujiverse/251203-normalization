<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2장: 웹앱 구조 이해 - 물리치료사를 위한 DB 4권</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    @@include('components/top-nav.html', {"root": "../..", "activeBook": "4"})

    @@include('components/mobile-menu.html')

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">×</button>
            <div class="sidebar-header">
                <h1>📕 물리치료사를 위한</h1>
                <p>웹 앱 만들기 (4권)</p>
            </div>
            <ul class="nav-list" id="navList"></ul>
        </nav>

        <main class="main">
            <h1 class="title">웹앱 구조 이해</h1>

            <h2>웹앱의 3가지 층</h2>

            <p>웹 앱은 마치 레스토랑과 같습니다.</p>

            <table>
                <tr>
                    <th>레스토랑</th>
                    <th>웹앱</th>
                    <th>역할</th>
                </tr>
                <tr>
                    <td>홀 (손님 접대)</td>
                    <td><strong>프론트엔드</strong></td>
                    <td>사용자가 보고 만지는 화면</td>
                </tr>
                <tr>
                    <td>주방 (요리)</td>
                    <td><strong>백엔드</strong></td>
                    <td>요청을 처리하는 서버</td>
                </tr>
                <tr>
                    <td>창고 (재료 보관)</td>
                    <td><strong>데이터베이스</strong></td>
                    <td>데이터 저장소</td>
                </tr>
            </table>

            <hr>

            <h2>프론트엔드란?</h2>

            <p>사용자가 직접 보고 만지는 부분입니다.</p>

            <h3>구성 요소</h3>
            <ul>
                <li><strong>HTML</strong> - 뼈대 (버튼, 입력칸, 표 등의 구조)</li>
                <li><strong>CSS</strong> - 옷 (색상, 크기, 배치 등 스타일)</li>
                <li><strong>JavaScript</strong> - 행동 (클릭하면 뭔가 일어나게)</li>
            </ul>

            <h3>비유로 이해하기</h3>
            <pre class="file-tree">HTML = 집의 구조 (방, 문, 창문)
CSS  = 인테리어 (벽지, 가구 배치)
JS   = 전기/수도 (스위치 누르면 불 켜짐)</pre>

            <div class="tip"><strong>💡 우리가 사용할 Luckysheet</strong><br>
            Luckysheet는 누군가가 미리 만들어둔 "엑셀 UI"입니다. HTML/CSS/JS로 엑셀 기능을 처음부터 만들 필요 없이, 가져다 쓰면 됩니다.</div>

            <hr>

            <h2>백엔드란?</h2>

            <p>사용자 눈에 보이지 않는 서버 쪽 프로그램입니다.</p>

            <h3>하는 일</h3>
            <ul>
                <li>프론트엔드의 요청을 받음</li>
                <li>데이터베이스에서 데이터를 가져오거나 저장</li>
                <li>결과를 프론트엔드에 돌려줌</li>
            </ul>

            <h3>예시 흐름</h3>
            <pre><code>1. 사용자가 "환자 목록 보기" 버튼 클릭
2. 프론트엔드 → 백엔드: "환자 목록 줘"
3. 백엔드 → DB: "SELECT * FROM patients"
4. DB → 백엔드: 환자 데이터
5. 백엔드 → 프론트엔드: JSON 형태로 전달
6. 프론트엔드: 화면에 표시</code></pre>

            <div class="tip"><strong>💡 우리가 사용할 Flask</strong><br>
            Flask는 Python으로 만든 백엔드 프레임워크입니다. 간단하고 배우기 쉬워서 입문자에게 좋습니다.</div>

            <hr>

            <h2>API란?</h2>

            <p>프론트엔드와 백엔드가 대화하는 방식입니다.</p>

            <h3>레스토랑 비유</h3>
            <ul>
                <li>손님(프론트)이 메뉴판(API)을 보고 주문</li>
                <li>"김치찌개 하나요" = <code>GET /api/patients</code></li>
                <li>주방(백엔드)이 요리해서 가져다줌</li>
            </ul>

            <h3>우리가 만들 API 예시</h3>
            <table>
                <tr>
                    <th>API</th>
                    <th>기능</th>
                </tr>
                <tr>
                    <td><code>GET /api/patients</code></td>
                    <td>환자 목록 조회</td>
                </tr>
                <tr>
                    <td><code>POST /api/patients</code></td>
                    <td>환자 등록</td>
                </tr>
                <tr>
                    <td><code>GET /api/reservations</code></td>
                    <td>예약 목록 조회</td>
                </tr>
                <tr>
                    <td><code>PUT /api/reservations/1</code></td>
                    <td>예약 수정</td>
                </tr>
            </table>

            <hr>

            <h2>데이터베이스</h2>

            <p>3권에서 만든 MySQL 데이터베이스를 그대로 사용합니다.</p>

            <h3>주요 테이블 (복습)</h3>
            <ul>
                <li><code>patients</code> - 환자 정보</li>
                <li><code>therapists</code> - 치료사 정보</li>
                <li><code>treatment_sessions</code> - 치료 세션 (예약)</li>
                <li><code>billings</code> - 청구/수납</li>
            </ul>

            <hr>

            <h2>전체 흐름 다시 정리</h2>

            <pre class="file-tree">┌─────────────────────────────────────────────────────┐
│                    웹 브라우저                        │
│  ┌─────────────────────────────────────────────┐   │
│  │          프론트엔드 (HTML/CSS/JS)              │   │
│  │          + Luckysheet (엑셀 UI)              │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
                         │ ▲
                    요청 │ │ 응답 (JSON)
                         ▼ │
┌─────────────────────────────────────────────────────┐
│                  백엔드 (Flask)                      │
│                    - API 제공                       │
│                    - 비즈니스 로직                   │
└─────────────────────────────────────────────────────┘
                         │ ▲
                    SQL  │ │ 결과
                         ▼ │
┌─────────────────────────────────────────────────────┐
│              데이터베이스 (MySQL)                    │
│                healing_hands DB                    │
└─────────────────────────────────────────────────────┘</pre>

            <hr>

            <h2>이번 장 정리</h2>

            <table>
                <tr>
                    <th>계층</th>
                    <th>기술</th>
                    <th>역할</th>
                </tr>
                <tr>
                    <td>프론트엔드</td>
                    <td>HTML, CSS, JS, Luckysheet</td>
                    <td>화면 표시</td>
                </tr>
                <tr>
                    <td>백엔드</td>
                    <td>Python, Flask</td>
                    <td>API 처리</td>
                </tr>
                <tr>
                    <td>데이터베이스</td>
                    <td>MySQL</td>
                    <td>데이터 저장</td>
                </tr>
            </table>

            <blockquote>다음 장에서는 개발 환경을 세팅합니다. Python, Flask, VS Code를 설치해봅시다!</blockquote>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn">← 이전</button>
                <span class="page-num" id="pageNum"></span>
                <button class="nav-btn" id="nextBtn">다음 →</button>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>
