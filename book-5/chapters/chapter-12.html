<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12ì¥: HTTPS ì ìš©í•˜ê¸° - ë¬¼ë¦¬ì¹˜ë£Œì‚¬ë¥¼ ìœ„í•œ DB 5ê¶Œ</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    @@include('components/top-nav.html', {"root": "../..", "activeBook": "5"})

    @@include('components/mobile-menu.html')

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <button class="close-btn" onclick="toggleMenu()">Ã—</button>
            <div class="sidebar-header">
                <h1>ğŸ›¡ï¸ 5ê¶Œ: ë³´ì•ˆ í¸</h1>
                <p>DB & ì„œë²„ ë³´ì•ˆ</p>
            </div>
            <ul class="nav-list" id="navList"></ul>
        </nav>

        <main class="main">
            <h1 class="title">HTTPS ì ìš©í•˜ê¸°</h1>

            <h2>HTTPSê°€ í•„ìš”í•œ ì´ìœ </h2>

            <pre class="file-tree">HTTP (í‰ë¬¸ í†µì‹ )
â”‚
â”œâ”€â”€ í´ë¼ì´ì–¸íŠ¸ â†’ [ë¡œê·¸ì¸: admin/password123] â†’ ì„œë²„
â”‚                        â†‘
â”‚                    ê³µê²©ìê°€ ë³¼ ìˆ˜ ìˆìŒ!
â”‚
HTTPS (ì•”í˜¸í™” í†µì‹ )
â”‚
â”œâ”€â”€ í´ë¼ì´ì–¸íŠ¸ â†’ [ì•”í˜¸í™”ëœ ë°ì´í„°] â†’ ì„œë²„
â”‚                        â†‘
â”‚                    í•´ë… ë¶ˆê°€!</pre>

            <table>
                <tr>
                    <th>ìœ„í˜‘</th>
                    <th>HTTP</th>
                    <th>HTTPS</th>
                </tr>
                <tr>
                    <td>ë„ì²­</td>
                    <td>ê°€ëŠ¥</td>
                    <td>ë¶ˆê°€</td>
                </tr>
                <tr>
                    <td>ë°ì´í„° ë³€ì¡°</td>
                    <td>ê°€ëŠ¥</td>
                    <td>ë¶ˆê°€</td>
                </tr>
                <tr>
                    <td>í”¼ì‹±</td>
                    <td>ì‰¬ì›€</td>
                    <td>ì–´ë ¤ì›€</td>
                </tr>
            </table>

            <hr>

            <h2>SSL/TLS ì¸ì¦ì„œ</h2>

            <pre class="file-tree">ì¸ì¦ì„œ ì¢…ë¥˜
â”‚
â”œâ”€â”€ DV (Domain Validation)
â”‚   â”œâ”€â”€ ë„ë©”ì¸ ì†Œìœ  í™•ì¸ë§Œ
â”‚   â”œâ”€â”€ ê°€ì¥ ë¹ ë¦„ (ëª‡ ë¶„)
â”‚   â””â”€â”€ Let's Encrypt (ë¬´ë£Œ)
â”‚
â”œâ”€â”€ OV (Organization Validation)
â”‚   â”œâ”€â”€ ì¡°ì§ ì •ë³´ í™•ì¸
â”‚   â””â”€â”€ ë©°ì¹  ì†Œìš”
â”‚
â””â”€â”€ EV (Extended Validation)
    â”œâ”€â”€ ì—„ê²©í•œ ì‹¬ì‚¬
    â”œâ”€â”€ ì£¼ì†Œì°½ì— íšŒì‚¬ëª… í‘œì‹œ
    â””â”€â”€ ê¸ˆìœµê¸°ê´€ ë“± ì‚¬ìš©</pre>

            <hr>

            <h2>Let's Encryptë¡œ ë¬´ë£Œ ì¸ì¦ì„œ ë°œê¸‰</h2>

            <h3>1. Certbot ì„¤ì¹˜</h3>
            <pre><code># Ubuntu/Debian
sudo apt update
sudo apt install certbot python3-certbot-nginx

# CentOS/RHEL
sudo yum install epel-release
sudo yum install certbot python3-certbot-nginx</code></pre>

            <h3>2. ì¸ì¦ì„œ ë°œê¸‰</h3>
            <pre><code># Nginx ì‚¬ìš© ì‹œ (ìë™ ì„¤ì •)
sudo certbot --nginx -d healing-hands.com -d www.healing-hands.com

# ë…ë¦½ ì‹¤í–‰ (ìˆ˜ë™ ì„¤ì •)
sudo certbot certonly --standalone -d healing-hands.com</code></pre>

            <h3>3. ì¸ì¦ì„œ ìœ„ì¹˜</h3>
            <pre><code>/etc/letsencrypt/live/healing-hands.com/
â”œâ”€â”€ fullchain.pem    # ì¸ì¦ì„œ + ì²´ì¸
â”œâ”€â”€ privkey.pem      # ê°œì¸í‚¤
â”œâ”€â”€ cert.pem         # ì¸ì¦ì„œë§Œ
â””â”€â”€ chain.pem        # ì¤‘ê°„ ì¸ì¦ì„œ</code></pre>

            <hr>

            <h2>Nginx SSL ì„¤ì •</h2>

            <pre><code># /etc/nginx/sites-available/healing-hands

server {
    listen 80;
    server_name healing-hands.com www.healing-hands.com;

    # HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name healing-hands.com www.healing-hands.com;

    # ì¸ì¦ì„œ ê²½ë¡œ
    ssl_certificate /etc/letsencrypt/live/healing-hands.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/healing-hands.com/privkey.pem;

    # SSL ì„¤ì • (ë³´ì•ˆ ê°•í™”)
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;

    # SSL ì„¸ì…˜ ìºì‹œ
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    # OCSP Stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    resolver 8.8.8.8 8.8.4.4 valid=300s;

    # HSTS (HTTP Strict Transport Security)
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    # ë‚˜ë¨¸ì§€ ì„¤ì •...
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}</code></pre>

            <hr>

            <h2>ì¸ì¦ì„œ ìë™ ê°±ì‹ </h2>

            <p>Let's Encrypt ì¸ì¦ì„œëŠ” 90ì¼ë§ˆë‹¤ ê°±ì‹ ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>

            <pre><code># ê°±ì‹  í…ŒìŠ¤íŠ¸
sudo certbot renew --dry-run

# Cronìœ¼ë¡œ ìë™ ê°±ì‹  ì„¤ì •
sudo crontab -e

# ë§¤ì¼ ìƒˆë²½ 3ì‹œì— ê°±ì‹  ì‹œë„
0 3 * * * /usr/bin/certbot renew --quiet --post-hook "systemctl reload nginx"</code></pre>

            <hr>

            <h2>Flaskì—ì„œ HTTPS ì²˜ë¦¬</h2>

            <pre><code>from flask import Flask, redirect, request

app = Flask(__name__)

# HTTPS ê°•ì œ (í”„ë¡ì‹œ ë’¤ì—ì„œ)
@app.before_request
def force_https():
    # X-Forwarded-Proto í—¤ë” í™•ì¸ (Nginxê°€ ì„¤ì •)
    if request.headers.get('X-Forwarded-Proto') == 'http':
        url = request.url.replace('http://', 'https://', 1)
        return redirect(url, code=301)

# ë˜ëŠ” Flask-Talisman ì‚¬ìš©
from flask_talisman import Talisman

talisman = Talisman(
    app,
    force_https=True,
    strict_transport_security=True,
    strict_transport_security_max_age=31536000
)</code></pre>

            <hr>

            <h2>Mixed Content ë¬¸ì œ</h2>

            <p>HTTPS í˜ì´ì§€ì—ì„œ HTTP ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë“œí•˜ë©´ ë³´ì•ˆ ê²½ê³ ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p>

            <pre><code>&lt;!-- âŒ Mixed Content ì—ëŸ¬ --&gt;
&lt;script src="http://example.com/script.js"&gt;&lt;/script&gt;
&lt;img src="http://example.com/image.png"&gt;

&lt;!-- âœ… HTTPS ë˜ëŠ” í”„ë¡œí† ì½œ ìƒëŒ€ ê²½ë¡œ --&gt;
&lt;script src="https://example.com/script.js"&gt;&lt;/script&gt;
&lt;script src="//example.com/script.js"&gt;&lt;/script&gt;
&lt;img src="/static/image.png"&gt;</code></pre>

            <hr>

            <h2>SSL Labs í…ŒìŠ¤íŠ¸</h2>

            <p>SSL ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>

            <pre><code># https://www.ssllabs.com/ssltest/

í…ŒìŠ¤íŠ¸ ê²°ê³¼:
â”œâ”€â”€ A+ : ìµœê³  ë“±ê¸‰ (ëª©í‘œ!)
â”œâ”€â”€ A  : ìš°ìˆ˜
â”œâ”€â”€ B  : ì–‘í˜¸ (ê°œì„  í•„ìš”)
â”œâ”€â”€ C~F: ë³´ì•ˆ ì·¨ì•½</code></pre>

            <h3>A+ ë“±ê¸‰ì„ ìœ„í•œ ì„¤ì •</h3>
            <pre><code># TLS 1.0, 1.1 ë¹„í™œì„±í™”
ssl_protocols TLSv1.2 TLSv1.3;

# ì•½í•œ ì•”í˜¸í™” ì œì™¸
ssl_ciphers 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384';

# HSTS í™œì„±í™”
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload";</code></pre>

            <hr>

            <h2>ê°œë°œ í™˜ê²½ì—ì„œ HTTPS</h2>

            <pre><code># ìì²´ ì„œëª… ì¸ì¦ì„œ ìƒì„± (ê°œë°œìš©)
openssl req -x509 -newkey rsa:4096 \
    -keyout key.pem -out cert.pem \
    -days 365 -nodes \
    -subj "/CN=localhost"

# Flask ê°œë°œ ì„œë²„ì—ì„œ ì‚¬ìš©
if __name__ == '__main__':
    app.run(ssl_context=('cert.pem', 'key.pem'))</code></pre>

            <div class="warning">
                <strong>ì£¼ì˜</strong><br>
                ìì²´ ì„œëª… ì¸ì¦ì„œëŠ” ë¸Œë¼ìš°ì € ê²½ê³ ê°€ ë°œìƒí•©ë‹ˆë‹¤.<br>
                ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.
            </div>

            <hr>

            <h2>HTTPS ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>

            <table>
                <tr>
                    <th>í•­ëª©</th>
                    <th>í™•ì¸</th>
                </tr>
                <tr>
                    <td>ìœ íš¨í•œ SSL ì¸ì¦ì„œ ì„¤ì¹˜</td>
                    <td>â˜</td>
                </tr>
                <tr>
                    <td>HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸</td>
                    <td>â˜</td>
                </tr>
                <tr>
                    <td>TLS 1.2 ì´ìƒë§Œ í—ˆìš©</td>
                    <td>â˜</td>
                </tr>
                <tr>
                    <td>HSTS í—¤ë” ì„¤ì •</td>
                    <td>â˜</td>
                </tr>
                <tr>
                    <td>ì¸ì¦ì„œ ìë™ ê°±ì‹  ì„¤ì •</td>
                    <td>â˜</td>
                </tr>
                <tr>
                    <td>SSL Labs A ë“±ê¸‰ ì´ìƒ</td>
                    <td>â˜</td>
                </tr>
                <tr>
                    <td>Mixed Content ì—†ìŒ</td>
                    <td>â˜</td>
                </tr>
            </table>

            <hr>

            <h2>ì´ë²ˆ ì¥ ì •ë¦¬</h2>

            <ul>
                <li><strong>HTTPS</strong>ëŠ” í†µì‹  êµ¬ê°„ì„ ì•”í˜¸í™”</li>
                <li><strong>Let's Encrypt</strong>ë¡œ ë¬´ë£Œ ì¸ì¦ì„œ ë°œê¸‰</li>
                <li>ì¸ì¦ì„œëŠ” <strong>90ì¼ë§ˆë‹¤ ìë™ ê°±ì‹ </strong> ì„¤ì •</li>
                <li><strong>HSTS</strong>ë¡œ HTTPS ê°•ì œ</li>
                <li><strong>SSL Labs</strong>ì—ì„œ ì„¤ì • ê²€ì¦</li>
            </ul>

            <blockquote>ë‹¤ìŒ ì¥ì—ì„œëŠ” ë¡œê¹…ê³¼ ëª¨ë‹ˆí„°ë§ì„ ë°°ì›ë‹ˆë‹¤!</blockquote>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn">â† ì´ì „</button>
                <span class="page-num" id="pageNum"></span>
                <button class="nav-btn" id="nextBtn">ë‹¤ìŒ â†’</button>
            </div>
        </main>
    </div>
    <script src="../js/nav.js"></script>
</body>
</html>
